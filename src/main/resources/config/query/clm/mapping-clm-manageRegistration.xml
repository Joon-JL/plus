<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE queryservice PUBLIC "-//ANYFRAME//DTD QUERYSERVICE//EN"
"http://www.anyframejava.org/dtd/anyframe-core-query-mapping-3.1.dtd">

<queryservice>
    <queries>		
		<!-- 게약 상세 보기 (체결 후 등록) -->
		<query id="clm.manage.detailRegistration" isCamelCase="false"  comment="검토의뢰 보기 ">
		  <statement>
		    <![CDATA[
			    SELECT ROW_NUMBER() OVER(ORDER BY A.CNTRT_ID ASC) AS RN
						,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	    	  WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	    	  WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              		      ELSE CD_NM_ENG
			               		 END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.BIZ_CLSFCN ) AS BIZ_CLSFCN_NM
						,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	    	  WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	    	  WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              		      ELSE CD_NM_ENG
			               		 END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.DEPTH_CLSFCN ) AS DEPTH_CLSFCN_NM
						,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	    	  WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	    	  WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              		      ELSE CD_NM_ENG
			               		 END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNCLSNPURPS_BIGCLSFCN ) AS CNCLSNPURPS_BIGCLSFCN_NM
						,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	    	  WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	    	  WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              		      ELSE CD_NM_ENG
			               		 END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNCLSNPURPS_MIDCLSFCN ) AS CNCLSNPURPS_MIDCLSFCN_NM
						,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	    	  WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	    	  WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              		      ELSE CD_NM_ENG
			               		 END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNTRT_TRGT ) AS CNTRT_TRGT_NM      
						,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
									  WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
									  WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
									  ELSE CD_NM_ENG END FROM TB_COM_CD WHERE CD = A.PAYMENT_GBN ) AS PAYMENT_GBN_NM 
						,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
									  WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
									  WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
								      ELSE CD_NM_ENG END FROM TB_COM_CD WHERE CD = A.BFHDCSTN_APBT_MTHD) AS BFHDCSTN_APBT_MTHD_NM 
						,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
									  WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
									  WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
									  ELSE CD_NM_ENG END FROM TB_COM_CD WHERE CD = A.CNTRT_OPPNT_TYPE)  AS CNTRT_OPPNT_KIND
						,A.CNTRT_OPPNT_TYPE
						,A.CNTRT_OPPNT_NM				      
						,A.CNTRT_OPPNT_RPRSNTMAN
						,A.CNTRT_OPPNT_RESPMAN
						,A.CNTRT_OPPNT_TELNO
						,A.CNTRT_OPPNT_EMAIL				      
						,CONVERT(VARCHAR,  CONVERT(DATETIME, A.RE_DEMNDDAY), 23) AS RE_DEMNDDAY
						,CONVERT(VARCHAR, A.REQ_DT, 23) AS REQ_DT
						,CONVERT(VARCHAR, CONVERT(DATETIME, A.CNTRTPERIOD_STARTDAY), 23) AS CNTRTPERIOD_STARTDAY
						,CONVERT(VARCHAR, CONVERT(DATETIME, A.CNTRTPERIOD_ENDDAY) , 23) AS CNTRTPERIOD_ENDDAY
						,CONVERT(VARCHAR, CONVERT(DATETIME, A.BFHDCSTN_APBTDAY) ,23) AS BFHDCSTN_APBTDAY
						,CASE WHEN :vo.session_user_locale = 'ko' THEN
								CASE WHEN depth_status= 'C02603' THEN 'DROP계약'  ELSE '계약'  END
							  WHEN :vo.session_user_locale = 'fr' THEN
								CASE WHEN depth_status= 'C02603' THEN 'ABANDONNER le contrat'  ELSE 'Contrats'  END
							  WHEN :vo.session_user_locale = 'de' THEN
								CASE WHEN depth_status= 'C02603' THEN 'Vertrag ablegen'  ELSE 'Vertrag'  END
							  ELSE
								CASE WHEN depth_status= 'C02603' THEN 'DROP Contract'  ELSE 'Contract' END
							END + CONVERT(VARCHAR, ROW_NUMBER() OVER(ORDER BY A.CNTRT_ID ASC)) AS TAB_NMssssss
						,A.CNSD_STATUS
						,A.CNSDREQ_ID
						, A.MN_CNSD_DEPT
						, A.MN_RESPMAN_APNT_YN
						, A.VC_CNSD_DEPT
						, A.VC_CNSD_DEMND_DT
						, A.VC_CNSD_DEMND_CONT
						, A.VC_RESPMAN_APNT_YN
						, A.DMSTFRGN_GBN
						, A.DRAFT_DEMND_YN
						, A.PLNDBN_REQ_YN
						, A.LAST_CNSD_YN
						, A.PREV_CNSDREQ_ID
						, A.REQ_TITLE
						, A.REQMAN_ID
						, A.REQMAN_NM
						, A.REQ_DEPT
						, A.REQ_DEPT_NM
						, A.LASTBN_CHGE_YN
						, CASE WHEN A.LASTBN_CHGE_YN = 'Y' THEN 'YES'
							  ELSE 'NO'
						  END AS LASTBN_CHGE_YN_NM
						, A.CNSD_DEMND_CONT
						, A.PRGRS_STATUS
						, A.REBFR_APPRVL_YN
						, A.RE_DT
						, A.PUB_YN
						, A.REQ_OPERDIV
						, A.REQ_UP_DEPT
						, A.REQMAN_JIKGUP_NM
						, A.ACPT_DT
						, A.PLNDBN_CHGE_CONT
						, A.CNSD_HOLD_CAUSE
						, A.FST_REQ_DEPT
						, A.FST_REQ_UP_DEPT
						, A.REQ_INTNL_DEPT_CD
						, A.CNTRT_ID
						, A.CNTRT_NM
						, A.REGION_GBN
						, A.BIZ_CLSFCN
						, A.DEPTH_CLSFCN
						, A.CNCLSNPURPS_BIGCLSFCN
						, A.CNCLSNPURPS_MIDCLSFCN
						, A.CNCLSNPURPS_MIDCLSFCN_ETC
						, A.CNTRT_TRGT
						, A.CNTRT_TRGT_DET
						, A.PAYMENT_GBN
						, A.ANTCPTNEFCT
						, A.SECRET_KEEPPERIOD
						, A.CNTRT_UNTPRC
						/* , LTRIM(CONVERT(VARCHAR, CONVERT(MONEY, A.CNTRT_AMT) , 1)) AS CNTRT_AMT */ 
						, CASE 	WHEN ISNULL(A.CNTRT_AMT,'1') = '1' THEN NULL
						  		ELSE RTRIM(REPLACE(CONVERT(VARCHAR,CONVERT(MONEY,ISNULL(A.CNTRT_AMT,'0')),1),'.00',''))
						  END AS CNTRT_AMT
						, A.CRRNCY_UNIT
						, A.PAYMENT_COND
						, A.AUTO_RNEW_YN
						, CONVERT(VARCHAR, CONVERT(DATETIME, A.EXPRT_NOTIDAY), 23) AS EXPRT_NOTIDAY
						, A.OBLGT_LMT
						, A.SPCL_COND
						, CONVERT(VARCHAR, CONVERT(DATETIME, A.CNCLSN_PLNDDAY), 23) AS CNCLSN_PLNDDAY
						, A.CNTRT_RESPMAN_ID
						, A.CNTRT_RESPMAN_NM
						, A.CNTRT_OPPNT_CD
						, A.SIGN_PLNDMAN_ID
						, A.SIGN_PLNDMAN_NM
						, A.SEAL_MTHD
						, (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
									   WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
									   WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
									   ELSE CD_NM_ENG END FROM TB_COM_CD WHERE GRP_CD = 'C021' AND CD = A.SEAL_MTHD ) AS SEAL_MTHD_NM
						, A.CNTRT_CNCLSN_YN
						, A.SIGNMAN_ID
						, A.SIGNMAN_NM
						, A.OPPNT_SIGNMAN_NM
						, A.OPPNT_SIGNMAN_JIKGUP
						, A.OPPNT_SIGNMAN_DEPT
						, CONVERT(VARCHAR, CONVERT(DATETIME, A.OPPNT_SIGNDAY), 23) AS OPPNT_SIGNDAY
						, CONVERT(VARCHAR, CONVERT(DATETIME, A.CNTRT_CNCLSNDAY), 23) AS CNTRT_CNCLSNDAY
						, CONVERT(VARCHAR, CONVERT(DATETIME, A.CPY_REGDAY), 23) AS CPY_REGDAY
						, A.CNTRT_NO
						, A.LOAC
						, A.DSPT_RESOLT_MTHD
						, A.DSPT_RESOLT_MTHD_DET
						, A.ORG_ACPT_DLAY_CAUSE
						, A.ORG_ACPTDAY
						, A.ORG_TKOVMAN_ID
						, A.ORG_TKOVMAN_NM
						, A.ORG_HDOVMAN_ID
						, A.ORG_HDOVMAN_NM
						, A.ORG_STRG_POS
						, A.PRCS_DEPTH
						, A.DEPTH_STATUS
						, A.CNTRT_STATUS
						, A.LOAC_ETC
						, A.CNTRT_CHGE_DEMNDDAY
						, A.CNTRT_CHGE_DEMNDMAN_ID
						, A.CNTRT_CHGE_DEMNDMAN_NM
						, A.CNTRT_CHGE_DEMND_CAUSE
						, A.CNTRT_CHGE_PLNDDAY
						, A.CNTRT_CHGE_CONF_YN
						, A.CNTRT_CHGE_CONFDAY
						, A.CNTRT_CHGE_CONFMAN_ID
						, A.CNTRT_CHGE_CONFMAN_NM
						, A.BFHDCSTN_MTNMAN_ID
						, A.BFHDCSTN_MTNMAN_NM
						, A.BFHDCSTN_MTNMAN_JIKGUP_NM
						, A.BFHDCSTN_MTN_DEPT_NM
						, A.BFHDCSTN_MTNMAN_EMAIL
						, A.BFHDCSTN_APBT_MTHD
						, A.BFHDCSTN_APBTMAN_ID
						, A.BFHDCSTN_APBTMAN_NM
						, A.BFHDCSTN_APBTMAN_JIKGUP_NM
						, A.BFHDCSTN_APBT_DEPT_NM
						, A.SEAL_RQSTDAY
						, A.SEAL_RQSTMAN_ID
						, A.SEAL_RQSTMAN_NM
						, A.SEAL_FFMTMAN_ID
						, A.SEAL_FFMTMAN_NM
						, A.SEAL_FFMTDAY
						, A.CNTRT_UNTPRC_EXPL
						, A.ETC_MAIN_CONT
						, A.IF_SYS_CD
						, A.CNTRT_RESP_DEPT
						, A.CNTRT_RESP_DEPT_NM
						, A.CNTRT_RESP_UP_DEPT
						, A.CNTRT_RESPMAN_JIKGUP_NM
						, A.SIGN_PLND_DEPT_NM
						, A.SIGN_PLNDMAN_JIKGUP_NM
						, A.SEAL_RQST_DEPT_NM
						, A.SEAL_RQSTMAN_JIKGUP_NM
						, A.SEAL_FFMT_DEPT_NM
						, A.SEAL_FFMTMAN_JIKGUP_NM
						, A.SIGN_DEPT_NM
						, A.SIGNMAN_JIKGUP_NM
						, CONVERT(VARCHAR, CONVERT(DATETIME, A.SIGNDAY), 23) AS SIGNDAY
						, A.ORG_TKOV_DEPT_NM
						, A.ORG_TKOVMAN_JIKGUP_NM
						, A.ORG_HDOV_DEPT_NM
						, A.ORG_HDOVMAN_JIKGUP_NM
						, A.CNTRT_CHGE_DEMND_DEPT_NM
						, A.PSHDBKGRND_PURPS
						, A.CNTRT_CHGE_DEMNDMAN_JIKGUP_NM
						, A.CNTRT_CHGE_CONF_DEPT_NM
						, A.CNTRT_CHGE_CONFMAN_JIKGUP_NM
						, A.REG_OPERDIV
						, A.CPY_REGMAN_ID
						, A.CPY_REGMAN_NM
						, A.CPY_REGMAN_JIKGUP_NM
						, A.CPY_REG_DEPT_NM
						, A.FST_CNTRT_RESP_DEPT
						, A.FST_CNTRT_RESP_UP_DEPT
						, A.REG_INTNL_DEPT_CD
						, A.CNTRT_CHGE_CONF_CONT
						, SYS_NM
						, REQ_REG_ID 
						, CASE WHEN :vo.session_user_locale = 'ko' THEN 
							  CASE WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN '검토의뢰' 
								WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN '검토회신'
								WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN '재검토의뢰'
								WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN '재검토회신' 
								WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN '최종본의뢰'
								WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN '최종본회신'
								ELSE '해당없음'
							  END
							  WHEN :vo.session_user_locale = 'fr' THEN 
							  CASE WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Demande de revue' 
								WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Répondre en envoyant la revue'
								WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Réitération de la demande de revue'
								WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN '2ème réponse concernant la revue' 
								WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Demander la version finale'
								WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Répondre à la version finale'
								ELSE 'Non applicable'
							  END
							  WHEN :vo.session_user_locale = 'de' THEN 
							  CASE WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Antrag prüfen' 
								WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Antwort mit Prüfung'
								WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Wiederholter Prüfantrag'
								WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN '2. Prüfantwort' 
								WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Endgültige Version anfordern'
								WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Antwort auf endgültige Version'
								ELSE 'Nicht anwendbar'
							  END
							ELSE 
							  CASE WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Review Request' 
								WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Reply with Review'
								WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Request Re-review'
								WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Re-review Reply' 
								WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Request Final Version'
								WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Reply to Final Version'
								ELSE 'Nonapplicable'
							  END
							END NAVI_TITLE,
							
							A.CNSL_BIG_CD2,
	  						A.CNSL_MID_CD2,
							
							A.CUSTOMER_CD,
							A.CUSTOMER_NM1,
							A.TAX_NO,
							A.GERP_CD,
							
							A.CONT_DRAFT,
							A.TOP_30_CUS,
							A.RELATED_PRODUCTS	,
							

               (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.CONT_DRAFT)  AS CONT_DRAFT_NM ,

               (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.TOP_30_CUS)  AS TOP_30_CUS_NM ,

               (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.RELATED_PRODUCTS)  AS RELATED_PRODUCTS_NM ,
			              		
			              	A.TNC_YN 			
								         
				FROM 
				    (
					    SELECT 
							A.REG_ID AS REQ_REG_ID,
							A.CNSDREQ_ID,
							A.MN_CNSD_DEPT,
							A.MN_RESPMAN_APNT_YN,
							A.VC_CNSD_DEPT,
							A.VC_CNSD_DEMND_DT,
							A.VC_CNSD_DEMND_CONT,
							A.VC_RESPMAN_APNT_YN,
							A.DMSTFRGN_GBN,
							A.DRAFT_DEMND_YN,
							A.PLNDBN_REQ_YN,
							A.LAST_CNSD_YN,
							A.PREV_CNSDREQ_ID,
							A.REQ_TITLE,
							A.REQMAN_ID,
							A.REQMAN_NM,
							A.REQ_DEPT,
							A.REQ_DEPT_NM,
							A.REQ_DT,
							A.RE_DEMNDDAY,
							A.LASTBN_CHGE_YN,
							A.PRGRS_STATUS,
							A.REBFR_APPRVL_YN,
							A.RE_DT,
							A.PUB_YN,
							A.REG_DT,
							A.REG_ID,
							A.REG_NM,
							A.MOD_DT,
							A.MOD_ID,
							A.MOD_NM,
							A.DEL_YN,
							A.DEL_DT,
							A.DEL_ID,
							A.DEL_NM,
							A.REQ_OPERDIV,
							A.REQ_UP_DEPT,
							A.REQMAN_JIKGUP_NM,
							A.ACPT_DT,
							A.PLNDBN_CHGE_CONT,
							A.CNSD_HOLD_CAUSE,
							A.FST_REQ_DEPT,
							A.FST_REQ_UP_DEPT,
							A.REQ_INTNL_DEPT_CD,
							A.CNSD_DEMND_CONT,
							A.SYS_NM,
							A.CNSD_LEVEL,
							A.FST_CNSDREQ_ID,
							A.FAST_TRACK_DIV,
							B.CNTRT_ID,
							B.CNTRT_NM,
							B.REGION_GBN,
							B.CNTRT_OPPNT_CD,
							B.CNTRT_OPPNT_NM,
							B.CNTRT_OPPNT_RPRSNTMAN,
							B.CNTRT_OPPNT_RESPMAN,
							B.CNTRT_OPPNT_TELNO,
							B.CNTRT_OPPNT_EMAIL,
							B.CNTRT_OPPNT_TYPE,
							B.BIZ_CLSFCN,
							B.DEPTH_CLSFCN,
							B.CNCLSNPURPS_BIGCLSFCN,
							B.CNCLSNPURPS_MIDCLSFCN,
							B.CNCLSNPURPS_MIDCLSFCN_ETC,
							B.CNTRT_TRGT,
							B.CNTRT_TRGT_DET,
							B.PSHDBKGRND_PURPS,
							B.PAYMENT_GBN,
							B.ANTCPTNEFCT,
							B.CNTRTPERIOD_STARTDAY,
							B.CNTRTPERIOD_ENDDAY,
							B.SECRET_KEEPPERIOD,
							B.CNTRT_UNTPRC,
							B.CNTRT_UNTPRC_EXPL,
							B.CNTRT_AMT,
							B.CRRNCY_UNIT,
							B.PAYMENT_COND,
							B.ETC_MAIN_CONT,
							B.AUTO_RNEW_YN,
							B.EXPRT_NOTIDAY,
							B.OBLGT_LMT,
							B.SPCL_COND,
							B.CNCLSN_PLNDDAY,
							B.CNTRT_RESPMAN_ID,
							B.CNTRT_RESPMAN_NM,
							B.CNTRT_RESP_DEPT,
							B.CNTRT_RESP_DEPT_NM,
							B.CNTRT_RESP_UP_DEPT,
							B.CNTRT_RESPMAN_JIKGUP_NM,
							B.FST_CNTRT_RESP_DEPT,
							B.FST_CNTRT_RESP_UP_DEPT,
							B.SIGN_PLNDMAN_ID,
							B.SIGN_PLNDMAN_NM,
							B.SIGN_PLND_DEPT_NM,
							B.SIGN_PLNDMAN_JIKGUP_NM,
							B.SEAL_MTHD,
							B.SEAL_RQSTDAY,
							B.SEAL_RQSTMAN_ID,
							B.SEAL_RQSTMAN_NM,
							B.SEAL_RQST_DEPT_NM,
							B.SEAL_RQSTMAN_JIKGUP_NM,
							B.SEAL_FFMTDAY,
							B.SEAL_FFMTMAN_ID,
							B.SEAL_FFMTMAN_NM,
							B.SEAL_FFMT_DEPT_NM,
							B.SEAL_FFMTMAN_JIKGUP_NM,
							B.CNTRT_CNCLSN_YN,
							B.CNTRT_CNCLSNDAY,
							B.CNTRT_NO,
							B.SIGNMAN_ID,
							B.SIGNMAN_NM,
							B.SIGN_DEPT_NM,
							B.SIGNMAN_JIKGUP_NM,
							B.SIGNDAY,
							B.OPPNT_SIGNMAN_NM,
							B.OPPNT_SIGNMAN_JIKGUP,
							B.OPPNT_SIGNMAN_DEPT,
							B.OPPNT_SIGNDAY,
							B.CPY_REGMAN_ID,
							B.CPY_REGMAN_NM,
							B.CPY_REGMAN_JIKGUP_NM,
							B.CPY_REG_DEPT_NM,
							B.CPY_REGDAY,
							B.LOAC,
							B.LOAC_ETC,
							B.DSPT_RESOLT_MTHD,
							B.DSPT_RESOLT_MTHD_DET,
							B.ORG_ACPT_DLAY_CAUSE,
							B.ORG_ACPTDAY,
							B.ORG_TKOVMAN_ID,
							B.ORG_TKOVMAN_NM,
							B.ORG_TKOV_DEPT_NM,
							B.ORG_TKOVMAN_JIKGUP_NM,
							B.ORG_HDOVMAN_ID,
							B.ORG_HDOVMAN_NM,
							B.ORG_HDOV_DEPT_NM,
							B.ORG_HDOVMAN_JIKGUP_NM,
							B.ORG_STRG_POS,
							B.CNTRT_STATUS,
							B.CNTRT_CHGE_DEMNDDAY,
							B.CNTRT_CHGE_DEMNDMAN_ID,
							B.CNTRT_CHGE_DEMNDMAN_NM,
							B.CNTRT_CHGE_DEMND_DEPT_NM,
							B.CNTRT_CHGE_DEMNDMAN_JIKGUP_NM,
							B.CNTRT_CHGE_DEMND_CAUSE,
							B.CNTRT_CHGE_PLNDDAY,
							B.CNTRT_CHGE_CONF_YN,
							B.CNTRT_CHGE_CONFDAY,
							B.CNTRT_CHGE_CONF_CONT,
							B.CNTRT_CHGE_CONFMAN_ID,
							B.CNTRT_CHGE_CONFMAN_NM,
							B.CNTRT_CHGE_CONF_DEPT_NM,
							B.CNTRT_CHGE_CONFMAN_JIKGUP_NM,
							B.PRCS_DEPTH,
							B.DEPTH_STATUS,
							B.BFHDCSTN_MTNMAN_ID,
							B.BFHDCSTN_MTNMAN_NM,
							B.BFHDCSTN_MTNMAN_JIKGUP_NM,
							B.BFHDCSTN_MTN_DEPT_NM,
							B.BFHDCSTN_MTNMAN_EMAIL,
							B.BFHDCSTN_APBT_MTHD,
							B.BFHDCSTN_APBTMAN_ID,
							B.BFHDCSTN_APBTMAN_NM,
							B.BFHDCSTN_APBTMAN_JIKGUP_NM,
							B.BFHDCSTN_APBT_DEPT_NM,
							B.BFHDCSTN_APBTDAY,
							B.REG_OPERDIV,
							B.REG_INTNL_DEPT_CD,
							B.IF_SYS_CD,
							B.CNTRT_NM_EN,
							C.CNSD_STATUS ,
							B.CNCLSNPURPS_BIGCLSFCN AS CNSL_BIG_CD2,
	  						B.CNCLSNPURPS_MIDCLSFCN AS CNSL_MID_CD2,
							D.CUSTOMER_CD,
							D.CUSTOMER_NM1,
							D.TAX_NO,
							D.GERP_CD,
							B.CONT_DRAFT,
							B.TOP_30_CUS,
							B.RELATED_PRODUCTS,
							CASE WHEN B.SYS_NM = 'TNC' THEN 'Y'
							ELSE 'N'
							END AS TNC_YN		
							
					    FROM TN_CLM_CONT_CNSDREQ A
					        ,TN_CLM_CONTRACT_CNSD C
					        ,TN_CLM_CONTRACT_MASTER B
					        
					       LEFT OUTER JOIN TN_CLM_CUSTOMER D
					        ON B.CNTRT_OPPNT_CD = D.CUSTOMER_CD
					        
					    WHERE 1=1 
					    AND A.CNSDREQ_ID =  :vo.cnsdreq_id 
					    AND A.DEL_YN = 'N'
					    AND B.CNTRT_INFO_GBN = 'C05404'
					    AND A.CNSDREQ_ID = C.CNSDREQ_ID
					    AND B.CNTRT_ID = C.CNTRT_ID
					    AND B.DEL_YN = 'N'
					    
				    )A
				   
				WHERE 1=1		    	
		    ]]>
		  </statement>
		</query>
		<query id="clm.manage.insertRegistrationMaster" isCamelCase="false" comment="체결후등록 저장 ">
		  <statement>
		    <![CDATA[
			    INSERT INTO TN_CLM_CONTRACT_MASTER (
						CNTRT_ID
						,CNTRT_NM
						,REGION_GBN
						
						,CNTRT_OPPNT_CD						
						,CNTRT_OPPNT_NM
						,CNTRT_OPPNT_TELNO
						,CNTRT_OPPNT_EMAIL
						,CNTRT_OPPNT_RPRSNTMAN
						,CNTRT_OPPNT_TYPE
						,CNTRT_OPPNT_RESPMAN
						
						,BIZ_CLSFCN
						,DEPTH_CLSFCN
						,CNCLSNPURPS_BIGCLSFCN
						,CNCLSNPURPS_MIDCLSFCN
						,CNCLSNPURPS_MIDCLSFCN_ETC
						,CNTRT_TRGT
						,CNTRT_TRGT_DET
						,PSHDBKGRND_PURPS
						,PAYMENT_GBN
						,ANTCPTNEFCT
						,CNTRTPERIOD_STARTDAY
						,CNTRTPERIOD_ENDDAY
						,SECRET_KEEPPERIOD
						,CNTRT_UNTPRC_EXPL
						,CNTRT_AMT
						,CRRNCY_UNIT  
						,PAYMENT_COND
						,ETC_MAIN_CONT
						,AUTO_RNEW_YN
						,CNCLSN_PLNDDAY
						
						,CNTRT_RESPMAN_ID
						,CNTRT_RESPMAN_NM
						,CNTRT_RESP_DEPT
						,CNTRT_RESP_DEPT_NM
						,CNTRT_RESP_UP_DEPT
						,CNTRT_RESPMAN_JIKGUP_NM
						,FST_CNTRT_RESP_DEPT
						,FST_CNTRT_RESP_UP_DEPT
					
						,SEAL_MTHD
						,CNTRT_CNCLSN_YN
						,CNTRT_STATUS
						,CNTRT_CHGE_CONF_YN
						,PRCS_DEPTH
						,DEPTH_STATUS
						,BFHDCSTN_MTNMAN_ID
						,BFHDCSTN_MTNMAN_NM
						,BFHDCSTN_MTNMAN_JIKGUP_NM
						,BFHDCSTN_MTN_DEPT_NM
						,BFHDCSTN_MTNMAN_EMAIL
						,BFHDCSTN_APBT_MTHD
						,BFHDCSTN_APBTMAN_ID
						,BFHDCSTN_APBTMAN_NM
						,BFHDCSTN_APBTMAN_JIKGUP_NM
						,BFHDCSTN_APBT_DEPT_NM
						,BFHDCSTN_APBTDAY
										
						,SEAL_RQSTDAY		
						,SEAL_RQSTMAN_ID	
						,SEAL_RQSTMAN_NM	
						,SEAL_RQST_DEPT_NM	
						,SEAL_RQSTMAN_JIKGUP_NM
						,SEAL_FFMTMAN_ID  	
						,SEAL_FFMTMAN_NM  	
						,SEAL_FFMT_DEPT_NM	
						,SEAL_FFMTMAN_JIKGUP_NM

						,SIGNMAN_ID
						,SIGNMAN_JIKGUP_NM
						,SIGNMAN_NM
						,SIGN_DEPT_NM
						,SIGNDAY
						,OPPNT_SIGNMAN_NM
						,OPPNT_SIGNMAN_JIKGUP
						,OPPNT_SIGNMAN_DEPT
						,OPPNT_SIGNDAY
											
						,CNTRT_INFO_GBN
						,EXPRT_NOTIDAY
						,CNTRT_CNCLSNDAY
				#if(!$vo.cpy_regday.equals(""))		
						,CPY_REGMAN_ID
						,CPY_REGMAN_NM
						,CPY_REGMAN_JIKGUP_NM
						,CPY_REG_DEPT_NM
						,CPY_REGDAY
				#end
						,REG_OPERDIV
						,COMP_CD
						,COMP_NM
						,REG_DT
						,REG_ID
						,REG_NM
						,DEL_YN  
						,CNTRT_NM_EN
						,CNTRT_NO
						,CONT_DRAFT
						,TOP_30_CUS
						,RELATED_PRODUCTS
						,SYS_NM  /* ECMS 추가 */
						,TNC_APP_LINK
						,CTC_LINK
						,OTC_LINK
						,TNC_SUMMARY_LINK
					#if(!$vo.loac.equals(""))		
						,LOAC
					#end
					#if(!$vo.check_list_yn.equals(""))		
						,CHECK_LIST_YN
					#end
				) VALUES (
						:vo.cntrt_id
						,:vo.cntrt_nm
						,:vo.region_gbn
						
						,:vo.cntrt_oppnt_cd						
						,:vo.cntrt_oppnt_nm
						,:vo.cntrt_oppnt_telno
						,:vo.cntrt_oppnt_email
						,:vo.cntrt_oppnt_rprsntman
						,:vo.cntrt_oppnt_type
						,:vo.cntrt_oppnt_respman
						
						,:vo.biz_clsfcn
						,:vo.depth_clsfcn
						,:vo.cnclsnpurps_bigclsfcn
						,:vo.cnclsnpurps_midclsfcn
						,:vo.cnclsnpurps_midclsfcn_etc
						,:vo.cntrt_trgt
						,:vo.cntrt_trgt_det
						#if(!$vo.pshdbkgrnd_purps.equals("") && $vo.pshdbkgrnd_purps)
               				,CAST(:vo.pshdbkgrnd_purps AS NTEXT)
						#else
	               			,NULL
               			#end
						,:vo.payment_gbn
						,:vo.antcptnefct
						,:vo.cntrtperiod_startday
						,:vo.cntrtperiod_endday
						,:vo.secret_keepperiod
						,:vo.cntrt_untprc_expl
						#if(!$vo.cntrt_amt.equals("") && $vo.cntrt_amt)
							,CONVERT(FLOAT, :vo.cntrt_amt)
						#else
							,NULL
						#end	
						,:vo.crrncy_unit
						,:vo.payment_cond
						,:vo.etc_main_cont
						 #if(!$vo.auto_rnew_yn.equals("")  && $vo.auto_rnew_yn)
							,:vo.auto_rnew_yn
						 #else
							,'N'
						 #end						
						#if(!$vo.cnclsn_plndday.equals("") && $vo.cnclsn_plndday)
               				,replace(:vo.cnclsn_plndday,'-','')
						#else
	               			,NULL
               			#end
						,:vo.cntrt_respman_id 					
						,:vo.cntrt_respman_nm
						,:vo.cntrt_resp_dept
						,:vo.cntrt_resp_dept_nm
						,:vo.cntrt_resp_up_dept
						,:vo.cntrt_respman_jikgup_nm
						,:vo.fst_cntrt_resp_dept
						,:vo.fst_cntrt_resp_up_dept
						 #if(!$vo.seal_mthd.equals("")  && $vo.seal_mthd)
							,:vo.seal_mthd
	 					 #else
							,'C02102'
						 #end
						,:vo.cntrt_cnclsn_yn
						,:vo.cntrt_status
						,:vo.cntrt_chge_conf_yn
						,:vo.prcs_depth
						,:vo.depth_status
						,:vo.bfhdcstn_mtnman_id
						,:vo.bfhdcstn_mtnman_nm
						,:vo.bfhdcstn_mtnman_jikgup_nm
						,:vo.bfhdcstn_mtn_dept_nm
						,:vo.bfhdcstn_mtnman_email
						,:vo.bfhdcstn_apbt_mthd
						,:vo.bfhdcstn_apbtman_id
						,:vo.bfhdcstn_apbtman_nm
						,:vo.bfhdcstn_apbtman_jikgup_nm
						,:vo.bfhdcstn_apbt_dept_nm						 
						#if(!$vo.bfhdcstn_apbtday.equals("") && $vo.bfhdcstn_apbtday)
               				,replace(:vo.bfhdcstn_apbtday,'-','')
						#else
	               			,NULL
               			#end						
						,CONVERT(VARCHAR, GETDATE(), 112)
						,:vo.session_user_id        
						,:vo.session_user_nm        
						,:vo.session_dept_nm        
						,:vo.session_jikgup_nm       
						,:vo.seal_ffmtman_id        
						,:vo.seal_ffmtman_nm        
						,:vo.seal_ffmt_dept_nm      
						,:vo.seal_ffmtman_jikgup_nm        		

						,:vo.signman_id
						,:vo.signman_jikgup_nm
						,:vo.signman_nm
						,:vo.sign_dept_nm						
						#if(!$vo.signday.equals("") && $vo.signday)
               				,replace(:vo.signday,'-','')
						#else
	               			,NULL
               			#end
						,:vo.oppnt_signman_nm
						,:vo.oppnt_signman_jikgup
						,:vo.oppnt_signman_dept						  
						#if(!$vo.oppnt_signday.equals("") && $vo.oppnt_signday)
               				,replace(:vo.oppnt_signday,'-','')
						#else
	               			,NULL
               			#end
						,'C05404'						
						#if(!$vo.exprt_notiday.equals("") && $vo.exprt_notiday)
               				,replace(:vo.exprt_notiday,'-','') 
						#else
	               			,NULL
               			#end						
						#if(!$vo.cntrt_cnclsnday.equals("") && $vo.cntrt_cnclsnday)
               				,replace(:vo.cntrt_cnclsnday,'-','')
						#else
	               			,NULL
               			#end 
				#if(!$vo.cpy_regday.equals(""))
						,:vo.session_user_id
						,:vo.session_user_nm
						,:vo.session_jikgup_nm
						,:vo.session_dept_nm
						,:vo.cpy_regday
				#end
						,:vo.reg_operdiv 
						,:vo.session_comp_cd
						,:vo.session_comp_nm
						,GETDATE()						
						,:vo.reg_id
						,:vo.reg_nm
						,:vo.del_yn
						,:vo.cntrt_nm
						,(	
							SELECT 
								CASE 
									WHEN CNT1 = 0 	THEN AUTO_CNTRD_NM + '0001'
										ELSE AUTO_CNTRD_NM + dbo.Function_lpad(CONVERT(VARCHAR, (SUBSTRING(MAX1,LEN(MAX1)-3,4))+1), 4, '0')
									END AS AUTO_CNTRD_NM
								FROM     
								(   
									SELECT
										(SELECT COUNT(CNTRT_ID) 
											FROM TN_CLM_CONTRACT_MASTER A  
											WHERE CHARINDEX(TA.AUTO_CNTRD_NM,CNTRT_NO) > 0) AS CNT1,
										(SELECT MAX(CNTRT_NO) 
											FROM TN_CLM_CONTRACT_MASTER A  
											WHERE CHARINDEX(TA.AUTO_CNTRD_NM,CNTRT_NO) > 0) AS MAX1,
													AUTO_CNTRD_NM
									FROM (
											SELECT 	:vo.session_comp_cd + Rtrim(replace(CONVERT(CHAR(10), GETDATE(), 11),'/',''))+'_' AS AUTO_CNTRD_NM
										 ) TA
								) X
	          			 )
	          			 ,:vo.cntrt_src_cont_drft
	          			 ,:vo.cntrt_top30_cus
	          			 ,:vo.cntrt_rel_prd
	          			 ,:vo.sys_nm  /* ECMS 추가 */
	          			 ,:vo.tnc_app_link
	          			 ,:vo.ctc_link
	          			 ,:vo.otc_link
	          			 ,:vo.tnc_summary_link
	          		#if(!$vo.loac.equals(""))
	          			 ,:vo.loac
	          		#end	 
	          		#if(!$vo.check_list_yn.equals(""))		
						 ,:vo.check_list_yn
					#end
			    )
		    ]]>
		  </statement>
		</query>
		<query id="clm.manage.modifyRegistrationMaster" isCamelCase="false" comment="체결후등록 수정 ">
		  <statement>
		    <![CDATA[
			    UPDATE  TN_CLM_CONTRACT_MASTER SET
						CNTRT_NM 					= :vo.cntrt_nm
						,REGION_GBN 				= :vo.region_gbn
						
						,CNTRT_OPPNT_CD 			= :vo.cntrt_oppnt_cd						
						,CNTRT_OPPNT_NM 			= :vo.cntrt_oppnt_nm
						,CNTRT_OPPNT_TELNO 			= :vo.cntrt_oppnt_telno
						,CNTRT_OPPNT_EMAIL 			= :vo.cntrt_oppnt_email
						,CNTRT_OPPNT_RPRSNTMAN 		= :vo.cntrt_oppnt_rprsntman
						,CNTRT_OPPNT_TYPE 			= :vo.cntrt_oppnt_type
						,CNTRT_OPPNT_RESPMAN 		= :vo.cntrt_oppnt_respman
						
						,BIZ_CLSFCN 				= :vo.biz_clsfcn
						,DEPTH_CLSFCN 				= :vo.depth_clsfcn
						,CNCLSNPURPS_BIGCLSFCN 		= :vo.cnclsnpurps_bigclsfcn
						,CNCLSNPURPS_MIDCLSFCN 		= :vo.cnclsnpurps_midclsfcn
						,CNCLSNPURPS_MIDCLSFCN_ETC 	= :vo.cnclsnpurps_midclsfcn_etc
						,CNTRT_TRGT 				= :vo.cntrt_trgt
						,CNTRT_TRGT_DET 			= :vo.cntrt_trgt_det
						,PSHDBKGRND_PURPS 			= :vo.pshdbkgrnd_purps
						,PAYMENT_GBN 				= :vo.payment_gbn
						,ANTCPTNEFCT 				= :vo.antcptnefct
						,CNTRTPERIOD_STARTDAY 		= :vo.cntrtperiod_startday
						,CNTRTPERIOD_ENDDAY 		= :vo.cntrtperiod_endday
						,SECRET_KEEPPERIOD 			= :vo.secret_keepperiod	
						,CRRNCY_UNIT 				= :vo.crrncy_unit					
						#if(!$vo.cntrt_amt.equals("") && $vo.cntrt_amt)
							,CNTRT_AMT 				= CONVERT(FLOAT, :vo.cntrt_amt)
						#else
							,CNTRT_AMT 				= NULL
						#end						
						,CNTRT_UNTPRC_EXPL 			= :vo.cntrt_untprc_expl
						,PAYMENT_COND 				= :vo.payment_cond
						,ETC_MAIN_CONT 				= :vo.etc_main_cont
						#if(!$vo.auto_rnew_yn.equals("")  && $vo.auto_rnew_yn)
							,AUTO_RNEW_YN = :vo.auto_rnew_yn
						#else
							,AUTO_RNEW_YN = 'N'
						#end
						,CNTRT_RESPMAN_ID 			= :vo.cntrt_respman_id
						,SEAL_MTHD 					= :vo.seal_mthd
						,CNTRT_CNCLSN_YN 			= :vo.cntrt_cnclsn_yn
						,CNTRT_STATUS 				= :vo.cntrt_status
						,CNTRT_CHGE_CONF_YN 		= :vo.cntrt_chge_conf_yn
						,PRCS_DEPTH 				= :vo.prcs_depth
						,DEPTH_STATUS 				= :vo.depth_status
						,BFHDCSTN_MTNMAN_ID 		= :vo.bfhdcstn_mtnman_id
						,BFHDCSTN_MTNMAN_NM 		= :vo.bfhdcstn_mtnman_nm
						,BFHDCSTN_MTNMAN_JIKGUP_NM	= :vo.bfhdcstn_mtnman_jikgup_nm
						,BFHDCSTN_MTN_DEPT_NM 		= :vo.bfhdcstn_mtn_dept_nm
						,BFHDCSTN_MTNMAN_EMAIL 		= :vo.bfhdcstn_mtnman_email
						,BFHDCSTN_APBT_MTHD			= :vo.bfhdcstn_apbt_mthd
						,BFHDCSTN_APBTMAN_ID 		= :vo.bfhdcstn_apbtman_id
						,BFHDCSTN_APBTMAN_NM 		= :vo.bfhdcstn_apbtman_nm
						,BFHDCSTN_APBTMAN_JIKGUP_NM = :vo.bfhdcstn_apbtman_jikgup_nm
						,BFHDCSTN_APBT_DEPT_NM 		= :vo.bfhdcstn_apbt_dept_nm
					#if(!$vo.bfhdcstn_apbtday.equals("") && $vo.bfhdcstn_apbtday)
               			,BFHDCSTN_APBTDAY 		= replace(:vo.bfhdcstn_apbtday,'-','')
					#else
	               		,BFHDCSTN_APBTDAY 		= NULL
               		#end
               			,CNCLSN_PLNDDAY 			= :vo.cnclsn_plndday
					
		  				,SEAL_RQSTDAY				= CONVERT(VARCHAR, GETDATE(), 112) /* TO_CHAR(SYSDATE,'yyyyMMdd') */ 
		  				,SEAL_RQSTMAN_ID			= :vo.session_user_id
		  				,SEAL_RQSTMAN_NM			= :vo.session_user_nm
		  				,SEAL_RQST_DEPT_NM			= :vo.session_dept_nm
		  				,SEAL_RQSTMAN_JIKGUP_NM		= :vo.session_jikgup_nm
					    ,SEAL_FFMTMAN_ID  			= :vo.seal_ffmtman_id
				   	    ,SEAL_FFMTMAN_NM  			= :vo.seal_ffmtman_nm 
					  	,SEAL_FFMT_DEPT_NM			= :vo.seal_ffmt_dept_nm
						,SEAL_FFMTMAN_JIKGUP_NM 	= :vo.seal_ffmtman_jikgup_nm
				
						,SIGNMAN_ID					= :vo.signman_id
						,SIGNMAN_JIKGUP_NM			= :vo.signman_jikgup_nm
						,SIGNMAN_NM					= :vo.signman_nm
						,SIGN_DEPT_NM				= :vo.sign_dept_nm
					#if(!$vo.signday.equals("") && $vo.signday)
               			,SIGNDAY					= replace(:vo.signday,'-','')
					#else
	               		,SIGNDAY 					= NULL
               		#end
						
						,OPPNT_SIGNMAN_NM			= :vo.oppnt_signman_nm
						,OPPNT_SIGNMAN_JIKGUP		= :vo.oppnt_signman_jikgup
						,OPPNT_SIGNMAN_DEPT			= :vo.oppnt_signman_dept
					#if(!$vo.oppnt_signday.equals("") && $vo.oppnt_signday)
               			,OPPNT_SIGNDAY				= replace(:vo.oppnt_signday,'-','')
					#else
	               		,OPPNT_SIGNDAY 				= NULL
               		#end
						--,CNTRT_INFO_GBN				= 'C05404'	-- 2014-03-27 신성우 주석처리 업데이트시 필요없음
						,EXPRT_NOTIDAY				= :vo.exprt_notiday
						
					#if(!$vo.cntrt_cnclsnday.equals("") && $vo.cntrt_cnclsnday)
               			,CNTRT_CNCLSNDAY			= :vo.cntrt_cnclsnday
					#else
	               		,CNTRT_CNCLSNDAY 			= NULL
               		#end
						,CPY_REGMAN_ID				= CASE WHEN :vo.fileInfos6 = '' THEN CPY_REGMAN_ID
														   ELSE :vo.session_user_id
													  END	
						,CPY_REGMAN_NM				= CASE WHEN :vo.fileInfos6 = '' THEN CPY_REGMAN_NM
														   ELSE :vo.session_user_nm
													  END
						,CPY_REGMAN_JIKGUP_NM		= CASE WHEN :vo.fileInfos6 = '' THEN CPY_REGMAN_JIKGUP_NM
														   ELSE :vo.session_jikgup_nm
													  END
						,CPY_REG_DEPT_NM			= CASE WHEN :vo.fileInfos6 = '' THEN CPY_REG_DEPT_NM
														   ELSE :vo.session_dept_nm
													  END
						,CPY_REGDAY					= CASE WHEN :vo.fileInfos6 = '' THEN CPY_REGDAY
														   ELSE CONVERT(VARCHAR, GETDATE(), 112)
													  END
						,REG_OPERDIV 				= :vo.reg_operdiv
						,MOD_DT 					= GETDATE()
						,MOD_ID 					= :vo.session_user_id
						,MOD_NM  					= :vo.session_user_nm
						#if(!$vo.en_cntrt_nm.equals("")  && $vo.en_cntrt_nm)
							,CNTRT_NM_EN = :vo.en_cntrt_nm 
						#else
							,CNTRT_NM_EN = CNTRT_NM_EN 
						#end
						
						, TOP_30_CUS = :vo.cntrt_top30_cus 
						, RELATED_PRODUCTS = :vo.cntrt_rel_prd 
						, CONT_DRAFT = :vo.cntrt_src_cont_drft 

				
				WHERE 	1=1
				AND CNTRT_ID = :vo.cntrt_id
				AND DEPTH_STATUS NOT IN ('C02603')
		    ]]>
		  </statement>
		</query>
		<!-- 체결후등록 승인 -->
		<!-- Sungwoo Removed Cntrt No Creation. 2014-11-28 -->
		<query id="clm.manage.modifyRegistrationApproval" isCamelCase="false">
			<statement>
			<![CDATA[
				UPDATE  TN_CLM_CONTRACT_MASTER
				SET     MOD_DT                  = GETDATE()
				        , MOD_ID                = :vo.session_user_id
				        , MOD_NM                = :vo.session_user_nm
				#if ($vo.agree_yn.equals("Y"))   
				        , PRCS_DEPTH            = :vo.prcs_depth
				        , DEPTH_STATUS          = :vo.depth_status				
				        , ORG_HDOVMAN_ID        = :vo.org_hdovman_id
				        , ORG_HDOVMAN_NM        = :vo.org_hdovman_nm
				        , ORG_HDOV_DEPT_NM      = :vo.org_hdov_dept_nm
				        , ORG_HDOVMAN_JIKGUP_NM = :vo.org_hdovman_jikgup_nm
				        , ORG_TKOVMAN_ID        = :vo.session_user_id 
				        , ORG_TKOVMAN_NM        = :vo.session_user_nm
				        , ORG_TKOV_DEPT_NM      = :vo.session_dept_nm
				        , ORG_TKOVMAN_JIKGUP_NM = :vo.session_jikgup_nm
				        , ORG_STRG_POS          = :vo.org_strg_pos
				        , ORG_ACPTDAY           = :vo.org_acptday
				        , ORG_ACPT_DLAY_CAUSE   = :vo.org_acpt_dlay_cause
				        , CNTRT_CNCLSN_YN		= 'Y'
				        , CNTRT_CNCLSNDAY		= CONVERT(VARCHAR, GETDATE(), 112)
				        , CNTRT_STATUS			= :vo.cntrt_status
				        , AUTO_RNEW_YN = :vo.auto_rnew_yn 
				        , OBLGT_LMT = :vo.oblgt_lmt 
				        , LOAC = :vo.loac
				        , LOAC_ETC = :vo.loac_etc 
				        , DSPT_RESOLT_MTHD_DET = :vo.dspt_resolt_mthd_det	
				        , SECRET_KEEPPERIOD = :vo.secret_keepperiod
				#end
				#if ($vo.agree_yn.equals("N"))   
				      ,DEL_YN      = 'Y'
				#end
				WHERE CNTRT_ID     = :vo.cntrt_id
			]]>
			</statement>
		</query>
		<!-- 체결후 등록 승인 및 반려 시 상태코드 변경  -->
		<query id="clm.manage.modifyRegistCnsdreqStatus" isCamelCase="false">
			<statement>
			<![CDATA[
				UPDATE	TN_CLM_CONT_CNSDREQ
					   SET	PRGRS_STATUS   	= :vo.prgrs_status
							, MOD_DT  		= GETDATE()
							, MOD_ID  		= :vo.session_user_id
							, MOD_NM  		= :vo.session_user_nm
							, DEL_YN		= CASE WHEN :vo.agree_yn = 'N' THEN 'Y'
											  	   ELSE DEL_YN
											  END
					WHERE	CNSDREQ_ID		= :vo.cnsdreq_id
					  AND	DEL_YN			= 'N'
			]]>
			</statement>
		</query>		
		<!-- 체결후 등록 사본등록 첨부파일(결재용)  -->
		<query id="clm.manage.listRegistrationAttachInfo" isCamelCase="false">
			<statement>
			<![CDATA[
				SELECT 'hisSign' AS FILETYPE
				      , COUNT(1) OVER() AS FILECNT
				      , FILE_ID
				      , ORG_FILE_NM
				      , REF_KEY
				      , '' CNSDREQ_ID
				  FROM TN_COM_ATTACH 
				 WHERE FILE_BIGCLSFCN	= 'F012'
				   AND FILE_MIDCLSFCN	= 'F01203'
				   AND REF_KEY 			= :vo.cntrt_id
				   AND DEL_YN 			= 'N'
			]]>
			</statement>
		</query>		
    </queries>
</queryservice>