<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE queryservice PUBLIC "-//ANYFRAME//DTD QUERYSERVICE//EN" 
"http://www.anyframejava.org/dtd/anyframe-core-query-mapping-3.1.dtd">

<queryservice>
    <queries>
    	<!-- 2014-04-01 Kevin Added. SELMS+ & GERP 연동 쿼리 -->
    	<!-- 2014-04-25 Kevin. TargetCompCd 파라미터 추가. -->
		<query id="clm.gerp.extractSELMSPlusContractData" isCamelCase="false">
		  <statement>
		    <![CDATA[
		    	EXEC SP_GERP_SELECT_CONTRACT_DATA :vo.TargetCompCd, :vo.TargetDate, :vo.TargetHour, :vo.TargetInterval, :vo.CNSDReqID
		    ]]>
		  </statement>
		</query>
		
		<!-- 2014-04-01 Kevin Added. GERP 연동시마다 로그를 기록한다. -->
		<query id="clm.gerp.insertSELMSPlusContractDataLog" isCamelCase="false">
		  <statement>
		    <![CDATA[
		    	INSERT INTO dbo.TB_GERP_DATATRANSFER_LOG(EXECUTION_DATE, SELMSPLUS_DATA_COUNT, TRANSFERRED_DATA_COUNT, FAILED_DATA)
				VALUES(GETDATE(), :vo.SELMSPlusDataCnt, :vo.TransferredDataCnt, :vo.FaildData)
		    ]]>
		  </statement>
		</query>
		
		<!-- 2014-04-28 Kevin Added. GERP에서 조회한 linked 된 데이터를 저장한다. -->
		<query id="clm.gerp.insertSELMSPlusGERPLinkedData" isCamelCase="false">
		  <statement>
		    <![CDATA[
		    	EXEC SP_GERP_SELMSPLUS_INSERT_LINKED_DATA :vo.CompCD, :vo.BACD, :vo.GERPID, :vo.SELMSPlusID, :vo.Linked, :vo.LinkedDateTime, :vo.Module, :vo.Amount, :vo.Currency
		    ]]>
		  </statement>
		</query>
	</queries>
</queryservice>