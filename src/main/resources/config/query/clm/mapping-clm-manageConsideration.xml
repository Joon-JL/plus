<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE queryservice PUBLIC "-//ANYFRAME//DTD QUERYSERVICE//EN"
"http://www.anyframejava.org/dtd/anyframe-core-query-mapping-3.1.dtd">

<queryservice>
    <queries>
    	<query id="clm.manage.getId" isCamelCase="false">
		  <statement>
		    <![CDATA[		     
              SELECT 
              	/* TO_CHAR(GETDATE(),'YYYYmmddHH24MISSSSS') AS GET_ID FROM */
                     LTRIM(CONVERT(VARCHAR, SYSDATETIME(), 112))+
                     REPLACE(REPLACE(SUBSTRING(CONVERT(VARCHAR, SYSDATETIME(), 113), 11, 13),':',''),'.','') AS GET_ID      	
		    ]]>
		  </statement>
		</query>
		
		
		<!-- 차현진 2011-10-21 의뢰아이디 새포맷 clm.manage.getNew CnsdReqId 20111220 일부터 사용 안함 -->
		<query id="clm.manage.getNewReqId_OLD_20111220" isCamelCase="false">
		  <statement>
		    <![CDATA[		    
		     SELECT 
              		:str_dmstfrgn_gbn + TRIM(SEQNO) AS NEWREQ_ID
  				FROM
    				(SELECT         					
                  CASE WHEN cnsdreq_id = ' ' THEN
                    TO_CHAR(GETDATE(),'yyyyMMdd') + '001'
                  ELSE 
                   
                    TO_CHAR(TO_NUMBER(SUBSTRING(cnsdreq_id,1,12))+1)
                  END AS SEQNO              
      					FROM (
                      select ISNULL(MAX(SUBSTRING(cnsdreq_id,2,12)),' ') as cnsdreq_id from 
                      tn_clm_contract_cnsd
                      where 1=1
                      AND SUBSTRING(CNSDREQ_ID,2,8) = TO_CHAR(GETDATE(),'yyyyMMdd')
                     )
      				WHERE 1=1      					
      				) 
		    ]]>
		  </statement>
		</query>
		
		<!-- 검토의뢰시  필수 입력 사항 체크 -->
		<query id="clm.manage.searchRequired" isCamelCase="false">
			<statement>
				<![CDATA[
				 	SELECT  dbo.COM_CNTRT_REQUIRED_INFO( :vo.sys_cd , 
					    :vo.cnsdreq_id ,
					    :vo.cntrt_id ,
					    :vo.user_id 
					    ) AS RET_MSG
				]]>
			</statement>
		</query>
		
		<!-- 재의뢰 , 최종본으뢰 시 이전 의뢰 정보을 복사함 계약 검토 레코드 복사 -->
		<query id="clm.manage.prevContractCnsd" isCamelCase="false">
		  <statement>
		    <![CDATA[		    
		    INSERT INTO TN_CLM_CONTRACT_CNSD(
		                                     CNSDREQ_ID
		                                    ,CNTRT_ID
		                                    ,CNSD_STATUS
		                                    ,REG_DT
		                                    ,REG_ID
		                                    ,REG_NM 
		                                    ,CNSD_MEMO
		                                    ,COMP_CD
		                                    ,COMP_NM
		                                     )
		                           SELECT :vo.cnsdreq_id
		                                 ,CNTRT_ID
		                                 ,'C04301'
		                                 ,GETDATE()
		                                 ,REG_ID
		                                 ,REG_NM 
		                                 ,CNSD_MEMO
		                                 ,:vo.session_comp_cd
						                 ,:vo.session_comp_nm
		                             FROM TN_CLM_CONTRACT_CNSD
		                            WHERE CNSDREQ_ID = :vo.prev_cnsdreq_id
		   
		    ]]>
		  </statement>
		</query>
		
		
		<query id="clm.manage.prevContractCnsdFinal" isCamelCase="false">
		  <statement>
		    <![CDATA[		    
		    	
			            SELECT 
			             (SELECT  
			                        CASE 
			                         WHEN cnsdreq_id = ' ' THEN
			                        /* DECODE(:vo.dmstfrgn_gbn,null,'H','','H',:vo.dmstfrgn_gbn) + TO_CHAR(GETDATE(),'yyyyMMdd') + '001' 
			                        CASE ISNULL(:vo.dmstfrgn_gbn, ' ') 
			                          WHEN ' ' THEN 'H'
			                          WHEN 'H' THEN :vo.dmstfrgn_gbn
			                        ELSE
			                          :vo.dmstfrgn_gbn
			                        END */
			                        'H'
			                        +
			                        CONVERT(VARCHAR, REPLACE(CONVERT(VARCHAR, GETDATE(), 23),'-','')) + '001'
			                      ELSE
			                        /* DECODE(:vo.dmstfrgn_gbn,null,'H','','H',:vo.dmstfrgn_gbn) + TO_CHAR(TO_NUMBER(SUBSTRING(cnsdreq_id,1,12))+1) 
			                        CASE ISNULL(:vo.dmstfrgn_gbn, ' ')
			                          WHEN ' ' THEN 'H'
			                          WHEN 'H' THEN :vo.dmstfrgn_gbn
			                        ELSE 
			                          :vo.dmstfrgn_gbn
			                        END */
			                        'H'
			                        +
			                        CONVERT(VARCHAR, CONVERT(BIGINT, cnsdreq_id)+1)
			                      END AS SEQNO
			               FROM (
			                  SELECT MAX(cnsdreq_id) AS cnsdreq_id 
			                    FROM (
			                          SELECT ISNULL(MAX(SUBSTRING(cnsdreq_id,2,12)),' ') AS cnsdreq_id 
			                            FROM TN_CLM_CONTRACT_CNSD
			                           WHERE 1=1 
			                             AND SUBSTRING(CNSDREQ_ID,2,8) = /* TO_CHAR(GETDATE(),'yyyyMMdd') */
			                                                             REPLACE(CONVERT(VARCHAR, GETDATE(), 23),'-','')
			                          UNION ALL
			                           SELECT ISNULL(MAX(SUBSTRING(cnsdreq_id,2,12)),' ') AS cnsdreq_id 
			                             FROM TN_CLM_CONT_CNSDREQ  
			                            WHERE 1=1 
			                              AND SUBSTRING(CNSDREQ_ID,2,8) = /* TO_CHAR(GETDATE(),'yyyyMMdd') */
			                                                              REPLACE(CONVERT(VARCHAR, GETDATE(), 23),'-','')
			                           ) A
			                    ) B
			              ) AS CNSDREQ_ID
			            FROM TN_CLM_CONTRACT_CNSD
			           WHERE CNSDREQ_ID = :vo.prev_cnsdreq_id 		   
		    ]]>
		  </statement>
		</query>
		
		<query id="clm.manage.prevContractCnsdFinal_DB2_back_up" isCamelCase="false">
		  <statement>
		    <![CDATA[		    
		    	SELECT CNSDREQ_ID as V_NEW_CNSDREQ_ID FROM FINAL TABLE (
			      INSERT INTO TN_CLM_CONTRACT_CNSD
			            ( CNSDREQ_ID, CNTRT_ID, CNSD_STATUS, REG_DT, REG_ID, REG_NM ,CNSD_MEMO)
			            SELECT 
			              (SELECT
			                     /**  CASE WHEN cnsdreq_id = ' ' THEN
			                        :vo.dmstfrgn_gbn + TO_CHAR(GETDATE(),'yyyyMMdd') + '001'
			                      ELSE
			    
			                        :vo.dmstfrgn_gbn + TO_CHAR(TO_NUMBER(SUBSTRING(cnsdreq_id,1,12))+1)
			                      END AS SEQNO
			                      **/
			                      
			                       CASE WHEN cnsdreq_id = ' ' THEN
			                        DECODE(:vo.dmstfrgn_gbn,null,'H','','H',:vo.dmstfrgn_gbn) + TO_CHAR(GETDATE(),'yyyyMMdd') + '001'
			                      ELSE
			    
			                        DECODE(:vo.dmstfrgn_gbn,null,'H','','H',:vo.dmstfrgn_gbn) + TO_CHAR(TO_NUMBER(SUBSTRING(cnsdreq_id,1,12))+1)
			                      END AS SEQNO
			                      
			                      
			               FROM (
			                  SELECT MAX(cnsdreq_id) cnsdreq_id FROM (
			                          SELECT ISNULL(MAX(SUBSTRING(cnsdreq_id,2,12)),' ') AS cnsdreq_id FROM
			                          tn_clm_contract_cnsd
			                          WHERE 1=1 AND SUBSTRING(CNSDREQ_ID,2,8) = TO_CHAR(GETDATE(),'yyyyMMdd')
			                          UNION 
			                                SELECT ISNULL(MAX(SUBSTRING(cnsdreq_id,2,12)),' ') AS cnsdreq_id FROM
			                             TN_CLM_CONT_CNSDREQ  
			                             WHERE 1=1 AND SUBSTRING(CNSDREQ_ID,2,8) = TO_CHAR(GETDATE(),'yyyyMMdd')
			                           )
			                    )
			              ) CNSDREQ_ID,         
			              CNTRT_ID, 'C04301', GETDATE(), REG_ID, REG_NM ,CNSD_MEMO
			            FROM TN_CLM_CONTRACT_CNSD
			            WHERE CNSDREQ_ID = :vo.prev_cnsdreq_id 
			   )
		   
		    ]]>
		  </statement>
		</query>
		
		
		<query id="clm.manage.prevContractCnsdFinal_old" isCamelCase="false">
		  <statement>
		    <![CDATA[		    
		    	SELECT CNSDREQ_ID as V_NEW_CNSDREQ_ID FROM FINAL TABLE (
				  INSERT INTO TN_CLM_CONTRACT_CNSD
				        ( CNSDREQ_ID, CNTRT_ID, CNSD_STATUS, REG_DT, REG_ID, REG_NM ,CNSD_MEMO)
				        SELECT 
				          (SELECT
				                  CASE WHEN cnsdreq_id = ' ' THEN
				                    :vo.dmstfrgn_gbn + TO_CHAR(GETDATE(),'yyyyMMdd') + '001'
				                  ELSE
				
				                    :vo.dmstfrgn_gbn + TO_CHAR(TO_NUMBER(SUBSTRING(cnsdreq_id,1,12))+1)
				                  END AS SEQNO
				           FROM (
				                      SELECT ISNULL(MAX(SUBSTRING(cnsdreq_id,2,12)),' ') AS cnsdreq_id FROM
				                      tn_clm_contract_cnsd
				                      WHERE 1=1 AND SUBSTRING(CNSDREQ_ID,2,8) = TO_CHAR(GETDATE(),'yyyyMMdd')
				                )
				          ) CNSDREQ_ID,         
				          CNTRT_ID, 'C04301', REG_DT, REG_ID, REG_NM ,CNSD_MEMO
						      FROM TN_CLM_CONTRACT_CNSD
						      WHERE CNSDREQ_ID = :vo.prev_cnsdreq_id 
			)
		   
		    ]]>
		  </statement>
		</query>
		<!-- 재의뢰 , 최종본으뢰 시 이전 의뢰 정보을 복사함 계약 담당자  레코드 복사 -->
		<query id="clm.manage.prevContCnsdreqRespman" isCamelCase="false">
		  <statement>
		    <![CDATA[
		         INSERT INTO TN_CLM_CONT_CNSDREQ_RESPMAN (
		                                                  CNSDREQ_ID, 
		                                                  RESPMAN_ID, 
		                                                  RESP_DEPT, 
		                                                  ASGN_DT, 
		                                                  ASGNMAN_ID, 
		                                                  ASGNMAN_NM, 
		                                                  RESPMAN_NM, 
		                                                  RESPMAN_JIKGUP_NM, 
		                                                  MAIN_CNSD_YN, 
		                                                  AUTO_APBT_YN)
				                                         SELECT :vo.cnsdreq_id, 
				                                                RESPMAN_ID, 
				                                                RESP_DEPT, 
				                                                ASGN_DT, 
				                                                ASGNMAN_ID, 
				                                                ASGNMAN_NM, 
				                                                RESPMAN_NM, 
				                                                RESPMAN_JIKGUP_NM, 
				                                                MAIN_CNSD_YN, 
				                                                AUTO_APBT_YN
				                                          FROM TN_CLM_CONT_CNSDREQ_RESPMAN
				                                         WHERE CNSDREQ_ID = :vo.prev_cnsdreq_id
		   
		    ]]>
		  </statement>
		</query>
		<!-- 재의뢰 , 최종본으뢰 시 이전 의뢰 정보을 복사함 의뢰정보 레코드 복사 -->
		<query id="clm.manage.prevContCnsdreq" isCamelCase="false">
		  <statement>
		    <![CDATA[
				INSERT INTO TN_CLM_CONT_CNSDREQ (
					CNSDREQ_ID
					,COMP_CD
					,COMP_NM
					,MN_CNSD_DEPT
					,MN_RESPMAN_APNT_YN
					,VC_RESPMAN_APNT_YN
					,DMSTFRGN_GBN
					,DRAFT_DEMND_YN
					,PLNDBN_REQ_YN
					,LAST_CNSD_YN
					,PREV_CNSDREQ_ID
					,REQ_TITLE
					,REQMAN_ID
					,REQMAN_NM
					,REQMAN_JIKGUP_NM
					,REQ_DEPT
					,REQ_DEPT_NM
					,REQ_INTNL_DEPT_CD
					,REQ_UP_DEPT
					,REQ_DT
					,LASTBN_CHGE_YN
					,REBFR_APPRVL_YN
					,PUB_YN
					,REQ_OPERDIV
					,PRGRS_STATUS
					,FST_REQ_DEPT
					,FST_REQ_UP_DEPT
					,SYS_NM
					,CNSD_LEVEL
					,FST_CNSDREQ_ID
					,DEL_YN
					,REG_ID
					,REG_NM
					,REG_DT
					)
				SELECT :vo.cnsdreq_id
					,:vo.session_comp_cd
					,:vo.session_comp_nm
					,MN_CNSD_DEPT
					,MN_RESPMAN_APNT_YN
					,VC_RESPMAN_APNT_YN
					,DMSTFRGN_GBN
					,'N'
					,:vo.plndbn_req_yn
					,'Y'
					,:vo.prev_cnsdreq_id
					,REQ_TITLE
					,REQMAN_ID
					,REQMAN_NM
					,REQMAN_JIKGUP_NM
					,REQ_DEPT
					,REQ_DEPT_NM
					,REQ_INTNL_DEPT_CD
					,REQ_UP_DEPT
					,:vo.req_dt
					,:vo.lastbn_chge_yn
					,:vo.rebfr_apprvl_yn
					,:vo.pub_yn
					,REQ_OPERDIV
					,'C04201'
					,FST_REQ_DEPT
					,FST_REQ_UP_DEPT
					,SYS_NM
					,ISNULL(CONVERT(BIGINT, CNSD_LEVEL), 0) + 1
					,FST_CNSDREQ_ID
					,'N'
					,REG_ID
					,REG_NM
					,GETDATE()
				FROM TN_CLM_CONT_CNSDREQ
				WHERE CNSDREQ_ID = :vo.prev_cnsdreq_id
		    ]]>
		  </statement>
		</query>
		<!-- 재의뢰 , 최종본으뢰 시 이전 의뢰 정보을 복사함 마스터레코드 상태변경 -->
		<query id="clm.manage.prevContractMaster" isCamelCase="false">
		  <statement>
		    <![CDATA[
		               UPDATE TN_CLM_CONTRACT_MASTER 
		                  SET DEPTH_STATUS = 'C02601', MOD_DT = GETDATE()
				        WHERE 1=1 
				          AND DEPTH_STATUS IN ('C02607', 'C02608','C02609') 
				          AND CNTRT_ID IN (
				                     SELECT CNTRT_ID
				                       FROM TN_CLM_CONTRACT_CNSD
				                      WHERE CNSDREQ_ID = :vo.prev_cnsdreq_id)
		    ]]>
		  </statement>
		</query>
		
		<!-- 최종본 의뢰시 마지막 검토여부 필드  업데이트  재의뢰 /최종본 의뢰시 / 의뢰작서 취소시 사용 -->
		<query id="clm.manage.prevContractMaster.lastCnsdYn" isCamelCase="false">
		  <statement>
		    <![CDATA[
		             UPDATE TN_CLM_CONT_CNSDREQ 
		                SET LAST_CNSD_YN = :vo.last_cnsd_yn
			          WHERE 1=1 
			            AND CNSDREQ_ID = :vo.prev_cnsdreq_id
		    ]]>
		  </statement>
		</query>		     
		<!-- 최종본 의뢰시 마지막 검토여부 필드  업데이트  재의뢰 /최종본 의뢰시 / 의뢰작서 취소시 사용 -->
		
		<!-- clm.manage.listFilevalidate 최종본인경우 계약 여러건인경우 첨부 파일 필수 사항 체크 각 계약별  -->
		<query id="clm.manage.listFilevalidate" isCamelCase="false">
		  <statement>
		    <![CDATA[
		    SELECT /* DECODE(A.CNTRT_CNT,B.FILE_CNT,'N','Y') FILE_VALIDATE */
		           CASE A.CNTRT_CNT
		             WHEN B.FILE_CNT THEN 'N'
		           ELSE 
		             'Y'
		           END AS FILE_VALIDATE
				FROM
				    (
				    SELECT
				        COUNT(ISNULL(CNTRT_ID,0))-1 CNTRT_CNT
				    FROM
				        TN_CLM_CONTRACT_MASTER
				
				       WHERE CNTRT_ID IN (SELECT DISTINCT CNTRT_ID
				                      FROM TN_CLM_CONTRACT_CNSD
				                     WHERE CNSDREQ_ID =:vo.cnsdreq_id)
				               AND DEL_YN = 'N'
				    ) A,
				    (
				     SELECT
				        COUNT(ISNULL(FILE_ID, 0)) FILE_CNT
				     FROM
				        TN_COM_ATTACH
				     WHERE 1=1
				        AND DEL_YN = 'N'
				        AND FILE_BIGCLSFCN = 'F012'
				        AND FILE_MIDCLSFCN = 'F01202'
				        AND FILE_SMLCLSFCN = 'F0120201'
				        AND REF_KEY IN (SELECT CNTRT_ID + '@' + :vo.cnsdreq_id AS FILE_KEY
				              FROM TN_CLM_CONTRACT_MASTER
				             WHERE CNTRT_ID IN (SELECT CNTRT_ID
				                      FROM TN_CLM_CONTRACT_CNSD
				                     WHERE CNSDREQ_ID =:vo.cnsdreq_id)
				               AND DEL_YN = 'N'
				               AND CNTRT_ID NOT IN (:vo.cntrt_id))
				     ) B
		    ]]>
		  </statement>
		</query>
		
		<query id="clm.manage.listFilevalidate_old" isCamelCase="false">
		  <statement>
		    <![CDATA[
		    SELECT DECODE(REF_KEY,NULL,'N',REF_KEY) REF_KEY FROM                   
					(SELECT REF_KEY FROM 
					      TN_COM_ATTACH
					     WHERE 1=1
					     AND DEL_YN = 'N' 
					     AND FILE_BIGCLSFCN = 'F012' AND FILE_MIDCLSFCN = 'F01202' AND FILE_SMLCLSFCN = 'F0120201'   
					     AND REF_KEY IN (
					            SELECT CNTRT_ID +'@'+ :vo.cnsdreq_id AS KEY FROM  TN_CLM_CONTRACT_MASTER 
					                  WHERE CNTRT_ID IN (
					                        SELECT CNTRT_ID
					                          FROM TN_CLM_CONTRACT_CNSD
					                          WHERE CNSDREQ_ID = :vo.cnsdreq_id)
					                  AND DEL_YN = 'N'
					                  AND CNTRT_ID NOT IN (:vo.cntrt_id)
					)
					)A
					,(
					SELECT CNTRT_ID + '@'+:vo.cnsdreq_id AS CNSD_REF_KEY FROM  TN_CLM_CONTRACT_MASTER 
					                  WHERE CNTRT_ID IN (
					                        SELECT CNTRT_ID
					                          FROM TN_CLM_CONTRACT_CNSD
					                          WHERE CNSDREQ_ID = :vo.cnsdreq_id)
					                  AND DEL_YN = 'N'
					                  AND CNTRT_ID NOT IN (:vo.cntrt_id)
					)B
					
					WHERE 1=1
					AND A.REF_KEY(+)=B.CNSD_REF_KEY
		    ]]>
		  </statement>
		</query>
		
		<!-- 계약 여러건인 경우 정검토부서와 부 검토부서 코드 설정을 위해 저장된 계약건중 첫번째로 등록된 계약건의 계약 유형 정보을 가져온다. -->
		<!-- 계약인 한건인 경우 입력폼에 입력된 계약 유형정보로 정검토부서와 부 검토부서 코드을 설정 한다. (참고) -->
		<!--  사용하는곳 없음 -->
		<query id="clm.manage.setReqCnsdDept" isCamelCase="false">
		  <statement>
		    <![CDATA[
		    		  SELECT ROWNUM
						      ,CNTRT_ID
						      ,REGION_GBN
						      ,BIZ_CLSFCN
						      ,DEPTH_CLSFCN
						      ,CNCLSNPURPS_BIGCLSFCN
						      ,CNCLSNPURPS_MIDCLSFCN
						FROM   
						      (SELECT ROWNUM
						            ,B.CNTRT_ID
						            ,B.REGION_GBN
						            ,B.BIZ_CLSFCN
						            ,B.DEPTH_CLSFCN
						            ,B.CNCLSNPURPS_BIGCLSFCN
						            ,B.CNCLSNPURPS_MIDCLSFCN
						      FROM 
						            TN_CLM_CONTRACT_CNSD A
						            ,TN_CLM_CONTRACT_MASTER B
						      WHERE 1=1
						            AND B.DEL_YN = 'N'
						            AND A.CNTRT_ID = B.CNTRT_ID
						            AND A.CNSDREQ_ID = :vo.cnsdreq_id    --'H20111206013'
						      ORDER BY CNTRT_ID ASC
						    )
						WHERE  1=1
						AND ROWNUM = 1
		    ]]>
		  </statement>
		</query>
		
		<query id="clm.manage.insertConsideration" isCamelCase="false">
		  <statement>
		    <![CDATA[
			    INSERT INTO TN_CLM_CONT_CNSDREQ (
	           		CNSDREQ_ID
	               , MN_CNSD_DEPT
	               , MN_RESPMAN_APNT_YN
	               , VC_CNSD_DEPT
	               , VC_CNSD_DEMND_DT
	               , VC_CNSD_DEMND_CONT
	               , VC_RESPMAN_APNT_YN
	               , DMSTFRGN_GBN
	               , DRAFT_DEMND_YN
	               , PLNDBN_REQ_YN
	               , LAST_CNSD_YN
	               , Plndbn_chge_cont
	               , PREV_CNSDREQ_ID
	               , REQ_TITLE
	               , REQMAN_ID
	               , REQMAN_NM
	               , REQ_DEPT
	               , REQ_DEPT_NM
	               , REQ_UP_DEPT
	               , REQMAN_JIKGUP_NM
	               , REQ_DT
	               , ACPT_DT
	               , RE_DEMNDDAY
	               , LASTBN_CHGE_YN
	               , CNSD_DEMND_CONT
	               , PRGRS_STATUS
	               , REBFR_APPRVL_YN
	               , REQ_OPERDIV
	               , RE_DT
	               , PUB_YN
	               , REG_DT
	               , REG_ID
	               , REG_NM               
	               , DEL_YN  
	               , REQ_INTNL_DEPT_CD
	               , FST_REQ_DEPT
	               , FST_REQ_UP_DEPT
	               , COMP_CD
				   , COMP_NM
	                            
	        	) VALUES (
			           :vo.cnsdreq_id
			          ,:vo.mn_cnsd_dept
			          #if(!$vo.prev_cnsdreq_id.equals("")  && $vo.prev_cnsdreq_id)
					    ,:vo.prev_mn_respman_apnt_yn
					  #else
					    ,'N'
					  #end
			          
			          /* ,decode(:vo.prev_cnsdreq_id, '',:vo.vc_cnsd_dept,'') */
			          #if(!$vo.prev_cnsdreq_id.equals("")  && $vo.prev_cnsdreq_id)
						,''
					  #else
						,:vo.vc_cnsd_dept
					  #end
			          
			          ,:vo.vc_cnsd_demnd_dt
			          ,:vo.vc_cnsd_demnd_cont          
			          
			          /* ,decode(:vo.prev_cnsdreq_id, '','N',:vo.prev_vc_respman_apnt_yn) */
			          #if(!$vo.prev_cnsdreq_id.equals("")  && $vo.prev_cnsdreq_id)
						,:vo.prev_vc_respman_apnt_yn
					  #else
						,'N'
					  #end
			          
			          ,:vo.dmstfrgn_gbn
			          ,:vo.draft_demnd_yn
			          
			          /* ,decode(:vo.plndbn_req_yn,null,'N','','N',:vo.plndbn_req_yn) */
					  #if(!$vo.plndbn_req_yn.equals("")  && $vo.plndbn_req_yn)
						,:vo.plndbn_req_yn
					  #else
						,'N'
					  #end
			
			          ,:vo.last_cnsd_yn
			          ,:vo.Plndbn_chge_cont
			          ,:vo.prev_cnsdreq_id
			          ,:vo.req_title
			          ,:vo.reqman_id
			          ,:vo.reqman_nm
			          ,:vo.req_dept
			          ,:vo.req_dept_nm
			          ,:vo.req_up_dept
			          ,:vo.reqman_jikgup_nm
			          ,GETDATE()
			          ,GETDATE()
			          ,:vo.re_demndday
			         
			          /* ,decode(:vo.lastbn_chge_yn,null,'N','','N',:vo.lastbn_chge_yn) */
			          #if(!$vo.lastbn_chge_yn.equals("")  && $vo.lastbn_chge_yn)
						,:vo.lastbn_chge_yn
					  #else
						,'N'
					  #end
			          
			          
			          #if(!$vo.cnsd_demnd_cont.equals("") && $vo.cnsd_demnd_cont)
			          	,CAST(:vo.cnsd_demnd_cont AS NTEXT)
			          #else
			          	,NULL
			          #end
			          ,:vo.prgrs_status
			          ,:vo.rebfr_apprvl_yn
			          ,:vo.req_operdiv
			          ,GETDATE()
			          ,:vo.pub_yn
			          ,GETDATE()
			          ,:vo.reg_id
			          ,:vo.reg_nm          
			          ,:vo.del_yn  
			          ,:vo.req_intnl_dept_cd
			          ,:vo.fst_req_dept
			          ,:vo.fst_req_up_dept
			          ,:vo.session_comp_cd
					  ,:vo.session_comp_nm
					)
				]]>
			</statement>
		</query>
		
		<query id="clm.manage.modifyConsiderationAdd_old" isCamelCase="false">
		  <statement>
		    <![CDATA[
			BEGIN
				UPDATE TN_CLM_CONT_CNSDREQ 
				   SET CNSD_LEVEL = ISNULL(COM_CNSDREQ_DEPTH(:vo.cnsdreq_id), 1) --jnam
				 WHERE CNSDREQ_ID = :vo.cnsdreq_id ;
				
				#if(!$vo.prev_cnsdreq_id.equals(""))
					UPDATE TN_CLM_CONT_CNSDREQ 
					   SET FST_CNSDREQ_ID = (SELECT FST_CNSDREQ_ID 
					                           FROM TN_CLM_CONT_CNSDREQ 
					                          WHERE CNSDREQ_ID = :vo.prev_cnsdreq_id) 
					WHERE CNSDREQ_ID = :vo.cnsdreq_id ;
				#else
					UPDATE TN_CLM_CONT_CNSDREQ 
					   SET FST_CNSDREQ_ID = :vo.cnsdreq_id 
					 WHERE CNSDREQ_ID = :vo.cnsdreq_id ;
				#end
			END;
		    ]]>
		  </statement>
		</query>
		
		<!-- 계약 의뢰 건의 차수를 증가 시켜 줍니다. prev_cnsdreq_di값이 안 넘어 올 경우 -->
		<query id="clm.manage.modifyConsiderationAdd" isCamelCase="false">
		  <statement>
		    <![CDATA[
			
				 UPDATE TN_CLM_CONT_CNSDREQ 
				   SET CNSD_LEVEL = (SELECT LEVEL FROM DBO.[CLM.MANAGE.MODIFYCONSIDERATIONADD]( :vo.cnsdreq_id )) 
				      ,FST_CNSDREQ_ID = :vo.cnsdreq_id 
				 WHERE CNSDREQ_ID = :vo.cnsdreq_id
			
		    ]]>
		  </statement>
		</query>
		
		<!-- 계약 의뢰 건의 차수를 증가 시켜 줍니다. prev_cnsdreq_di값이 넘어 올 경우  -->
		<query id="clm.manage.modifyConsiderationAdd_Prev_cnsdreq_id" isCamelCase="false">
		  <statement>
		    <![CDATA[
			
				UPDATE TN_CLM_CONT_CNSDREQ 
				   SET CNSD_LEVEL = (SELECT LEVEL FROM DBO.[CLM.MANAGE.MODIFYCONSIDERATIONADD]( :vo.cnsdreq_id ))
				      ,FST_CNSDREQ_ID = (SELECT FST_CNSDREQ_ID 
					                           FROM TN_CLM_CONT_CNSDREQ 
					                          WHERE CNSDREQ_ID = :vo.prev_cnsdreq_id) 
				 WHERE CNSDREQ_ID = :vo.cnsdreq_id
				
		    ]]>
		  </statement>
		</query>
		
		<!-- 계약 상대방 정보 -->
		<query id="clm.manage.detailConsideration" isCamelCase="false"  comment="검토의뢰 보기 ">
		  <statement>
		    <![CDATA[
			    SELECT ROW_NUMBER() OVER(ORDER BY A.CNSDREQ_ID) AS RN
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			             	   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.BIZ_CLSFCN ) AS BIZ_CLSFCN_NM
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.DEPTH_CLSFCN ) AS DEPTH_CLSFCN_NM
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNCLSNPURPS_BIGCLSFCN ) AS CNCLSNPURPS_BIGCLSFCN_NM
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNCLSNPURPS_MIDCLSFCN ) AS CNCLSNPURPS_MIDCLSFCN_NM
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNTRT_TRGT ) AS CNTRT_TRGT_NM
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.PAYMENT_GBN ) AS PAYMENT_GBN_NM 
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.BFHDCSTN_APBT_MTHD ) AS BFHDCSTN_APBT_MTHD_NM 
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.CNTRT_OPPNT_TYPE)  AS CNTRT_OPPNT_KIND
				      ,A.CNTRT_OPPNT_TYPE
				      ,A.CNTRT_OPPNT_NM				      
				      ,A.CNTRT_OPPNT_RPRSNTMAN
				      ,A.CNTRT_OPPNT_RESPMAN
				      ,A.CNTRT_OPPNT_TELNO
				      ,A.CNTRT_OPPNT_EMAIL				      
		              , CONVERT(VARCHAR, CONVERT(DATE, A.RE_DEMNDDAY, 23)) AS RE_DEMNDDAY 
		              , CONVERT(VARCHAR, CONVERT(DATE, A.REQ_DT, 23)) AS REQ_DT
		              ,	CASE WHEN A.CNTRTPERIOD_STARTDAY = '' 
			 				THEN '' 
			 				ELSE CONVERT(VARCHAR, CONVERT(DATE, A.CNTRTPERIOD_STARTDAY, 23))
						END AS CNTRTPERIOD_STARTDAY
					  ,	CASE WHEN A.CNTRTPERIOD_ENDDAY = '' 
			 				THEN '' 
			 				ELSE CONVERT(VARCHAR, CONVERT(DATE, A.CNTRTPERIOD_ENDDAY, 23))
						END AS CNTRTPERIOD_ENDDAY 	              
		              ,	CASE 
							WHEN   LEN(A.BFHDCSTN_APBTDAY) > 0  AND A.BFHDCSTN_APBTDAY <> 'null' THEN 
								ISNULL(CONVERT(varchar, CONVERT(date, A.BFHDCSTN_APBTDAY, 23)), '')
							ELSE ''								
					    END  AS BFHDCSTN_APBTDAY
		              ,CASE WHEN :vo.session_user_locale = 'ko' THEN
		              		CASE WHEN depth_status= 'C02603' THEN 'DROP계약' + CONVERT(NVARCHAR,ROW_NUMBER() OVER(ORDER BY A.CNSDREQ_ID)) ELSE '계약' + CONVERT(NVARCHAR,ROW_NUMBER() OVER(ORDER BY A.CNSDREQ_ID)) END
		              	WHEN :vo.session_user_locale = 'fr' THEN
		              		CASE WHEN depth_status= 'C02603' THEN 'ABANDONNER le contrat' + CONVERT(NVARCHAR,ROW_NUMBER() OVER(ORDER BY A.CNSDREQ_ID)) ELSE 'Contrats' + CONVERT(NVARCHAR,ROW_NUMBER() OVER(ORDER BY A.CNSDREQ_ID)) END
		              	WHEN :vo.session_user_locale = 'de' THEN
		              		CASE WHEN depth_status= 'C02603' THEN 'Vertrag ablegen' + CONVERT(NVARCHAR,ROW_NUMBER() OVER(ORDER BY A.CNSDREQ_ID)) ELSE 'Vertrag' + CONVERT(NVARCHAR,ROW_NUMBER() OVER(ORDER BY A.CNSDREQ_ID)) END
		               ELSE
		              		CASE WHEN depth_status= 'C02603' THEN 'DROP Contract' + CONVERT(NVARCHAR, ROW_NUMBER() OVER(ORDER BY A.CNSDREQ_ID)) ELSE 'Contract' + CONVERT(NVARCHAR,ROW_NUMBER() OVER(ORDER BY A.CNSDREQ_ID)) END
		               END AS TAB_NM
		              ,A.CNSD_STATUS
		              ,A.CNSDREQ_ID, A.MN_CNSD_DEPT, A.MN_RESPMAN_APNT_YN, A.VC_CNSD_DEPT, A.VC_CNSD_DEMND_DT, A.VC_CNSD_DEMND_CONT, A.VC_RESPMAN_APNT_YN, A.DMSTFRGN_GBN, A.DRAFT_DEMND_YN, A.PLNDBN_REQ_YN, A.LAST_CNSD_YN, A.PREV_CNSDREQ_ID, A.REQ_TITLE, A.REQMAN_ID, A.REQMAN_NM, A.REQ_DEPT, A.REQ_DEPT_NM
		              ,  A.LASTBN_CHGE_YN
		              /* , DECODE(A.LASTBN_CHGE_YN,'Y','YES','N','NO') LASTBN_CHGE_YN_NM */
		              , CASE A.LASTBN_CHGE_YN 
                          WHEN 'Y' THEN 'YES'
                        ELSE 
                          'NO'
                        END AS LASTBN_CHGE_YN_NM
		              , A.CNSD_DEMND_CONT, A.PRGRS_STATUS, A.REBFR_APPRVL_YN, A.RE_DT, A.PUB_YN, A.REQ_OPERDIV, A.REQ_UP_DEPT, A.REQMAN_JIKGUP_NM, A.ACPT_DT, A.PLNDBN_CHGE_CONT, A.CNSD_HOLD_CAUSE, A.FST_REQ_DEPT, A.FST_REQ_UP_DEPT, A.REQ_INTNL_DEPT_CD, A.CNTRT_ID, A.CNTRT_NM, A.REGION_GBN, A.BIZ_CLSFCN, A.DEPTH_CLSFCN, A.CNCLSNPURPS_BIGCLSFCN, A.CNCLSNPURPS_MIDCLSFCN, A.CNCLSNPURPS_MIDCLSFCN_ETC, A.CNTRT_TRGT, A.CNTRT_TRGT_DET, A.PAYMENT_GBN, A.ANTCPTNEFCT, A.SECRET_KEEPPERIOD, A.CNTRT_UNTPRC, A.CNTRT_AMT, A.CRRNCY_UNIT, A.PAYMENT_COND, A.AUTO_RNEW_YN, A.EXPRT_NOTIDAY, A.OBLGT_LMT, A.SPCL_COND, A.CNCLSN_PLNDDAY, A.CNTRT_RESPMAN_ID, A.CNTRT_RESPMAN_NM, A.CNTRT_OPPNT_CD, A.SIGN_PLNDMAN_ID, A.SIGN_PLNDMAN_NM, A.SEAL_MTHD, A.CNTRT_CNCLSN_YN, A.SIGNMAN_ID, A.SIGNMAN_NM, A.OPPNT_SIGNMAN_NM, A.OPPNT_SIGNMAN_JIKGUP, A.OPPNT_SIGNMAN_DEPT, A.OPPNT_SIGNDAY, A.CNTRT_CNCLSNDAY, A.CPY_REGDAY, A.CNTRT_NO, A.LOAC, A.DSPT_RESOLT_MTHD, A.DSPT_RESOLT_MTHD_DET, A.ORG_ACPT_DLAY_CAUSE, A.ORG_ACPTDAY, A.ORG_TKOVMAN_ID, A.ORG_TKOVMAN_NM, A.ORG_HDOVMAN_ID, A.ORG_HDOVMAN_NM, A.ORG_STRG_POS, A.PRCS_DEPTH, A.DEPTH_STATUS, A.CNTRT_STATUS, A.LOAC_ETC, A.CNTRT_CHGE_DEMNDDAY, A.CNTRT_CHGE_DEMNDMAN_ID, A.CNTRT_CHGE_DEMNDMAN_NM, A.CNTRT_CHGE_DEMND_CAUSE, A.CNTRT_CHGE_PLNDDAY, A.CNTRT_CHGE_CONF_YN, A.CNTRT_CHGE_CONFDAY, A.CNTRT_CHGE_CONFMAN_ID, A.CNTRT_CHGE_CONFMAN_NM, A.BFHDCSTN_MTNMAN_ID, A.BFHDCSTN_MTNMAN_NM, A.BFHDCSTN_MTNMAN_JIKGUP_NM, A.BFHDCSTN_MTN_DEPT_NM, A.BFHDCSTN_MTNMAN_EMAIL, A.BFHDCSTN_APBT_MTHD, A.BFHDCSTN_APBTMAN_ID, A.BFHDCSTN_APBTMAN_NM, A.BFHDCSTN_APBTMAN_JIKGUP_NM, A.BFHDCSTN_APBT_DEPT_NM, A.SEAL_RQSTDAY, A.SEAL_RQSTMAN_ID, A.SEAL_RQSTMAN_NM, A.SEAL_FFMTMAN_ID, A.SEAL_FFMTMAN_NM, A.SEAL_FFMTDAY, A.CNTRT_UNTPRC_EXPL, A.ETC_MAIN_CONT, A.IF_SYS_CD, A.CNTRT_RESP_DEPT, A.CNTRT_RESP_DEPT_NM, A.CNTRT_RESP_UP_DEPT, A.CNTRT_RESPMAN_JIKGUP_NM, A.SIGN_PLND_DEPT_NM, A.SIGN_PLNDMAN_JIKGUP_NM, A.SEAL_RQST_DEPT_NM, A.SEAL_RQSTMAN_JIKGUP_NM, A.SEAL_FFMT_DEPT_NM, A.SEAL_FFMTMAN_JIKGUP_NM, A.SIGN_DEPT_NM, A.SIGNMAN_JIKGUP_NM, A.SIGNDAY, A.ORG_TKOV_DEPT_NM, A.ORG_TKOVMAN_JIKGUP_NM, A.ORG_HDOV_DEPT_NM, A.ORG_HDOVMAN_JIKGUP_NM, A.CNTRT_CHGE_DEMND_DEPT_NM, A.PSHDBKGRND_PURPS, A.CNTRT_CHGE_DEMNDMAN_JIKGUP_NM, A.CNTRT_CHGE_CONF_DEPT_NM, A.CNTRT_CHGE_CONFMAN_JIKGUP_NM, A.REG_OPERDIV, A.CPY_REGMAN_ID, A.CPY_REGMAN_NM, A.CPY_REGMAN_JIKGUP_NM, A.CPY_REG_DEPT_NM, A.FST_CNTRT_RESP_DEPT, A.FST_CNTRT_RESP_UP_DEPT, A.REG_INTNL_DEPT_CD, A.CNTRT_CHGE_CONF_CONT
		              , SYS_NM
		              , REQ_REG_ID 
		              , CASE WHEN :vo.session_user_locale = 'ko' THEN
		              	  CASE WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN '검토의뢰' 
		              		WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN '검토회신'
		              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN '재검토의뢰'
		              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN '재검토회신' 
		              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN '최종본의뢰'
		              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN '최종본회신'
		              		ELSE '해당없음'
		              	  END
		              	WHEN :vo.session_user_locale = 'fr' THEN
		              	  CASE WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Demande de revue' 
		              		WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Répondre en envoyant la revue'
		              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Réitération de la demande de revue'
		              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN '2ème réponse concernant la revue' 
		              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Demander la version finale'
		              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Répondre à la version finale'
		              		ELSE 'Non applicable'
		              	  END
		              	WHEN :vo.session_user_locale = 'de' THEN
		              	  CASE WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Antrag prüfen' 
		              		WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Antwort mit Prüfung'
		              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Wiederholter Prüfantrag'
		              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN '2. Prüfantwort' 
		              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Endgültige Version anfordern'
		              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Antwort auf endgültige Version'
		              		ELSE 'Nicht anwendbar'
		              	  END
		              	ELSE 
		              	  CASE WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Review Request' 
		              		WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Reply with Review'
		              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Request Re-review'
		              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Re-review Reply' 
		              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Request Final Version'
		              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Reply to Final Version'
		              		ELSE 'Nonapplicable'
		              	  END
		              	END NAVI_TITLE	         
		              ,CASE WHEN :vo.session_user_locale = 'ko' THEN B.CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN B.CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN B.CD_NM_DEU
			              			ELSE B.CD_NM_ENG
			              		END DEPTH_STATUS_NM
		              ,A.CNSD_LEVEL
		              ,CASE WHEN :vo.session_user_locale = 'ko' THEN
		              		/* DECODE(A.CNCLSNPURPS_BIGCLSFCN, 'T0302', '', DECODE(A.MN_CNSD_DEPT,'A00000001', '국내법무','A00000002','해외법무')) */
		               		CASE A.CNCLSNPURPS_BIGCLSFCN
		               		  WHEN 'T0302' THEN ''
		               		  ELSE
		               		    CASE A.MN_CNSD_DEPT
		               		      WHEN 'A00000001' THEN '국내법무'
		               		      WHEN 'A00000002' THEN '해외법무'
		               		    ELSE ''
		               		    END
		                    END 
		               ELSE
		               		/* DECODE(A.CNCLSNPURPS_BIGCLSFCN, 'T0302', '', DECODE(A.MN_CNSD_DEPT,'A00000001', 'Corporate Legal Team','A00000002','Global Legal Affairs Team'))*/
		              		CASE A.CNCLSNPURPS_BIGCLSFCN
		              		  WHEN 'T0302' THEN ''
		              		  ELSE
		              		    CASE A.MN_CNSD_DEPT
		              		      WHEN 'A00000001' THEN 'Corporate Legal Team'
		              		      WHEN 'A00000002' THEN 'Global Legal Affairs Team'
		              		    ELSE ''
		              		    END
		              		  END 
		               END AS MN_CNSD_DEPT_NM
		              ,A.CNSLT_NO
		              ,(SELECT MAX(X.HSTRY_NO) FROM TN_LAS_CONSULT X WHERE X.CNSLT_NO = A.CNSLT_NO) HSTRY_NO
		              ,(SELECT X.CNSD_STATUS FROM TN_CLM_CONTRACT_DEPTCNSD X WHERE X.CNSDREQ_ID = A.CNSDREQ_ID) AS DEPT_CNSD_STATUS
		              ,A.CONT_DRAFT
					  ,A.TOP_30_CUS 
					  ,A.RELATED_PRODUCTS
					  ,A.CNCLSNP_MID AS CNCLSNP_MID
					  ,A.CLOSE_YN
				FROM 
				    (SELECT AA.REG_ID AS REQ_REG_ID,
                            AA.CNSDREQ_ID,
                            B.DEPTH_STATUS,
                            B.BIZ_CLSFCN,
                            B.DEPTH_CLSFCN,
                            B.CNCLSNPURPS_BIGCLSFCN,
                            B.CNCLSNPURPS_MIDCLSFCN,
                            B.CNTRT_TRGT,
                            B.BFHDCSTN_APBT_MTHD,
                            B.CNTRT_OPPNT_TYPE,
                            B.CNTRT_OPPNT_NM,
                            B.CNTRT_OPPNT_RPRSNTMAN,
                            B.CNTRT_OPPNT_RESPMAN,
                            B.CNTRT_OPPNT_TELNO,
                            AA.RE_DEMNDDAY,
                            AA.REQ_DT,
                            B.CNTRTPERIOD_STARTDAY,
                            B.CNTRTPERIOD_ENDDAY,
                            B.BFHDCSTN_APBTDAY,
                            AA.MN_CNSD_DEPT,
                            AA.MN_RESPMAN_APNT_YN,
                            AA.VC_CNSD_DEPT,
                            AA.VC_CNSD_DEMND_DT,
                            AA.VC_CNSD_DEMND_CONT,
                            AA.VC_RESPMAN_APNT_YN,
                            AA.DMSTFRGN_GBN,
                            AA.DRAFT_DEMND_YN,
                            AA.PLNDBN_REQ_YN,
                            AA.LAST_CNSD_YN,
                            AA.PREV_CNSDREQ_ID,
                            AA.REQ_TITLE,
                            AA.REQMAN_ID,
                            AA.REQMAN_NM,
                            AA.REQ_DEPT,
                            AA.REQ_DEPT_NM,
                            AA.LASTBN_CHGE_YN,
                            AA.CNSD_DEMND_CONT,
                            AA.PRGRS_STATUS,
                            AA.REBFR_APPRVL_YN,
                            AA.RE_DT,
                            AA.PUB_YN,
                            AA.REQ_OPERDIV,
                            AA.REQ_UP_DEPT,
                            AA.REQMAN_JIKGUP_NM,
                            AA.ACPT_DT,
                            AA.PLNDBN_CHGE_CONT,
                            AA.CNSD_HOLD_CAUSE,
                            AA.FST_REQ_DEPT,
                            AA.FST_REQ_UP_DEPT,
                            AA.REQ_INTNL_DEPT_CD,
                            B.CNTRT_ID,
                            B.CNTRT_NM,
                            B.REGION_GBN,
                            B.CNTRT_TRGT_DET,
                            B.PAYMENT_GBN,
                            B.ANTCPTNEFCT,
                            B.SECRET_KEEPPERIOD,
                            B.CNTRT_UNTPRC,
                            B.CNTRT_AMT,
                            B.CRRNCY_UNIT,
                            B.PAYMENT_COND,
                            B.AUTO_RNEW_YN,
                            B.EXPRT_NOTIDAY,
                            B.OBLGT_LMT,
                            B.SPCL_COND,
                            B.CNCLSN_PLNDDAY,
                            B.CNTRT_RESPMAN_ID,
                            B.CNTRT_RESPMAN_NM,
                            B.CNTRT_OPPNT_CD,
                            B.SIGN_PLNDMAN_ID,
                            B.SIGN_PLNDMAN_NM,
                            B.SEAL_MTHD,
                            B.CNTRT_CNCLSN_YN,
                            B.SIGNMAN_ID,
                            B.SIGNMAN_NM,
                            B.OPPNT_SIGNMAN_NM,
                            B.OPPNT_SIGNMAN_JIKGUP,
                            B.OPPNT_SIGNMAN_DEPT,
                            B.OPPNT_SIGNDAY,
                            B.CNTRT_CNCLSNDAY,
                            B.CPY_REGDAY,
                            B.CNTRT_NO,
                            B.LOAC,
                            B.DSPT_RESOLT_MTHD,
                            B.DSPT_RESOLT_MTHD_DET,
                            B.ORG_ACPT_DLAY_CAUSE,
                            B.ORG_ACPTDAY,
                            B.ORG_TKOVMAN_ID,
                            B.ORG_TKOVMAN_NM,
                            B.ORG_HDOVMAN_ID,
                            B.ORG_HDOVMAN_NM,
                            B.ORG_STRG_POS,
                            B.PRCS_DEPTH,
                            B.CNTRT_STATUS,
                            B.LOAC_ETC,
                            B.CNTRT_CHGE_DEMNDDAY,
                            B.CNTRT_CHGE_DEMNDMAN_ID,
                            B.CNTRT_CHGE_DEMNDMAN_NM,
                            B.CNTRT_CHGE_DEMND_CAUSE,
                            B.CNTRT_CHGE_PLNDDAY,
                            B.CNTRT_CHGE_CONF_YN,
                            B.CNTRT_CHGE_CONFDAY,
                            B.CNTRT_CHGE_CONFMAN_ID,
                            B.CNTRT_CHGE_CONFMAN_NM,
                            B.BFHDCSTN_MTNMAN_ID,
                            B.BFHDCSTN_MTNMAN_NM,
                            B.BFHDCSTN_MTNMAN_JIKGUP_NM,
                            B.BFHDCSTN_MTN_DEPT_NM,
                            B.BFHDCSTN_MTNMAN_EMAIL,
                            B.BFHDCSTN_APBTMAN_ID,
                            B.BFHDCSTN_APBTMAN_NM,
                            B.BFHDCSTN_APBTMAN_JIKGUP_NM,
                            B.BFHDCSTN_APBT_DEPT_NM,
                            B.SEAL_RQSTDAY,
                            B.SEAL_RQSTMAN_ID,
                            B.SEAL_RQSTMAN_NM,
                            B.SEAL_FFMTMAN_ID,
                            B.SEAL_FFMTMAN_NM,
                            B.SEAL_FFMTDAY,
                            B.CNTRT_UNTPRC_EXPL,
                            B.ETC_MAIN_CONT,
                            B.IF_SYS_CD,
                            B.CNTRT_RESP_DEPT,
                            B.CNTRT_RESP_DEPT_NM,
                            B.CNTRT_RESP_UP_DEPT,
                            B.CNTRT_RESPMAN_JIKGUP_NM,
                            B.SIGN_PLND_DEPT_NM,
                            B.SIGN_PLNDMAN_JIKGUP_NM,
                            B.SEAL_RQST_DEPT_NM,
                            B.SEAL_RQSTMAN_JIKGUP_NM,
                            B.SEAL_FFMT_DEPT_NM,
                            B.SEAL_FFMTMAN_JIKGUP_NM,
                            B.SIGN_DEPT_NM,
                            B.SIGNMAN_JIKGUP_NM,
                            B.SIGNDAY,
                            B.ORG_TKOV_DEPT_NM,
                            B.ORG_TKOVMAN_JIKGUP_NM,
                            B.ORG_HDOV_DEPT_NM,
                            B.ORG_HDOVMAN_JIKGUP_NM,
                            B.CNTRT_CHGE_DEMND_DEPT_NM,
                            B.PSHDBKGRND_PURPS,
                            B.CNTRT_CHGE_DEMNDMAN_JIKGUP_NM,
                            B.CNTRT_CHGE_CONF_DEPT_NM,
                            B.CNTRT_CHGE_CONFMAN_JIKGUP_NM,
                            B.REG_OPERDIV,
                            B.CPY_REGMAN_ID,
                            B.CPY_REGMAN_NM,
                            B.CPY_REGMAN_JIKGUP_NM,
                            B.CPY_REG_DEPT_NM,
                            B.FST_CNTRT_RESP_DEPT,
                            B.FST_CNTRT_RESP_UP_DEPT,
                            B.REG_INTNL_DEPT_CD,
                            B.CNTRT_CHGE_CONF_CONT,
                            B.SYS_NM,
                            C.CNSD_STATUS,
			                B.CNTRT_OPPNT_EMAIL,
			                AA.CNSD_LEVEL,
			                B.CNSLT_NO,
			                B.CNCLSNPURPS_MIDCLSFCN_ETC,
			                B.CLOSE_YN
			                , (select cd from tb_com_cd where sys_cd ='LAS' and grp_cd ='SOC01' and cd=B.CONT_DRAFT) as CONT_DRAFT 
              		 		, (select cd from tb_com_cd where sys_cd ='LAS' and grp_cd ='C056' and cd=B.TOP_30_CUS ) as TOP_30_CUS 
              		 		, (select cd from tb_com_cd where sys_cd ='LAS' and grp_cd ='RP01' and cd=B.RELATED_PRODUCTS ) as RELATED_PRODUCTS
              		 		,B.CNCLSNPURPS_MIDCLSFCN AS CNCLSNP_MID
				    FROM TN_CLM_CONT_CNSDREQ AA
				        ,TN_CLM_CONTRACT_CNSD C
				        ,TN_CLM_CONTRACT_MASTER B
				    WHERE 1=1 
				    AND B.PRCS_DEPTH = 'C02501'
				    AND AA.CNSDREQ_ID =  :vo.cnsdreq_id 
				    AND AA.DEL_YN = 'N'
				    AND AA.CNSDREQ_ID = C.CNSDREQ_ID
				    AND B.CNTRT_ID = C.CNTRT_ID
				    AND B.DEL_YN = 'N'
				    )A,
				    TB_COM_CD B
				WHERE B.SYS_CD = 'LAS'
				  AND B.CD = A.DEPTH_STATUS
				ORDER BY A.CNTRT_ID ASC
		    ]]>
		  </statement>
		</query>
		
		<!-- 계약 상대방 정보 AS - prcs_depth 를 변수로 받는다-->
		<query id="clm.manage.detailConsideration2" isCamelCase="false"  comment="검토의뢰 보기 ">
		  <statement>
		    <![CDATA[
			    SELECT ROW_NUMBER () OVER (ORDER BY A.CNSDREQ_ID) AS RN
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.BIZ_CLSFCN ) AS BIZ_CLSFCN_NM
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.DEPTH_CLSFCN ) AS DEPTH_CLSFCN_NM
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNCLSNPURPS_BIGCLSFCN ) AS CNCLSNPURPS_BIGCLSFCN_NM
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNCLSNPURPS_MIDCLSFCN ) AS CNCLSNPURPS_MIDCLSFCN_NM
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNTRT_TRGT ) AS CNTRT_TRGT_NM      
				      
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.PAYMENT_GBN ) AS PAYMENT_GBN_NM 
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.BFHDCSTN_APBT_MTHD ) AS BFHDCSTN_APBT_MTHD_NM 
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.CNTRT_OPPNT_TYPE)  AS CNTRT_OPPNT_KIND
				      ,A.CNTRT_OPPNT_TYPE
				      ,A.CNTRT_OPPNT_NM				      
				      ,A.CNTRT_OPPNT_RPRSNTMAN
				      ,A.CNTRT_OPPNT_RESPMAN
				      ,A.CNTRT_OPPNT_TELNO
				      ,A.CNTRT_OPPNT_EMAIL				      
              /* ,TO_CHAR(TO_DATE(A.RE_DEMNDDAY,'YYYYMMDD'),'YYYY-MM-DD') AS RE_DEMNDDAY */
              ,  CONVERT(VARCHAR, CONVERT(DATE, A.RE_DEMNDDAY, 23)) AS RE_DEMNDDAY
              /* ,TO_CHAR(A.REQ_DT,'YYYY-MM-DD') AS REQ_DT */
              , CONVERT(VARCHAR, CONVERT(DATE, A.REQ_DT, 23)) AS REQ_DT
              /* ,TO_CHAR(TO_DATE(A.CNTRTPERIOD_STARTDAY,'YYYYMMDD'),'YYYY-MM-DD') AS CNTRTPERIOD_STARTDAY */
              , CONVERT(VARCHAR, CONVERT(DATE, A.CNTRTPERIOD_STARTDAY, 23)) AS CNTRTPERIOD_STARTDAY
              /* ,TO_CHAR(TO_DATE(A.CNTRTPERIOD_ENDDAY,'YYYYMMDD'),'YYYY-MM-DD') AS CNTRTPERIOD_ENDDAY */
              , CONVERT(VARCHAR, CONVERT(DATE, A.CNTRTPERIOD_ENDDAY, 23)) AS CNTRTPERIOD_ENDDAY
              /* ,TO_CHAR(TO_DATE(A.BFHDCSTN_APBTDAY,'YYYYMMDD'),'YYYY-MM-DD') AS BFHDCSTN_APBTDAY */
              , ISNULL(CONVERT(VARCHAR, CONVERT(DATE, A.BFHDCSTN_APBTDAY, 23)),'') AS BFHDCSTN_APBTDAY
              ,CASE WHEN :vo.session_user_locale = 'ko' THEN
              		CASE WHEN depth_status= 'C02603' THEN 'DROP계약' + CONVERT(NVARCHAR, ROW_NUMBER () OVER (ORDER BY A.CNSDREQ_ID)) ELSE '계약' + CONVERT(NVARCHAR, ROW_NUMBER () OVER (ORDER BY A.CNSDREQ_ID)) END
              	WHEN :vo.session_user_locale = 'fr' THEN
              		CASE WHEN depth_status= 'C02603' THEN 'ABANDONNER le contrat' + CONVERT(NVARCHAR, ROW_NUMBER () OVER (ORDER BY A.CNSDREQ_ID)) ELSE 'Contrats' + CONVERT(NVARCHAR, ROW_NUMBER () OVER (ORDER BY A.CNSDREQ_ID)) END
              	WHEN :vo.session_user_locale = 'de' THEN
              		CASE WHEN depth_status= 'C02603' THEN 'Vertrag ablegen' + CONVERT(NVARCHAR, ROW_NUMBER () OVER (ORDER BY A.CNSDREQ_ID)) ELSE 'Vertrag' + CONVERT(NVARCHAR, ROW_NUMBER () OVER (ORDER BY A.CNSDREQ_ID)) END
               ELSE
               		CASE WHEN depth_status= 'C02603' THEN 'DROP Contract' + CONVERT(NVARCHAR, ROW_NUMBER () OVER (ORDER BY A.CNSDREQ_ID)) ELSE 'Contract' + CONVERT(NVARCHAR, ROW_NUMBER () OVER (ORDER BY A.CNSDREQ_ID)) END
               END AS TAB_NM
              ,A.CNSD_STATUS
              ,A.CNSDREQ_ID, A.MN_CNSD_DEPT, A.MN_RESPMAN_APNT_YN, A.VC_CNSD_DEPT, A.VC_CNSD_DEMND_DT, A.VC_CNSD_DEMND_CONT, A.VC_RESPMAN_APNT_YN, A.DMSTFRGN_GBN, A.DRAFT_DEMND_YN, A.PLNDBN_REQ_YN, A.LAST_CNSD_YN, A.PREV_CNSDREQ_ID, A.REQ_TITLE, A.REQMAN_ID, A.REQMAN_NM, A.REQ_DEPT, A.REQ_DEPT_NM
              ,  A.LASTBN_CHGE_YN
              /* , DECODE(A.LASTBN_CHGE_YN,'Y','YES','N','NO') LASTBN_CHGE_YN_NM */
              , CASE A.LASTBN_CHGE_YN
                  WHEN 'Y' THEN 'YES'
                ELSE 
                  'NO'
                END AS LASTBN_CHGE_YN_NM
              , A.CNSD_DEMND_CONT, A.PRGRS_STATUS, A.REBFR_APPRVL_YN, A.RE_DT, A.PUB_YN, A.REQ_OPERDIV, A.REQ_UP_DEPT, A.REQMAN_JIKGUP_NM, A.ACPT_DT, A.PLNDBN_CHGE_CONT, A.CNSD_HOLD_CAUSE, A.FST_REQ_DEPT, A.FST_REQ_UP_DEPT, A.REQ_INTNL_DEPT_CD, A.CNTRT_ID, A.CNTRT_NM, A.REGION_GBN, A.BIZ_CLSFCN, A.DEPTH_CLSFCN, A.CNCLSNPURPS_BIGCLSFCN, A.CNCLSNPURPS_MIDCLSFCN, A.CNCLSNPURPS_MIDCLSFCN_ETC, A.CNTRT_TRGT, A.CNTRT_TRGT_DET, A.PAYMENT_GBN, A.ANTCPTNEFCT, A.SECRET_KEEPPERIOD, A.CNTRT_UNTPRC, A.CNTRT_AMT, A.CRRNCY_UNIT, A.PAYMENT_COND, A.AUTO_RNEW_YN, A.EXPRT_NOTIDAY, A.OBLGT_LMT, A.SPCL_COND, A.CNCLSN_PLNDDAY, A.CNTRT_RESPMAN_ID, A.CNTRT_RESPMAN_NM, A.CNTRT_OPPNT_CD, A.SIGN_PLNDMAN_ID, A.SIGN_PLNDMAN_NM, A.SEAL_MTHD, A.CNTRT_CNCLSN_YN, A.SIGNMAN_ID, A.SIGNMAN_NM, A.OPPNT_SIGNMAN_NM, A.OPPNT_SIGNMAN_JIKGUP, A.OPPNT_SIGNMAN_DEPT, A.OPPNT_SIGNDAY, A.CNTRT_CNCLSNDAY, A.CPY_REGDAY, A.CNTRT_NO, A.LOAC, A.DSPT_RESOLT_MTHD, A.DSPT_RESOLT_MTHD_DET, A.ORG_ACPT_DLAY_CAUSE, A.ORG_ACPTDAY, A.ORG_TKOVMAN_ID, A.ORG_TKOVMAN_NM, A.ORG_HDOVMAN_ID, A.ORG_HDOVMAN_NM, A.ORG_STRG_POS, A.PRCS_DEPTH, A.DEPTH_STATUS, A.CNTRT_STATUS, A.LOAC_ETC, A.CNTRT_CHGE_DEMNDDAY, A.CNTRT_CHGE_DEMNDMAN_ID, A.CNTRT_CHGE_DEMNDMAN_NM, A.CNTRT_CHGE_DEMND_CAUSE, A.CNTRT_CHGE_PLNDDAY, A.CNTRT_CHGE_CONF_YN, A.CNTRT_CHGE_CONFDAY, A.CNTRT_CHGE_CONFMAN_ID, A.CNTRT_CHGE_CONFMAN_NM, A.BFHDCSTN_MTNMAN_ID, A.BFHDCSTN_MTNMAN_NM, A.BFHDCSTN_MTNMAN_JIKGUP_NM, A.BFHDCSTN_MTN_DEPT_NM, A.BFHDCSTN_MTNMAN_EMAIL, A.BFHDCSTN_APBT_MTHD, A.BFHDCSTN_APBTMAN_ID, A.BFHDCSTN_APBTMAN_NM, A.BFHDCSTN_APBTMAN_JIKGUP_NM, A.BFHDCSTN_APBT_DEPT_NM, A.SEAL_RQSTDAY, A.SEAL_RQSTMAN_ID, A.SEAL_RQSTMAN_NM, A.SEAL_FFMTMAN_ID, A.SEAL_FFMTMAN_NM, A.SEAL_FFMTDAY, A.CNTRT_UNTPRC_EXPL, A.ETC_MAIN_CONT, A.IF_SYS_CD, A.CNTRT_RESP_DEPT, A.CNTRT_RESP_DEPT_NM, A.CNTRT_RESP_UP_DEPT, A.CNTRT_RESPMAN_JIKGUP_NM, A.SIGN_PLND_DEPT_NM, A.SIGN_PLNDMAN_JIKGUP_NM, A.SEAL_RQST_DEPT_NM, A.SEAL_RQSTMAN_JIKGUP_NM, A.SEAL_FFMT_DEPT_NM, A.SEAL_FFMTMAN_JIKGUP_NM, A.SIGN_DEPT_NM, A.SIGNMAN_JIKGUP_NM, A.SIGNDAY, A.ORG_TKOV_DEPT_NM, A.ORG_TKOVMAN_JIKGUP_NM, A.ORG_HDOV_DEPT_NM, A.ORG_HDOVMAN_JIKGUP_NM, A.CNTRT_CHGE_DEMND_DEPT_NM, A.PSHDBKGRND_PURPS, A.CNTRT_CHGE_DEMNDMAN_JIKGUP_NM, A.CNTRT_CHGE_CONF_DEPT_NM, A.CNTRT_CHGE_CONFMAN_JIKGUP_NM, A.REG_OPERDIV, A.CPY_REGMAN_ID, A.CPY_REGMAN_NM, A.CPY_REGMAN_JIKGUP_NM, A.CPY_REG_DEPT_NM, A.FST_CNTRT_RESP_DEPT, A.FST_CNTRT_RESP_UP_DEPT, A.REG_INTNL_DEPT_CD, A.CNTRT_CHGE_CONF_CONT
              , SYS_NM
              , REQ_REG_ID 
              , CASE WHEN :vo.session_user_locale = 'ko' THEN
              	  CASE WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN '검토의뢰' 
              		WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN '검토회신'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN '재검토의뢰'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN '재검토회신' 
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN '최종본의뢰'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN '최종본회신'
              		ELSE '해당없음'
              	  END 
              	WHEN :vo.session_user_locale = 'fr' THEN
              	  CASE WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Demande de revue' 
              		WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Répondre en envoyant la revue'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Réitération de la demande de revue'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN '2ème réponse concernant la revue' 
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Demander la version finale'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Répondre à la version finale'
              		ELSE 'Non applicable'
              	  END
              	WHEN :vo.session_user_locale = 'de' THEN
              	  CASE WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Antrag prüfen' 
              		WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Antwort mit Prüfung'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Wiederholter Prüfantrag'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN '2. Prüfantwort' 
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Endgültige Version anfordern'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Antwort auf endgültige Version'
              		ELSE 'Nicht anwendbar'
              	  END  
              	ELSE
              	  CASE WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Review Request' 
              		WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Reply with Review'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Request Re-review'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Re-review Reply' 
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Request Final Version'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Reply to Final Version'
              		ELSE 'Nonapplicable'
              	  END
              	END NAVI_TITLE	         
              ,CASE WHEN :vo.session_user_locale = 'ko' THEN B.CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN B.CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN B.CD_NM_DEU
			              			ELSE B.CD_NM_ENG
			              		END DEPTH_STATUS_NM
				FROM 
				    (SELECT AA.REG_ID AS REQ_REG_ID,
                            AA.CNSDREQ_ID,
                            B.DEPTH_STATUS,
                            B.BIZ_CLSFCN,
                            B.DEPTH_CLSFCN,
                            B.CNCLSNPURPS_BIGCLSFCN,
                            B.CNCLSNPURPS_MIDCLSFCN,
                            B.CNTRT_TRGT,
                            B.BFHDCSTN_APBT_MTHD,
                            B.CNTRT_OPPNT_TYPE,
                            B.CNTRT_OPPNT_NM,
                            B.CNTRT_OPPNT_RPRSNTMAN,
                            B.CNTRT_OPPNT_RESPMAN,
                            B.CNTRT_OPPNT_TELNO,
                            AA.RE_DEMNDDAY,
                            AA.REQ_DT,
                            B.CNTRTPERIOD_STARTDAY,
                            B.CNTRTPERIOD_ENDDAY,
                            B.BFHDCSTN_APBTDAY,
                            AA.MN_CNSD_DEPT,
                            AA.MN_RESPMAN_APNT_YN,
                            AA.VC_CNSD_DEPT,
                            AA.VC_CNSD_DEMND_DT,
                            AA.VC_CNSD_DEMND_CONT,
                            AA.VC_RESPMAN_APNT_YN,
                            AA.DMSTFRGN_GBN,
                            AA.DRAFT_DEMND_YN,
                            AA.PLNDBN_REQ_YN,
                            AA.LAST_CNSD_YN,
                            AA.PREV_CNSDREQ_ID,
                            AA.REQ_TITLE,
                            AA.REQMAN_ID,
                            AA.REQMAN_NM,
                            AA.REQ_DEPT,
                            AA.REQ_DEPT_NM,
                            AA.LASTBN_CHGE_YN,
                            AA.CNSD_DEMND_CONT,
                            AA.PRGRS_STATUS,
                            AA.REBFR_APPRVL_YN,
                            AA.RE_DT,
                            AA.PUB_YN,
                            AA.REQ_OPERDIV,
                            AA.REQ_UP_DEPT,
                            AA.REQMAN_JIKGUP_NM,
                            AA.ACPT_DT,
                            AA.PLNDBN_CHGE_CONT,
                            AA.CNSD_HOLD_CAUSE,
                            AA.FST_REQ_DEPT,
                            AA.FST_REQ_UP_DEPT,
                            AA.REQ_INTNL_DEPT_CD,
                            B.CNTRT_ID,
                            B.CNTRT_NM,
                            B.REGION_GBN,
                            B.CNTRT_TRGT_DET,
                            B.PAYMENT_GBN,
                            B.ANTCPTNEFCT,
                            B.SECRET_KEEPPERIOD,
                            B.CNTRT_UNTPRC,
                            B.CNTRT_AMT,
                            B.CRRNCY_UNIT,
                            B.PAYMENT_COND,
                            B.AUTO_RNEW_YN,
                            B.EXPRT_NOTIDAY,
                            B.OBLGT_LMT,
                            B.SPCL_COND,
                            B.CNCLSN_PLNDDAY,
                            B.CNTRT_RESPMAN_ID,
                            B.CNTRT_RESPMAN_NM,
                            B.CNTRT_OPPNT_CD,
                            B.SIGN_PLNDMAN_ID,
                            B.SIGN_PLNDMAN_NM,
                            B.SEAL_MTHD,
                            B.CNTRT_CNCLSN_YN,
                            B.SIGNMAN_ID,
                            B.SIGNMAN_NM,
                            B.OPPNT_SIGNMAN_NM,
                            B.OPPNT_SIGNMAN_JIKGUP,
                            B.OPPNT_SIGNMAN_DEPT,
                            B.OPPNT_SIGNDAY,
                            B.CNTRT_CNCLSNDAY,
                            B.CPY_REGDAY,
                            B.CNTRT_NO,
                            B.LOAC,
                            B.DSPT_RESOLT_MTHD,
                            B.DSPT_RESOLT_MTHD_DET,
                            B.ORG_ACPT_DLAY_CAUSE,
                            B.ORG_ACPTDAY,
                            B.ORG_TKOVMAN_ID,
                            B.ORG_TKOVMAN_NM,
                            B.ORG_HDOVMAN_ID,
                            B.ORG_HDOVMAN_NM,
                            B.ORG_STRG_POS,
                            B.PRCS_DEPTH,
                            B.CNTRT_STATUS,
                            B.LOAC_ETC,
                            B.CNTRT_CHGE_DEMNDDAY,
                            B.CNTRT_CHGE_DEMNDMAN_ID,
                            B.CNTRT_CHGE_DEMNDMAN_NM,
                            B.CNTRT_CHGE_DEMND_CAUSE,
                            B.CNTRT_CHGE_PLNDDAY,
                            B.CNTRT_CHGE_CONF_YN,
                            B.CNTRT_CHGE_CONFDAY,
                            B.CNTRT_CHGE_CONFMAN_ID,
                            B.CNTRT_CHGE_CONFMAN_NM,
                            B.BFHDCSTN_MTNMAN_ID,
                            B.BFHDCSTN_MTNMAN_NM,
                            B.BFHDCSTN_MTNMAN_JIKGUP_NM,
                            B.BFHDCSTN_MTN_DEPT_NM,
                            B.BFHDCSTN_MTNMAN_EMAIL,
                            B.BFHDCSTN_APBTMAN_ID,
                            B.BFHDCSTN_APBTMAN_NM,
                            B.BFHDCSTN_APBTMAN_JIKGUP_NM,
                            B.BFHDCSTN_APBT_DEPT_NM,
                            B.SEAL_RQSTDAY,
                            B.SEAL_RQSTMAN_ID,
                            B.SEAL_RQSTMAN_NM,
                            B.SEAL_FFMTMAN_ID,
                            B.SEAL_FFMTMAN_NM,
                            B.SEAL_FFMTDAY,
                            B.CNTRT_UNTPRC_EXPL,
                            B.ETC_MAIN_CONT,
                            B.IF_SYS_CD,
                            B.CNTRT_RESP_DEPT,
                            B.CNTRT_RESP_DEPT_NM,
                            B.CNTRT_RESP_UP_DEPT,
                            B.CNTRT_RESPMAN_JIKGUP_NM,
                            B.SIGN_PLND_DEPT_NM,
                            B.SIGN_PLNDMAN_JIKGUP_NM,
                            B.SEAL_RQST_DEPT_NM,
                            B.SEAL_RQSTMAN_JIKGUP_NM,
                            B.SEAL_FFMT_DEPT_NM,
                            B.SEAL_FFMTMAN_JIKGUP_NM,
                            B.SIGN_DEPT_NM,
                            B.SIGNMAN_JIKGUP_NM,
                            B.SIGNDAY,
                            B.ORG_TKOV_DEPT_NM,
                            B.ORG_TKOVMAN_JIKGUP_NM,
                            B.ORG_HDOV_DEPT_NM,
                            B.ORG_HDOVMAN_JIKGUP_NM,
                            B.CNTRT_CHGE_DEMND_DEPT_NM,
                            B.PSHDBKGRND_PURPS,
                            B.CNTRT_CHGE_DEMNDMAN_JIKGUP_NM,
                            B.CNTRT_CHGE_CONF_DEPT_NM,
                            B.CNTRT_CHGE_CONFMAN_JIKGUP_NM,
                            B.REG_OPERDIV,
                            B.CPY_REGMAN_ID,
                            B.CPY_REGMAN_NM,
                            B.CPY_REGMAN_JIKGUP_NM,
                            B.CPY_REG_DEPT_NM,
                            B.FST_CNTRT_RESP_DEPT,
                            B.FST_CNTRT_RESP_UP_DEPT,
                            B.REG_INTNL_DEPT_CD,
                            B.CNTRT_CHGE_CONF_CONT,
                            B.SYS_NM,
                            C.CNSD_STATUS,
			                B.CNTRT_OPPNT_EMAIL,
			                AA.CNSD_LEVEL,
			                B.CNSLT_NO,
			                B.CNCLSNPURPS_MIDCLSFCN_ETC    
				    FROM TN_CLM_CONT_CNSDREQ AA
				        ,TN_CLM_CONTRACT_CNSD C
				        ,TN_CLM_CONTRACT_MASTER B
				    WHERE 1=1 
				    AND B.PRCS_DEPTH = :vo.prcs_depth
				    AND AA.CNSDREQ_ID =  :vo.cnsdreq_id 
				    AND AA.DEL_YN = 'N'
				    AND AA.CNSDREQ_ID = C.CNSDREQ_ID
				    AND B.CNTRT_ID = C.CNTRT_ID
				    AND B.DEL_YN = 'N'
				    )A,
				    TB_COM_CD B
				WHERE B.SYS_CD = 'LAS'
				AND B.CD = A.DEPTH_STATUS
				ORDER BY A.CNTRT_ID ASC
		    ]]>
		  </statement>
		</query>		
		
		<!-- 게약 상세 보기 (체결 후 등록) -->
		<query id="clm.manage.detailConsiderationReg" isCamelCase="false"  comment="검토의뢰 보기 ">
		  <statement>
		    <![CDATA[
			    SELECT ROW_NUMBER () OVER (ORDER BY A.CNSDREQ_ID) AS RN
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.BIZ_CLSFCN ) AS BIZ_CLSFCN_NM
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.DEPTH_CLSFCN ) AS DEPTH_CLSFCN_NM
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNCLSNPURPS_BIGCLSFCN ) AS CNCLSNPURPS_BIGCLSFCN_NM
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNCLSNPURPS_MIDCLSFCN ) AS CNCLSNPURPS_MIDCLSFCN_NM
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNTRT_TRGT ) AS CNTRT_TRGT_NM      
				      
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.PAYMENT_GBN ) AS PAYMENT_GBN_NM 
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.BFHDCSTN_APBT_MTHD ) AS BFHDCSTN_APBT_MTHD_NM 
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.CNTRT_OPPNT_TYPE)  AS CNTRT_OPPNT_KIND
				      ,A.CNTRT_OPPNT_TYPE
				      ,A.CNTRT_OPPNT_NM				      
				      ,A.CNTRT_OPPNT_RPRSNTMAN
				      ,A.CNTRT_OPPNT_RESPMAN
				      ,A.CNTRT_OPPNT_TELNO
				      ,A.CNTRT_OPPNT_EMAIL				      
              /* ,TO_CHAR(TO_DATE(A.RE_DEMNDDAY,'YYYYMMDD'),'YYYY-MM-DD') AS RE_DEMNDDAY */
              , CONVERT(VARCHAR, CONVERT(DATE, A.RE_DEMNDDAY, 23)) AS RE_DEMNDDAY
              /* ,TO_CHAR(A.REQ_DT,'YYYY-MM-DD') AS REQ_DT */
              , CONVERT(VARCHAR, CONVERT(DATE, A.REQ_DT, 23)) AS REQ_DT
              /* ,TO_CHAR(TO_DATE(A.CNTRTPERIOD_STARTDAY,'YYYYMMDD'),'YYYY-MM-DD') AS CNTRTPERIOD_STARTDAY */
              , CONVERT(VARCHAR, CONVERT(DATE, A.CNTRTPERIOD_STARTDAY, 23)) AS CNTRTPERIOD_STARTDAY
              /* ,TO_CHAR(TO_DATE(A.CNTRTPERIOD_ENDDAY,'YYYYMMDD'),'YYYY-MM-DD') AS CNTRTPERIOD_ENDDAY */
              , CONVERT(VARCHAR, CONVERT(DATE, A.CNTRTPERIOD_ENDDAY, 23)) AS CNTRTPERIOD_ENDDAY
              /* ,TO_CHAR(TO_DATE(A.BFHDCSTN_APBTDAY,'YYYYMMDD'),'YYYY-MM-DD') AS BFHDCSTN_APBTDAY */
              , ISNULL(CONVERT(VARCHAR, CONVERT(DATE, A.BFHDCSTN_APBTDAY, 23)),'') AS BFHDCSTN_APBTDAY
              ,CASE WHEN :vo.session_user_locale = 'ko' THEN
              		CASE WHEN depth_status= 'C02603' THEN 'DROP계약' + CONVERT(NVARCHAR, ROW_NUMBER () OVER (ORDER BY A.CNSDREQ_ID)) ELSE '계약' + CONVERT(NVARCHAR, ROW_NUMBER () OVER (ORDER BY A.CNSDREQ_ID)) END
              	WHEN :vo.session_user_locale = 'fr' THEN
              		CASE WHEN depth_status= 'C02603' THEN 'ABANDONNER le contrat' + CONVERT(NVARCHAR, ROW_NUMBER () OVER (ORDER BY A.CNSDREQ_ID)) ELSE 'Contrats' + CONVERT(NVARCHAR, ROW_NUMBER () OVER (ORDER BY A.CNSDREQ_ID)) END
              	WHEN :vo.session_user_locale = 'de' THEN
              		CASE WHEN depth_status= 'C02603' THEN 'Vertrag ablegen' + CONVERT(NVARCHAR, ROW_NUMBER () OVER (ORDER BY A.CNSDREQ_ID)) ELSE 'Vertrag' + CONVERT(NVARCHAR, ROW_NUMBER () OVER (ORDER BY A.CNSDREQ_ID)) END
               ELSE
              		CASE WHEN depth_status= 'C02603' THEN 'DROP Contract' + CONVERT(NVARCHAR, ROW_NUMBER () OVER (ORDER BY A.CNSDREQ_ID)) ELSE 'Contract' + CONVERT(NVARCHAR, ROW_NUMBER () OVER (ORDER BY A.CNSDREQ_ID)) END
               END AS TAB_NM
              ,A.CNSD_STATUS
              ,A.CNSDREQ_ID, A.MN_CNSD_DEPT, A.MN_RESPMAN_APNT_YN, A.VC_CNSD_DEPT, A.VC_CNSD_DEMND_DT, A.VC_CNSD_DEMND_CONT, A.VC_RESPMAN_APNT_YN, A.DMSTFRGN_GBN, A.DRAFT_DEMND_YN, A.PLNDBN_REQ_YN, A.LAST_CNSD_YN, A.PREV_CNSDREQ_ID, A.REQ_TITLE, A.REQMAN_ID, A.REQMAN_NM, A.REQ_DEPT, A.REQ_DEPT_NM
              ,  A.LASTBN_CHGE_YN
              /* , DECODE(A.LASTBN_CHGE_YN,'Y','YES','N','NO') LASTBN_CHGE_YN_NM */
              , CASE A.LASTBN_CHGE_YN
                  WHEN 'Y' THEN 'YES'
                ELSE 
                  'NO'
                END AS LASTBN_CHGE_YN_NM
              , A.CNSD_DEMND_CONT, A.PRGRS_STATUS, A.REBFR_APPRVL_YN, A.RE_DT, A.PUB_YN, A.REQ_OPERDIV, A.REQ_UP_DEPT, A.REQMAN_JIKGUP_NM, A.ACPT_DT, A.PLNDBN_CHGE_CONT, A.CNSD_HOLD_CAUSE, A.FST_REQ_DEPT, A.FST_REQ_UP_DEPT, A.REQ_INTNL_DEPT_CD, A.CNTRT_ID, A.CNTRT_NM, A.REGION_GBN, A.BIZ_CLSFCN, A.DEPTH_CLSFCN, A.CNCLSNPURPS_BIGCLSFCN, A.CNCLSNPURPS_MIDCLSFCN
              /*, A.CNCLSNPURPS_MIDCLSFCN_ETC */
              , (CASE A.CNCLSNPURPS_MIDCLSFCN_ETC
					WHEN A.CNTRT_TRGT THEN 'Y1'
					ELSE 'Yes with 1st Option'
				 END) AS CNCLSNPURPS_MIDCLSFCN_ETC
              , A.CNTRT_TRGT, A.CNTRT_TRGT_DET, A.PAYMENT_GBN, A.ANTCPTNEFCT, A.SECRET_KEEPPERIOD, A.CNTRT_UNTPRC, A.CNTRT_AMT, A.CRRNCY_UNIT, A.PAYMENT_COND, A.AUTO_RNEW_YN, A.EXPRT_NOTIDAY, A.OBLGT_LMT, A.SPCL_COND, A.CNCLSN_PLNDDAY, A.CNTRT_RESPMAN_ID, A.CNTRT_RESPMAN_NM, A.CNTRT_OPPNT_CD, A.SIGN_PLNDMAN_ID, A.SIGN_PLNDMAN_NM, A.SEAL_MTHD, A.CNTRT_CNCLSN_YN, A.SIGNMAN_ID, A.SIGNMAN_NM, A.OPPNT_SIGNMAN_NM, A.OPPNT_SIGNMAN_JIKGUP, A.OPPNT_SIGNMAN_DEPT, A.OPPNT_SIGNDAY, A.CNTRT_CNCLSNDAY, A.CPY_REGDAY, A.CNTRT_NO, A.LOAC, A.DSPT_RESOLT_MTHD, A.DSPT_RESOLT_MTHD_DET, A.ORG_ACPT_DLAY_CAUSE, A.ORG_ACPTDAY, A.ORG_TKOVMAN_ID, A.ORG_TKOVMAN_NM, A.ORG_HDOVMAN_ID, A.ORG_HDOVMAN_NM, A.ORG_STRG_POS, A.PRCS_DEPTH, A.DEPTH_STATUS, A.CNTRT_STATUS, A.LOAC_ETC, A.CNTRT_CHGE_DEMNDDAY, A.CNTRT_CHGE_DEMNDMAN_ID, A.CNTRT_CHGE_DEMNDMAN_NM, A.CNTRT_CHGE_DEMND_CAUSE, A.CNTRT_CHGE_PLNDDAY, A.CNTRT_CHGE_CONF_YN, A.CNTRT_CHGE_CONFDAY, A.CNTRT_CHGE_CONFMAN_ID, A.CNTRT_CHGE_CONFMAN_NM, A.BFHDCSTN_MTNMAN_ID, A.BFHDCSTN_MTNMAN_NM, A.BFHDCSTN_MTNMAN_JIKGUP_NM, A.BFHDCSTN_MTN_DEPT_NM, A.BFHDCSTN_MTNMAN_EMAIL, A.BFHDCSTN_APBT_MTHD, A.BFHDCSTN_APBTMAN_ID, A.BFHDCSTN_APBTMAN_NM, A.BFHDCSTN_APBTMAN_JIKGUP_NM, A.BFHDCSTN_APBT_DEPT_NM, A.SEAL_RQSTDAY, A.SEAL_RQSTMAN_ID, A.SEAL_RQSTMAN_NM, A.SEAL_FFMTMAN_ID, A.SEAL_FFMTMAN_NM, A.SEAL_FFMTDAY, A.CNTRT_UNTPRC_EXPL, A.ETC_MAIN_CONT, A.IF_SYS_CD, A.CNTRT_RESP_DEPT, A.CNTRT_RESP_DEPT_NM, A.CNTRT_RESP_UP_DEPT, A.CNTRT_RESPMAN_JIKGUP_NM, A.SIGN_PLND_DEPT_NM, A.SIGN_PLNDMAN_JIKGUP_NM, A.SEAL_RQST_DEPT_NM, A.SEAL_RQSTMAN_JIKGUP_NM, A.SEAL_FFMT_DEPT_NM, A.SEAL_FFMTMAN_JIKGUP_NM, A.SIGN_DEPT_NM, A.SIGNMAN_JIKGUP_NM, A.SIGNDAY, A.ORG_TKOV_DEPT_NM, A.ORG_TKOVMAN_JIKGUP_NM, A.ORG_HDOV_DEPT_NM, A.ORG_HDOVMAN_JIKGUP_NM, A.CNTRT_CHGE_DEMND_DEPT_NM, A.PSHDBKGRND_PURPS, A.CNTRT_CHGE_DEMNDMAN_JIKGUP_NM, A.CNTRT_CHGE_CONF_DEPT_NM, A.CNTRT_CHGE_CONFMAN_JIKGUP_NM, A.REG_OPERDIV, A.CPY_REGMAN_ID, A.CPY_REGMAN_NM, A.CPY_REGMAN_JIKGUP_NM, A.CPY_REG_DEPT_NM, A.FST_CNTRT_RESP_DEPT, A.FST_CNTRT_RESP_UP_DEPT, A.REG_INTNL_DEPT_CD, A.CNTRT_CHGE_CONF_CONT
              , SYS_NM
              , REQ_REG_ID 
              , CASE WHEN :vo.session_user_locale = 'ko' THEN
              	 CASE WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN '검토의뢰' 
              		WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN '검토회신'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN '재검토의뢰'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN '재검토회신' 
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN '최종본의뢰'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN '최종본회신'
              		ELSE '해당없음'
              	  END
              	WHEN :vo.session_user_locale = 'fr' THEN
              	 CASE WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Demande de revue' 
              		WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Répondre en envoyant la revue'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Réitération de la demande de revue'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN '2ème réponse concernant la revue' 
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Demander la version finale'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Répondre à la version finale'
              		ELSE 'Non applicable'
              	  END
              	WHEN :vo.session_user_locale = 'de' THEN
              	 CASE WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Antrag prüfen' 
              		WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Antwort mit Prüfung'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Wiederholter Prüfantrag'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN '2. Prüfantwort' 
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Endgültige Version anfordern'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Antwort auf endgültige Version'
              		ELSE 'Nicht anwendbar'
              	  END
              	ELSE
              	 CASE WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Review Request' 
              		WHEN A.PREV_CNSDREQ_ID IS NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Reply with Review'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Request Re-review'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='N' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Re-review Reply' 
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS NOT IN ('C04204','C04205','C04206','C04207') THEN 'Request Final Version'
              		WHEN A.PREV_CNSDREQ_ID IS NOT NULL AND A.PLNDBN_REQ_YN='Y' AND PRGRS_STATUS IN ('C04204','C04205','C04206','C04207') THEN 'Reply to Final Version'
              		ELSE 'Nonapplicable'
              	 END
              	END NAVI_TITLE	         
				FROM 
				    (SELECT 
				            AA.REG_ID AS REQ_REG_ID,
                            AA.CNSDREQ_ID,
                            B.DEPTH_STATUS,
                            B.BIZ_CLSFCN,
                            B.DEPTH_CLSFCN,
                            B.CNCLSNPURPS_BIGCLSFCN,
                            B.CNCLSNPURPS_MIDCLSFCN,
                            B.CNTRT_TRGT,
                            B.BFHDCSTN_APBT_MTHD,
                            B.CNTRT_OPPNT_TYPE,
                            B.CNTRT_OPPNT_NM,
                            B.CNTRT_OPPNT_RPRSNTMAN,
                            B.CNTRT_OPPNT_RESPMAN,
                            B.CNTRT_OPPNT_TELNO,
                            AA.RE_DEMNDDAY,
                            AA.REQ_DT,
                            B.CNTRTPERIOD_STARTDAY,
                            B.CNTRTPERIOD_ENDDAY,
                            B.BFHDCSTN_APBTDAY,
                            AA.MN_CNSD_DEPT,
                            AA.MN_RESPMAN_APNT_YN,
                            AA.VC_CNSD_DEPT,
                            AA.VC_CNSD_DEMND_DT,
                            AA.VC_CNSD_DEMND_CONT,
                            AA.VC_RESPMAN_APNT_YN,
                            AA.DMSTFRGN_GBN,
                            AA.DRAFT_DEMND_YN,
                            AA.PLNDBN_REQ_YN,
                            AA.LAST_CNSD_YN,
                            AA.PREV_CNSDREQ_ID,
                            AA.REQ_TITLE,
                            AA.REQMAN_ID,
                            AA.REQMAN_NM,
                            AA.REQ_DEPT,
                            AA.REQ_DEPT_NM,
                            AA.LASTBN_CHGE_YN,
                            AA.CNSD_DEMND_CONT,
                            AA.PRGRS_STATUS,
                            AA.REBFR_APPRVL_YN,
                            AA.RE_DT,
                            AA.PUB_YN,
                            AA.REQ_OPERDIV,
                            AA.REQ_UP_DEPT,
                            AA.REQMAN_JIKGUP_NM,
                            AA.ACPT_DT,
                            AA.PLNDBN_CHGE_CONT,
                            AA.CNSD_HOLD_CAUSE,
                            AA.FST_REQ_DEPT,
                            AA.FST_REQ_UP_DEPT,
                            AA.REQ_INTNL_DEPT_CD,
                            B.CNTRT_ID,
                            B.CNTRT_NM,
                            B.REGION_GBN,
                            B.CNTRT_TRGT_DET,
                            B.PAYMENT_GBN,
                            B.ANTCPTNEFCT,
                            B.SECRET_KEEPPERIOD,
                            B.CNTRT_UNTPRC,
                            B.CNTRT_AMT,
                            B.CRRNCY_UNIT,
                            B.PAYMENT_COND,
                            B.AUTO_RNEW_YN,
                            B.EXPRT_NOTIDAY,
                            B.OBLGT_LMT,
                            B.SPCL_COND,
                            B.CNCLSN_PLNDDAY,
                            B.CNTRT_RESPMAN_ID,
                            B.CNTRT_RESPMAN_NM,
                            B.CNTRT_OPPNT_CD,
                            B.SIGN_PLNDMAN_ID,
                            B.SIGN_PLNDMAN_NM,
                            B.SEAL_MTHD,
                            B.CNTRT_CNCLSN_YN,
                            B.SIGNMAN_ID,
                            B.SIGNMAN_NM,
                            B.OPPNT_SIGNMAN_NM,
                            B.OPPNT_SIGNMAN_JIKGUP,
                            B.OPPNT_SIGNMAN_DEPT,
                            B.OPPNT_SIGNDAY,
                            B.CNTRT_CNCLSNDAY,
                            B.CPY_REGDAY,
                            B.CNTRT_NO,
                            B.LOAC,
                            B.DSPT_RESOLT_MTHD,
                            B.DSPT_RESOLT_MTHD_DET,
                            B.ORG_ACPT_DLAY_CAUSE,
                            B.ORG_ACPTDAY,
                            B.ORG_TKOVMAN_ID,
                            B.ORG_TKOVMAN_NM,
                            B.ORG_HDOVMAN_ID,
                            B.ORG_HDOVMAN_NM,
                            B.ORG_STRG_POS,
                            B.PRCS_DEPTH,
                            B.CNTRT_STATUS,
                            B.LOAC_ETC,
                            B.CNTRT_CHGE_DEMNDDAY,
                            B.CNTRT_CHGE_DEMNDMAN_ID,
                            B.CNTRT_CHGE_DEMNDMAN_NM,
                            B.CNTRT_CHGE_DEMND_CAUSE,
                            B.CNTRT_CHGE_PLNDDAY,
                            B.CNTRT_CHGE_CONF_YN,
                            B.CNTRT_CHGE_CONFDAY,
                            B.CNTRT_CHGE_CONFMAN_ID,
                            B.CNTRT_CHGE_CONFMAN_NM,
                            B.BFHDCSTN_MTNMAN_ID,
                            B.BFHDCSTN_MTNMAN_NM,
                            B.BFHDCSTN_MTNMAN_JIKGUP_NM,
                            B.BFHDCSTN_MTN_DEPT_NM,
                            B.BFHDCSTN_MTNMAN_EMAIL,
                            B.BFHDCSTN_APBTMAN_ID,
                            B.BFHDCSTN_APBTMAN_NM,
                            B.BFHDCSTN_APBTMAN_JIKGUP_NM,
                            B.BFHDCSTN_APBT_DEPT_NM,
                            B.SEAL_RQSTDAY,
                            B.SEAL_RQSTMAN_ID,
                            B.SEAL_RQSTMAN_NM,
                            B.SEAL_FFMTMAN_ID,
                            B.SEAL_FFMTMAN_NM,
                            B.SEAL_FFMTDAY,
                            B.CNTRT_UNTPRC_EXPL,
                            B.ETC_MAIN_CONT,
                            B.IF_SYS_CD,
                            B.CNTRT_RESP_DEPT,
                            B.CNTRT_RESP_DEPT_NM,
                            B.CNTRT_RESP_UP_DEPT,
                            B.CNTRT_RESPMAN_JIKGUP_NM,
                            B.SIGN_PLND_DEPT_NM,
                            B.SIGN_PLNDMAN_JIKGUP_NM,
                            B.SEAL_RQST_DEPT_NM,
                            B.SEAL_RQSTMAN_JIKGUP_NM,
                            B.SEAL_FFMT_DEPT_NM,
                            B.SEAL_FFMTMAN_JIKGUP_NM,
                            B.SIGN_DEPT_NM,
                            B.SIGNMAN_JIKGUP_NM,
                            B.SIGNDAY,
                            B.ORG_TKOV_DEPT_NM,
                            B.ORG_TKOVMAN_JIKGUP_NM,
                            B.ORG_HDOV_DEPT_NM,
                            B.ORG_HDOVMAN_JIKGUP_NM,
                            B.CNTRT_CHGE_DEMND_DEPT_NM,
                            B.PSHDBKGRND_PURPS,
                            B.CNTRT_CHGE_DEMNDMAN_JIKGUP_NM,
                            B.CNTRT_CHGE_CONF_DEPT_NM,
                            B.CNTRT_CHGE_CONFMAN_JIKGUP_NM,
                            B.REG_OPERDIV,
                            B.CPY_REGMAN_ID,
                            B.CPY_REGMAN_NM,
                            B.CPY_REGMAN_JIKGUP_NM,
                            B.CPY_REG_DEPT_NM,
                            B.FST_CNTRT_RESP_DEPT,
                            B.FST_CNTRT_RESP_UP_DEPT,
                            B.REG_INTNL_DEPT_CD,
                            B.CNTRT_CHGE_CONF_CONT,
                            B.SYS_NM,
                            C.CNSD_STATUS,
			                B.CNTRT_OPPNT_EMAIL,
			                AA.CNSD_LEVEL,
			                B.CNSLT_NO,
			                B.CNCLSNPURPS_MIDCLSFCN_ETC,
			                
			               	D.CUSTOMER_CD,
							D.CUSTOMER_NM1,
							D.TAX_NO,
							D.GERP_CD,
							
							 /* ECMS 추가  S */
			               , B.CONT_DRAFT
			               , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
						              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
						              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
						              			ELSE CD_NM_ENG
						              		END CD_NM FROM TB_COM_CD WHERE CD = A.CONT_DRAFT)  AS CONT_DRAFT_NM
			               , B.TOP_30_CUS
			               , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
						              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
						              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
						              			ELSE CD_NM_ENG
						              		END CD_NM FROM TB_COM_CD WHERE CD = A.TOP_30_CUS)  AS TOP_30_CUS_NM
			               , B.RELATED_PRODUCTS
			               , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
						              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
						              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
						              			ELSE CD_NM_ENG
						              		END CD_NM FROM TB_COM_CD WHERE CD = A.RELATED_PRODUCTS)  AS RELATED_PRODUCTS_NM
			   			/* ECMS 추가  E */
			                
				    FROM TN_CLM_CONT_CNSDREQ A
				        ,TN_CLM_CONTRACT_CNSD C
				        ,TN_CLM_CONTRACT_MASTER B
				        
				        LEFT OUTER JOIN TN_CLM_CUSTOMER D
					    ON B.CNTRT_OPPNT_CD = D.CUSTOMER_CD
					    
				    WHERE 1=1 
				    AND B.PRCS_DEPTH = 'C02508'
				    AND AA.CNSDREQ_ID =  :vo.cnsdreq_id 
				    AND AA.DEL_YN = 'N'
				    AND AA.CNSDREQ_ID = C.CNSDREQ_ID
				    AND B.CNTRT_ID = C.CNTRT_ID
				    AND B.DEL_YN = 'N'
				   )A
				WHERE 1=1
				ORDER BY A.CNTRT_ID ASC		    	
		    ]]>
		  </statement>
		</query>
		
		<query id="clm.manage.getContractMaster" isCamelCase="false" comment="마스터테이블정보 가져오기">
		  <statement>
		    <![CDATA[
			    SELECT ROW_NUMBER () OVER (ORDER BY A.CNTRT_ID) AS RN
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.BIZ_CLSFCN ) AS BIZ_CLSFCN_NM
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.DEPTH_CLSFCN ) AS DEPTH_CLSFCN_NM
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNCLSNPURPS_BIGCLSFCN ) AS CNCLSNPURPS_BIGCLSFCN_NM
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNCLSNPURPS_MIDCLSFCN ) AS CNCLSNPURPS_MIDCLSFCN_NM
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNCLSNPURPS_MIDCLSFCN_ETC ) AS CNCLSNPURPS_MIDCLSFCN_ETC_NM
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNTRT_TRGT ) AS CNTRT_TRGT_NM				      
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.PAYMENT_GBN ) AS PAYMENT_GBN_NM 
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.BFHDCSTN_APBT_MTHD ) AS BFHDCSTN_APBT_MTHD_NM 
				      ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.CNTRT_OPPNT_TYPE ) AS CNTRT_OPPNT_KIND
				      ,A.CNTRT_OPPNT_NM
				      ,A.CNTRT_OPPNT_RPRSNTMAN
				      ,A.CNTRT_OPPNT_RESPMAN
				      ,A.CNTRT_OPPNT_TELNO
				      ,A.CNTRT_OPPNT_EMAIL
				      ,A.CNTRT_NO
				FROM TN_CLM_CONTRACT_MASTER A				   
                    ,TN_CLM_CONTRACT_CNSD D
				WHERE 1=1
                  AND D.CNTRT_ID = A.CNTRT_ID        
				  AND A.CNTRT_ID = :vo.cntrt_id       
				
		    ]]>
		  </statement>
		</query>
		
		<query id="clm.manage.detailForwardContractMaster" isCamelCase="false" comment="마스터테이블정보 가져오기">
		  <statement>
		    <![CDATA[
			    SELECT ROW_NUMBER () OVER (ORDER BY A.CNTRT_ID) AS RN
				     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.BIZ_CLSFCN ) AS BIZ_CLSFCN_NM
				     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.DEPTH_CLSFCN ) AS DEPTH_CLSFCN_NM
				     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNCLSNPURPS_BIGCLSFCN ) AS CNCLSNPURPS_BIGCLSFCN_NM
				     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNCLSNPURPS_MIDCLSFCN ) AS CNCLSNPURPS_MIDCLSFCN_NM
				     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNCLSNPURPS_MIDCLSFCN_ETC ) AS CNCLSNPURPS_MIDCLSFCN_ETC_NM
				     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNTRT_TRGT ) AS CNTRT_TRGT_NM				      
				     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.PAYMENT_GBN ) AS PAYMENT_GBN_NM 
				     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.BFHDCSTN_APBT_MTHD ) AS BFHDCSTN_APBT_MTHD_NM
              		 /*TO_CHAR (TO_DATE (A.CNTRTPERIOD_STARTDAY, 'YYYYMMDD'), 'YYYY-MM-DD') AS CNTRTPERIOD_STARTDAY,*/
	                 , CONVERT(VARCHAR, CONVERT(DATE, A.CNTRTPERIOD_STARTDAY, 23)) AS CNTRTPERIOD_STARTDAY
                     /* TO_CHAR (TO_DATE (A.CNTRTPERIOD_ENDDAY, 'YYYYMMDD'), 'YYYY-MM-DD') AS CNTRTPERIOD_ENDDAY, */
	                 , CONVERT(VARCHAR, CONVERT(DATE, A.CNTRTPERIOD_ENDDAY, 23)) AS CNTRTPERIOD_ENDDAY
                     /* TO_CHAR (TO_DATE (A.BFHDCSTN_APBTDAY, 'YYYYMMDD'), 'YYYY-MM-DD') AS BFHDCSTN_APBTDAY, */
	                 , ISNULL(CONVERT(VARCHAR, CONVERT(DATE, A.BFHDCSTN_APBTDAY, 23)),'') AS BFHDCSTN_APBTDAY
              		 , A.CNTRT_ID
              		 , A.CNTRT_NM
              		 , A.REGION_GBN
              		 , A.BIZ_CLSFCN
              		 , A.DEPTH_CLSFCN
              		 , A.CNCLSNPURPS_BIGCLSFCN
              		 , A.CNCLSNPURPS_MIDCLSFCN
              		 , A.CNCLSNPURPS_MIDCLSFCN_ETC
              		 , A.CNTRT_TRGT
              		 , A.CNTRT_TRGT_DET
              		 , A.PAYMENT_GBN
              		 , A.ANTCPTNEFCT
              		 , A.SECRET_KEEPPERIOD
              		 , A.CNTRT_UNTPRC
              		 , A.CNTRT_AMT
              		 /* DECODE (TRIM (TO_CHAR (TO_NUMBER (ISNULL (A.cntrt_amt, 0)),'999,999,999,999.99')),'0.00', '',TRIM (TO_CHAR (TO_NUMBER (ISNULL (A.cntrt_amt, 0)),'999,999,999,999.99')))AS CNTRT_AMT_CHG, */
	                 , ISNULL (A.cntrt_amt, 0)
              		 , A.CRRNCY_UNIT
              		 , A.PAYMENT_COND
              		 , A.AUTO_RNEW_YN
              		 , A.EXPRT_NOTIDAY
              		 , A.OBLGT_LMT
              		 , A.SPCL_COND
              		 , A.CNCLSN_PLNDDAY
              		 , A.CNTRT_RESPMAN_ID
              		 , A.CNTRT_RESPMAN_NM
              		 , A.CNTRT_OPPNT_CD
              		 , A.CNTRT_OPPNT_NM
                     , A.CNTRT_OPPNT_TELNO
              		 , A.CNTRT_OPPNT_EMAIL
              		 , A.CNTRT_OPPNT_RPRSNTMAN
              		 , A.CNTRT_OPPNT_RESPMAN
                     , A.CNTRT_OPPNT_TYPE
                     , (SELECT CD_NM FROM TB_COM_CD WHERE CD = A.CNTRT_OPPNT_TYPE ) AS CNTRT_OPPNT_TYPE_NM 
              		 , A.SIGN_PLNDMAN_ID
              		 , A.SIGN_PLNDMAN_NM
              		 , A.SEAL_MTHD
              		 , A.CNTRT_CNCLSN_YN
              		 , A.SIGNMAN_ID
              		 , A.SIGNMAN_NM
              		 , A.OPPNT_SIGNMAN_NM
              		 , A.OPPNT_SIGNMAN_JIKGUP
              		 , A.OPPNT_SIGNMAN_DEPT
              		 , A.OPPNT_SIGNDAY
              		 , A.CNTRT_CNCLSNDAY
              		 , A.CPY_REGDAY
              		 , A.CNTRT_NO
              		 , A.LOAC
              		 , A.DSPT_RESOLT_MTHD
              		 , A.DSPT_RESOLT_MTHD_DET
              		 , A.ORG_ACPT_DLAY_CAUSE
              		 , A.ORG_ACPTDAY
              		 , A.ORG_TKOVMAN_ID
              		 , A.ORG_TKOVMAN_NM
              		 , A.ORG_HDOVMAN_ID
              		 , A.ORG_HDOVMAN_NM
              		 , A.ORG_STRG_POS
              		 , A.PRCS_DEPTH
              		 , A.DEPTH_STATUS
              		 , A.CNTRT_STATUS
              		 , A.REG_DT
              		 , A.REG_ID
              		 , A.REG_NM
              		 , A.MOD_DT
              		 , A.MOD_ID
              		 , A.MOD_NM
              		 , A.DEL_YN
              		 , A.DEL_DT
              		 , A.DEL_ID
              		 , A.DEL_NM
              		 , A.LOAC_ETC
              		 , A.CNTRT_CHGE_DEMNDDAY
              		 , A.CNTRT_CHGE_DEMNDMAN_ID
              		 , A.CNTRT_CHGE_DEMNDMAN_NM
              		 , A.CNTRT_CHGE_DEMND_CAUSE
              		 , A.CNTRT_CHGE_PLNDDAY
              		 , A.CNTRT_CHGE_CONF_YN
              		 , A.CNTRT_CHGE_CONFDAY
              		 , A.CNTRT_CHGE_CONFMAN_ID
              		 , A.CNTRT_CHGE_CONFMAN_NM
              		 , A.BFHDCSTN_MTNMAN_ID
              		 , A.BFHDCSTN_MTNMAN_NM
              		 , A.BFHDCSTN_MTNMAN_JIKGUP_NM
              		 , A.BFHDCSTN_MTN_DEPT_NM
              		 , A.BFHDCSTN_MTNMAN_EMAIL
              		 , A.BFHDCSTN_APBT_MTHD
              		 , A.BFHDCSTN_APBTMAN_ID
              		 , A.BFHDCSTN_APBTMAN_NM
              		 , A.BFHDCSTN_APBTMAN_JIKGUP_NM
              		 , A.BFHDCSTN_APBT_DEPT_NM
              		 , A.SEAL_RQSTDAY
              		 , A.SEAL_RQSTMAN_ID
              		 , A.SEAL_RQSTMAN_NM
              		 , A.SEAL_FFMTMAN_ID
              		 , A.SEAL_FFMTMAN_NM
              		 , A.SEAL_FFMTDAY
              		 , A.CNTRT_UNTPRC_EXPL
              		 , A.ETC_MAIN_CONT
              		 , A.IF_SYS_CD
              		 , A.CNTRT_RESP_DEPT
              		 , A.CNTRT_RESP_DEPT_NM
              		 , A.CNTRT_RESP_UP_DEPT
              		 , A.CNTRT_RESPMAN_JIKGUP_NM
              		 , A.SIGN_PLND_DEPT_NM
              		 , A.SIGN_PLNDMAN_JIKGUP_NM
              		 , A.SEAL_RQST_DEPT_NM
              		 , A.SEAL_RQSTMAN_JIKGUP_NM
              		 , A.SEAL_FFMT_DEPT_NM
              		 , A.SEAL_FFMTMAN_JIKGUP_NM
              		 , A.SIGN_DEPT_NM
              		 , A.SIGNMAN_JIKGUP_NM
              		 , A.SIGNDAY
              		 , A.ORG_TKOV_DEPT_NM
              		 , A.ORG_TKOVMAN_JIKGUP_NM
              		 , A.ORG_HDOV_DEPT_NM
              		 , A.ORG_HDOVMAN_JIKGUP_NM
              		 , A.CNTRT_CHGE_DEMND_DEPT_NM
              		 , A.PSHDBKGRND_PURPS
              		 , A.CNTRT_CHGE_DEMNDMAN_JIKGUP_NM
              		 , A.CNTRT_CHGE_CONF_DEPT_NM
              		 , A.CNTRT_CHGE_CONFMAN_JIKGUP_NM
              		 , A.REG_OPERDIV
              		 , A.CPY_REGMAN_ID
              		 , A.CPY_REGMAN_NM
              		 , A.CPY_REGMAN_JIKGUP_NM
              		 , A.CPY_REG_DEPT_NM
              		 , A.FST_CNTRT_RESP_DEPT
              		 , A.FST_CNTRT_RESP_UP_DEPT
              		 , A.REG_INTNL_DEPT_CD
              		 , A.CNTRT_CHGE_CONF_CONT  
              	FROM TN_CLM_CONTRACT_MASTER A 				   
		        WHERE 1=1
				 AND A.CNTRT_ID 		= :vo.cntrt_id   
				
		    ]]>
		  </statement>
		</query>
		
		<!-- Review Contract Detail Consideration_d_new lomRq2 -->
		<query id="clm.manage.detailContractMaster" isCamelCase="false" comment="마스터테이블정보 가져오기">
		  <statement>
		    <![CDATA[
			    SELECT ROW_NUMBER () OVER (ORDER BY C.CNSDREQ_ID) AS RN
				     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.BIZ_CLSFCN ) AS BIZ_CLSFCN_NM
				     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.DEPTH_CLSFCN ) AS DEPTH_CLSFCN_NM
				     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNCLSNPURPS_BIGCLSFCN ) AS CNCLSNPURPS_BIGCLSFCN_NM
				     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNCLSNPURPS_MIDCLSFCN ) AS CNCLSNPURPS_MIDCLSFCN_NM
				     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNCLSNPURPS_MIDCLSFCN_ETC ) AS CNCLSNPURPS_MIDCLSFCN_ETC_NM
				     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	        WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		ELSE CD_NM_ENG
			                   END CD_NM FROM TN_COM_CONTRACTTYPE_CD WHERE TYPE_CD = A.CNTRT_TRGT ) AS CNTRT_TRGT_NM				      
				     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.PAYMENT_GBN ) AS PAYMENT_GBN_NM 
				     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.BFHDCSTN_APBT_MTHD ) AS BFHDCSTN_APBT_MTHD_NM 	
				     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.LOAC ) AS LOAC_NM
              		 , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.DSPT_RESOLT_MTHD ) AS DSPT_RESOLT_MTHD_NM			     
	                 , CONVERT(VARCHAR, CONVERT(DATE, C.RE_DEMNDDAY,23)) AS RE_DEMNDDAY 
              		 , CONVERT(VARCHAR, CONVERT(DATE, C.REQ_DT, 23)) AS REQ_DT
              		 , CASE WHEN A.CNTRTPERIOD_STARTDAY = '' 
			 				THEN '' 
			 				ELSE CONVERT(VARCHAR, CONVERT(DATE, A.CNTRTPERIOD_STARTDAY, 23))
					   END AS CNTRTPERIOD_STARTDAY 
					 , CASE WHEN A.CNTRTPERIOD_ENDDAY = '' 
			 				THEN '' 
			 				ELSE CONVERT(VARCHAR, CONVERT(DATE, A.CNTRTPERIOD_ENDDAY, 23))
					   END AS CNTRTPERIOD_ENDDAY              
		              ,	CASE 
							WHEN   LEN(A.BFHDCSTN_APBTDAY) > 0  AND A.BFHDCSTN_APBTDAY <> 'null' THEN 
								ISNULL(CONVERT(varchar, CONVERT(date, A.BFHDCSTN_APBTDAY, 23)), '')
							ELSE ''								
					    END  AS BFHDCSTN_APBTDAY
              		 , A.CNTRT_ID
              		 , A.CNTRT_NM
              		 , A.REGION_GBN
              		 , A.BIZ_CLSFCN
              		 , A.DEPTH_CLSFCN
              		 , A.CNCLSNPURPS_BIGCLSFCN
              		 , A.CNCLSNPURPS_MIDCLSFCN

              		 ,(CASE
              		 	WHEN A.CNCLSNPURPS_MIDCLSFCN_ETC = 'Y' THEN 'YES'
						WHEN A.CNCLSNPURPS_MIDCLSFCN_ETC = 'N' THEN 'NO'
						ELSE ISNULL(
							(
							SELECT CD_NM
							FROM   tb_com_cd
							WHERE  grp_CD = 'C073'
							AND    CD = A.CNCLSNPURPS_MIDCLSFCN_ETC
							), ''
						)
					 	END
					 ) AS CNCLSNPURPS_MIDCLSFCN_ETC
					 , A.CNCLSNAFT_CSTN_CAUSE

              		 , A.CNTRT_TRGT
              		 , A.CNTRT_TRGT_DET
              		 , A.PAYMENT_GBN
              		 , A.ANTCPTNEFCT
              		 , A.SECRET_KEEPPERIOD
              		 , A.CNTRT_UNTPRC
              		 , A.CNTRT_AMT
              		 /* DECODE (TRIM (TO_CHAR (TO_NUMBER (ISNULL (A.cntrt_amt, 0)),'999,999,999,999.99')),'0.00', '',TRIM (TO_CHAR (TO_NUMBER (ISNULL (A.cntrt_amt, 0)),'999,999,999,999.99')))AS CNTRT_AMT_CHG, */
	                 , ISNULL (A.cntrt_amt, 0)
              		 , A.CRRNCY_UNIT
              		 , A.PAYMENT_COND
              		 , A.AUTO_RNEW_YN
              		 , A.EXPRT_NOTIDAY
              		 , A.OBLGT_LMT
              		 , A.SPCL_COND
              		 , A.CNCLSN_PLNDDAY
              		 , A.CNTRT_RESPMAN_ID
              		 , A.CNTRT_RESPMAN_NM
              		 , A.CNTRT_OPPNT_CD
              		 , A.CNTRT_OPPNT_NM
                   , A.CNTRT_OPPNT_TELNO
              		 , A.CNTRT_OPPNT_EMAIL
              		 , A.CNTRT_OPPNT_RPRSNTMAN
              		 ,A.CNTRT_OPPNT_RESPMAN
                   , A.CNTRT_OPPNT_TYPE
                   , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              			ELSE CD_NM_ENG
			              		END CD_NM FROM TB_COM_CD WHERE CD = A.CNTRT_OPPNT_TYPE ) AS CNTRT_OPPNT_TYPE_NM 
              		 , A.SIGN_PLNDMAN_ID
              		 , A.SIGN_PLNDMAN_NM
              		 , A.SEAL_MTHD
              		 , A.CNTRT_CNCLSN_YN
              		 , A.SIGNMAN_ID
              		 , A.SIGNMAN_NM
              		 , A.OPPNT_SIGNMAN_NM
              		 , A.OPPNT_SIGNMAN_JIKGUP
              		 , A.OPPNT_SIGNMAN_DEPT
              		 , A.OPPNT_SIGNDAY
              		 , A.CNTRT_CNCLSNDAY
              		 , A.CPY_REGDAY
              		 , A.CNTRT_NO
              		 , A.LOAC
              		 , A.DSPT_RESOLT_MTHD
              		 , A.DSPT_RESOLT_MTHD_DET
              		 , A.ORG_ACPT_DLAY_CAUSE
              		 , A.ORG_ACPTDAY
              		 , A.ORG_TKOVMAN_ID
              		 , A.ORG_TKOVMAN_NM
              		 , A.ORG_HDOVMAN_ID
              		 , A.ORG_HDOVMAN_NM
              		 , A.ORG_STRG_POS
              		 , A.PRCS_DEPTH
              		 , A.DEPTH_STATUS
              		 , A.CNTRT_STATUS
              		 , A.REG_DT
              		 , A.REG_ID AS REQ_REG_ID
              		 , A.REG_NM
              		 , A.MOD_DT
              		 , A.MOD_ID
              		 , A.MOD_NM
              		 , A.DEL_YN
              		 , A.DEL_DT
              		 , A.DEL_ID
              		 , A.DEL_NM
              		 , A.LOAC_ETC
              		 , A.CNTRT_CHGE_DEMNDDAY
              		 , A.CNTRT_CHGE_DEMNDMAN_ID
              		 , A.CNTRT_CHGE_DEMNDMAN_NM
              		 , A.CNTRT_CHGE_DEMND_CAUSE
              		 , A.CNTRT_CHGE_PLNDDAY
              		 , A.CNTRT_CHGE_CONF_YN
              		 , A.CNTRT_CHGE_CONFDAY
              		 , A.CNTRT_CHGE_CONFMAN_ID
              		 , A.CNTRT_CHGE_CONFMAN_NM
              		 , A.BFHDCSTN_MTNMAN_ID
              		 , A.BFHDCSTN_MTNMAN_NM
              		 , A.BFHDCSTN_MTNMAN_JIKGUP_NM
              		 , A.BFHDCSTN_MTN_DEPT_NM
              		 , A.BFHDCSTN_MTNMAN_EMAIL
              		 , A.BFHDCSTN_APBT_MTHD
              		 , A.BFHDCSTN_APBTMAN_ID
              		 , A.BFHDCSTN_APBTMAN_NM
              		 , A.BFHDCSTN_APBTMAN_JIKGUP_NM
              		 , A.BFHDCSTN_APBT_DEPT_NM
              		 , A.SEAL_RQSTDAY
              		 , A.SEAL_RQSTMAN_ID
              		 , A.SEAL_RQSTMAN_NM
              		 , A.SEAL_FFMTMAN_ID
              		 , A.SEAL_FFMTMAN_NM
              		 , A.SEAL_FFMTDAY
              		 /* , REPLACE(REPLACE(REPLACE(A.CNTRT_UNTPRC_EXPL, chr(13), '<br>'),chr(10),'<Br>'),'<br><Br>','<br>') AS CNTRT_UNTPRC_EXPL */
              		 , A.CNTRT_UNTPRC_EXPL
              		 , A.ETC_MAIN_CONT
              		 , A.IF_SYS_CD
              		 , A.CNTRT_RESP_DEPT
              		 , A.CNTRT_RESP_DEPT_NM
              		 , A.CNTRT_RESP_UP_DEPT
              		 , A.CNTRT_RESPMAN_JIKGUP_NM
              		 , A.SIGN_PLND_DEPT_NM
              		 , A.SIGN_PLNDMAN_JIKGUP_NM
              		 , A.SEAL_RQST_DEPT_NM
              		 , A.SEAL_RQSTMAN_JIKGUP_NM
              		 , A.SEAL_FFMT_DEPT_NM
              		 , A.SEAL_FFMTMAN_JIKGUP_NM
              		 , A.SIGN_DEPT_NM
              		 , A.SIGNMAN_JIKGUP_NM
              		 , A.SIGNDAY
              		 , A.ORG_TKOV_DEPT_NM
              		 , A.ORG_TKOVMAN_JIKGUP_NM
              		 , A.ORG_HDOV_DEPT_NM
              		 , A.ORG_HDOVMAN_JIKGUP_NM
              		 , A.CNTRT_CHGE_DEMND_DEPT_NM
              		 , A.PSHDBKGRND_PURPS
              		 , A.CNTRT_CHGE_DEMNDMAN_JIKGUP_NM
              		 , A.CNTRT_CHGE_CONF_DEPT_NM
              		 , A.CNTRT_CHGE_CONFMAN_JIKGUP_NM
              		 , A.REG_OPERDIV
              		 , A.CPY_REGMAN_ID
              		 , A.CPY_REGMAN_NM
              		 , A.CPY_REGMAN_JIKGUP_NM
              		 , A.CPY_REG_DEPT_NM
              		 , A.FST_CNTRT_RESP_DEPT
              		 , A.FST_CNTRT_RESP_UP_DEPT
              		 , A.REG_INTNL_DEPT_CD
              		 , A.CNTRT_CHGE_CONF_CONT	
              		 , (select cd_nm from tb_com_cd where sys_cd ='LAS' and grp_cd ='SOC01' and cd=A.CONT_DRAFT) as CONT_DRAFT 
              		 , (select cd_nm from tb_com_cd where sys_cd ='LAS' and grp_cd ='C056' and cd=A.TOP_30_CUS ) as TOP_30_CUS 
              		 , (select cd_nm from tb_com_cd where sys_cd ='LAS' and grp_cd ='RP01' and cd=A.RELATED_PRODUCTS ) as RELATED_PRODUCTS              					      	
              		 , C.CNSDREQ_ID
              		 , C.MN_CNSD_DEPT
              		 , C.MN_RESPMAN_APNT_YN
              		 , C.VC_CNSD_DEPT
              		 , C.VC_CNSD_DEMND_DT
              		 , C.VC_CNSD_DEMND_CONT
              		 , C.VC_RESPMAN_APNT_YN
              		 , C.DMSTFRGN_GBN
              		 , C.DRAFT_DEMND_YN
              		 , C.PLNDBN_REQ_YN
              		 , C.LAST_CNSD_YN
              		 , C.PREV_CNSDREQ_ID
              		 , C.REQ_TITLE
              		 , C.REQMAN_ID
              		 , C.REQMAN_NM
              		 , C.REQ_DEPT
              		 , C.REQ_DEPT_NM
              		 , C.LASTBN_CHGE_YN
              		 /* , DECODE(C.LASTBN_CHGE_YN,'Y','YES','N','NO') LASTBN_CHGE_YN_NM */
              		 , CASE C.LASTBN_CHGE_YN
              		     WHEN 'Y' THEN 'YES'
              		     WHEN 'N' THEN 'NO'
              		   ELSE ''
              		   END AS LASTBN_CHGE_YN_NM  
              		 , C.CNSD_DEMND_CONT
              		 , C.PRGRS_STATUS
              		 , C.REBFR_APPRVL_YN
              		 , C.RE_DT
              		 , C.PUB_YN
              		 , C.REQ_OPERDIV
              		 , C.REQ_UP_DEPT
              		 , C.REQMAN_JIKGUP_NM
              		 , C.ACPT_DT
              		 , C.PLNDBN_CHGE_CONT
              		 , C.CNSD_HOLD_CAUSE
              		 , C.FST_REQ_DEPT
              		 , C.FST_REQ_UP_DEPT
              		 , C.REQ_INTNL_DEPT_CD
              		 , D.CNSD_OPNN 
              		 , D.CNSD_STATUS 
              		 , dbo.CLM_REQ_RESPMANS_M(C.CNSDREQ_ID,:vo.session_user_locale) AS CNSDMANS
              		 ,CASE WHEN :vo.session_user_locale = 'ko' THEN
		              		/* DECODE(A.CNCLSNPURPS_BIGCLSFCN, 'T0302', '', DECODE(C.MN_CNSD_DEPT,'A00000001', '국내법무','A00000002','해외법무')) */
		               		CASE A.CNCLSNPURPS_BIGCLSFCN
		               		  WHEN 'T0302' THEN ''
		               		  ELSE
		               		    CASE C.MN_CNSD_DEPT
		               		      WHEN 'A00000001' THEN '국내법무'
		               		      WHEN 'A00000002' THEN '해외법무'
		               		    ELSE ''
		               		    END
		                     END 
		               ELSE
		               		/* DECODE(A.CNCLSNPURPS_BIGCLSFCN, 'T0302', '', DECODE(C.MN_CNSD_DEPT,'A00000001', 'Corporate Legal Team','A00000002','Global Legal Affairs Team'))*/
		              		CASE A.CNCLSNPURPS_BIGCLSFCN
		              		  WHEN 'T0302' THEN ''
		              		  ELSE
		              		    CASE C.MN_CNSD_DEPT
		              		      WHEN 'A00000001' THEN 'Corporate Legal Team'
		              		      WHEN 'A00000002' THEN 'Global Legal Affairs Team'
		              		    ELSE ''
		              		    END
		              		  END 
		               END AS MN_CNSD_DEPT_NM
              		 , A.CNSLT_NO
              		 , (SELECT MAX(X.HSTRY_NO) FROM TN_LAS_CONSULT X WHERE X.CNSLT_NO = A.CNSLT_NO) AS HSTRY_NO
              		 , ISNULL(SUBSTRING( TNC_SUMMARY_LINK, charindex('tcdoc=', TNC_SUMMARY_LINK)+6, len(TNC_SUMMARY_LINK)), '') AS TNC_NO
				FROM TN_CLM_CONTRACT_MASTER A				   
		            ,TN_CLM_CONT_CNSDREQ C
		            ,TN_CLM_CONTRACT_CNSD D
			   WHERE 1=1
		         AND D.CNTRT_ID 		= A.CNTRT_ID
		         AND D.CNSDREQ_ID 		= C.CNSDREQ_ID
		         AND C.CNSDREQ_ID 		= :vo.cnsdreq_id
				 AND A.CNTRT_ID 		= :vo.cntrt_id   
				
		    ]]>
		  </statement>
		</query>
		
		<query id="clm.manage.insertContractMaster" isCamelCase="false">
		  <statement>
		    <![CDATA[
			    INSERT INTO TN_CLM_CONTRACT_MASTER (
						CNTRT_ID
						,CNTRT_NM
						,REGION_GBN
						
						,CNTRT_OPPNT_CD						
						,CNTRT_OPPNT_NM
						,CNTRT_OPPNT_TELNO
						,CNTRT_OPPNT_EMAIL
						,CNTRT_OPPNT_RPRSNTMAN
						,CNTRT_OPPNT_TYPE
						,CNTRT_OPPNT_RESPMAN
						
						,BIZ_CLSFCN
						,DEPTH_CLSFCN
						,CNCLSNPURPS_BIGCLSFCN
						,CNCLSNPURPS_MIDCLSFCN
						,CNCLSNPURPS_MIDCLSFCN_ETC
						,CNTRT_TRGT
						,CNTRT_TRGT_DET
						,PSHDBKGRND_PURPS
						,PAYMENT_GBN
						,ANTCPTNEFCT
						,CNTRTPERIOD_STARTDAY
						,CNTRTPERIOD_ENDDAY
						,SECRET_KEEPPERIOD
						  /*  --,CNTRT_UNTPRC  */
						,CNTRT_UNTPRC_EXPL
						,CNTRT_AMT
						,CRRNCY_UNIT  
						,PAYMENT_COND
						,ETC_MAIN_CONT
						,AUTO_RNEW_YN
						,CNCLSN_PLNDDAY
						
						,CNTRT_RESPMAN_ID
						,CNTRT_RESPMAN_NM
						,CNTRT_RESP_DEPT
						,CNTRT_RESP_DEPT_NM
						,CNTRT_RESP_UP_DEPT
						,CNTRT_RESPMAN_JIKGUP_NM
						,FST_CNTRT_RESP_DEPT
						,FST_CNTRT_RESP_UP_DEPT
						
												
						,SIGN_PLNDMAN_ID
						,SEAL_MTHD
						,CNTRT_CNCLSN_YN
						,CNTRT_STATUS
						,CNTRT_CHGE_CONF_YN
						,PRCS_DEPTH
						,DEPTH_STATUS
						,BFHDCSTN_MTNMAN_ID
						,BFHDCSTN_MTNMAN_NM
						,BFHDCSTN_MTNMAN_JIKGUP_NM
						,BFHDCSTN_MTN_DEPT_NM
						,BFHDCSTN_MTNMAN_EMAIL
						,BFHDCSTN_APBT_MTHD
						,BFHDCSTN_APBTMAN_ID
						,BFHDCSTN_APBTMAN_NM
						,BFHDCSTN_APBTMAN_JIKGUP_NM
						,BFHDCSTN_APBT_DEPT_NM
						,BFHDCSTN_APBTDAY
						,REG_OPERDIV
						,REG_DT
						,REG_ID
						,REG_NM
						,DEL_YN 
						,CNSLT_NO
						,COMP_CD
						,COMP_NM
						,CNTRT_NM_EN
						,CNTRT_NO
						,CONT_DRAFT
						,TOP_30_CUS
						,RELATED_PRODUCTS
						,SYS_NM  /* ECMS 추가 */
						,TNC_APP_LINK
						,CTC_LINK
						,OTC_LINK
						,TNC_SUMMARY_LINK
						,CONTRACT_TYPE
						,COST_TYPE
						,CONTRACT_DIV_CODE
				) VALUES (
						:vo.cntrt_id
						,:vo.cntrt_nm
						,:vo.region_gbn
						
						,:vo.cntrt_oppnt_cd						
						,:vo.cntrt_oppnt_nm
						,:vo.cntrt_oppnt_telno
						,:vo.cntrt_oppnt_email
						,:vo.cntrt_oppnt_rprsntman
						,:vo.cntrt_oppnt_type
						,:vo.cntrt_oppnt_respman
						
						,:vo.biz_clsfcn
						,:vo.depth_clsfcn
						,:vo.cnclsnpurps_bigclsfcn
						,:vo.cnclsnpurps_midclsfcn
						,:vo.cnclsnpurps_midclsfcn_etc
						,:vo.cntrt_trgt
						,:vo.cntrt_trgt_det
						,:vo.pshdbkgrnd_purps
						,:vo.payment_gbn
						,:vo.antcptnefct
						,:vo.cntrtperiod_startday
						,:vo.cntrtperiod_endday
						,:vo.secret_keepperiod
						  /*  --,:vo.cntrt_untprc  */
						,:vo.cntrt_untprc_expl
						#if(!$vo.cntrt_amt.equals("") && $vo.cntrt_amt)
							,CONVERT(FLOAT, :vo.cntrt_amt)
						#else
							,0
						#end
						,:vo.crrncy_unit
						,:vo.payment_cond
						,:vo.etc_main_cont
						/* ,DECODE(:vo.auto_rnew_yn,'','N',:vo.auto_rnew_yn) */
						, CASE :vo.auto_rnew_yn
						    WHEN '' THEN 'N'
						  ELSE :vo.auto_rnew_yn
						  END
						,:vo.cnclsn_plndday						
						
						,:vo.cntrt_respman_id
						,:vo.cntrt_respman_nm
						,:vo.cntrt_resp_dept
						,:vo.cntrt_resp_dept_nm
						,:vo.cntrt_resp_up_dept
						,:vo.cntrt_respman_jikgup_nm
						,:vo.fst_cntrt_resp_dept
						,:vo.fst_cntrt_resp_up_dept
						
						,:vo.sign_plndman_id
						,:vo.seal_mthd
						,:vo.cntrt_cnclsn_yn
						,:vo.cntrt_status
						,:vo.cntrt_chge_conf_yn
						,:vo.prcs_depth
						,:vo.depth_status
						,:vo.bfhdcstn_mtnman_id
						,:vo.bfhdcstn_mtnman_nm
						,:vo.bfhdcstn_mtnman_jikgup_nm
						,:vo.bfhdcstn_mtn_dept_nm
						,:vo.bfhdcstn_mtnman_email
						,:vo.bfhdcstn_apbt_mthd
						,:vo.bfhdcstn_apbtman_id
						,:vo.bfhdcstn_apbtman_nm
						,:vo.bfhdcstn_apbtman_jikgup_nm
						,:vo.bfhdcstn_apbt_dept_nm
						#if(!$vo.bfhdcstn_apbtday.equals("") && $vo.bfhdcstn_apbtday)
							,:vo.bfhdcstn_apbtday
						#else
							,NULL
						#end
						,:vo.reg_operdiv 
						,GETDATE()						
						,:vo.reg_id
						,:vo.reg_nm
						,:vo.del_yn
						,:vo.std_cnslt_no
						,:vo.session_comp_cd
						,:vo.session_comp_nm
						,:vo.cntrt_nm
						#if(!$vo.getSubmit_status().equals("save"))
						,(	SELECT 
								CASE 
									WHEN CNT1 = 0 	THEN AUTO_CNTRD_NM + '0001'
										ELSE AUTO_CNTRD_NM + dbo.Function_lpad(CONVERT(VARCHAR, (SUBSTRING(MAX1,LEN(MAX1)-3,4))+1), 4, '0')
									END AS AUTO_CNTRD_NM
								FROM     
								(   
									SELECT
										(SELECT COUNT(CNTRT_ID) 
											FROM TN_CLM_CONTRACT_MASTER A  
											WHERE CHARINDEX(TA.AUTO_CNTRD_NM,CNTRT_NO) > 0) AS CNT1,
										(SELECT MAX(CNTRT_NO) 
											FROM TN_CLM_CONTRACT_MASTER A  
											WHERE CHARINDEX(TA.AUTO_CNTRD_NM,CNTRT_NO) > 0) AS MAX1,
													AUTO_CNTRD_NM
									FROM (
											SELECT 	:vo.session_comp_cd + Rtrim(replace(CONVERT(CHAR(10), GETDATE(), 11),'/',''))+'_' AS AUTO_CNTRD_NM
										 ) TA
								) X
	          			)
	          			#else
	          			,''
	          			#end
	          			 ,:vo.cntrt_src_cont_drft
	          			 ,:vo.cntrt_top30_cus
	          			 ,:vo.cntrt_rel_prd
	          			 ,:vo.sys_nm  /* ECMS 추가 */
	          			 ,:vo.tnc_app_link
	          			 ,:vo.ctc_link
	          			 ,:vo.otc_link
	          			 ,:vo.tnc_summary_link
	          			/* 2014-04-14 Kevin added. */
	          			, :vo.GERPContractType
	          			, :vo.GERPCostType
	          			, :vo.GERPDivCode
			    )
		    ]]>
		  </statement>
		</query>
		<query id="clm.manage.insertContractMasterReg" isCamelCase="false">
		  <statement>
		    <![CDATA[
			    INSERT INTO TN_CLM_CONTRACT_MASTER (
						CNTRT_ID
						,CNTRT_NM
						,REGION_GBN
						
						,CNTRT_OPPNT_CD						
						,CNTRT_OPPNT_NM
						,CNTRT_OPPNT_TELNO
						,CNTRT_OPPNT_EMAIL
						,CNTRT_OPPNT_RPRSNTMAN
						,CNTRT_OPPNT_TYPE
						,CNTRT_OPPNT_RESPMAN
						
						,BIZ_CLSFCN
						,DEPTH_CLSFCN
						,CNCLSNPURPS_BIGCLSFCN
						,CNCLSNPURPS_MIDCLSFCN
						,CNCLSNPURPS_MIDCLSFCN_ETC
						,CNTRT_TRGT
						,CNTRT_TRGT_DET
						,PSHDBKGRND_PURPS
						,PAYMENT_GBN
						,ANTCPTNEFCT
						,CNTRTPERIOD_STARTDAY
						,CNTRTPERIOD_ENDDAY
						,SECRET_KEEPPERIOD
						  /*  --,CNTRT_UNTPRC  */
						,CNTRT_UNTPRC_EXPL
						,CNTRT_AMT
						,CRRNCY_UNIT  
						,PAYMENT_COND
						,ETC_MAIN_CONT
						,AUTO_RNEW_YN
						,CNCLSN_PLNDDAY
						
						,CNTRT_RESPMAN_ID
						,CNTRT_RESPMAN_NM
						,CNTRT_RESP_DEPT
						,CNTRT_RESP_DEPT_NM
						,CNTRT_RESP_UP_DEPT
						,CNTRT_RESPMAN_JIKGUP_NM
						,FST_CNTRT_RESP_DEPT
						,FST_CNTRT_RESP_UP_DEPT
						
												
						,SIGN_PLNDMAN_ID
						,SEAL_MTHD
						,CNTRT_CNCLSN_YN
						,CNTRT_STATUS
						,CNTRT_CHGE_CONF_YN
						,PRCS_DEPTH
						,DEPTH_STATUS
						,BFHDCSTN_MTNMAN_ID
						,BFHDCSTN_MTNMAN_NM
						,BFHDCSTN_MTNMAN_JIKGUP_NM
						,BFHDCSTN_MTN_DEPT_NM
						,BFHDCSTN_MTNMAN_EMAIL
						,BFHDCSTN_APBT_MTHD
						,BFHDCSTN_APBTMAN_ID
						,BFHDCSTN_APBTMAN_NM
						,BFHDCSTN_APBTMAN_JIKGUP_NM
						,BFHDCSTN_APBT_DEPT_NM
						,BFHDCSTN_APBTDAY
						,REG_OPERDIV
						,REG_DT
						,REG_ID
						,REG_NM
						,DEL_YN
						,CNTRT_NO
				) VALUES (
						:vo.cntrt_id
						,:vo.cntrt_nm
						,:vo.region_gbn
						
						,:vo.cntrt_oppnt_cd						
						,:vo.cntrt_oppnt_nm
						,:vo.cntrt_oppnt_telno
						,:vo.cntrt_oppnt_email
						,:vo.cntrt_oppnt_rprsntman
						,:vo.cntrt_oppnt_type
						,:vo.cntrt_oppnt_respman
						
						,:vo.biz_clsfcn
						,:vo.depth_clsfcn
						,:vo.cnclsnpurps_bigclsfcn
						,:vo.cnclsnpurps_midclsfcn
						,:vo.cnclsnpurps_midclsfcn_etc
						,:vo.cntrt_trgt
						,:vo.cntrt_trgt_det
						,:vo.pshdbkgrnd_purps
						,:vo.payment_gbn
						,:vo.antcptnefct
						,:vo.cntrtperiod_startday
						,:vo.cntrtperiod_endday
						,:vo.secret_keepperiod
						  /*  --,:vo.cntrt_untprc  */
						,:vo.cntrt_untprc_expl
						#if(!$vo.cntrt_amt.equals("") && $vo.cntrt_amt)
							,CONVERT(FLOAT, :vo.cntrt_amt)
						#else
							,0
						#end	
						,:vo.crrncy_unit
						,:vo.payment_cond
						,:vo.etc_main_cont
						/* ,DECODE(:vo.auto_rnew_yn,'','N',:vo.auto_rnew_yn) */
						, CASE :vo.auto_rnew_yn
						    WHEN '' THEN 'N'
						  ELSE :vo.auto_rnew_yn
						  END
						,:vo.cnclsn_plndday						
						
						,:vo.cntrt_respman_id
						,:vo.cntrt_respman_nm
						,:vo.cntrt_resp_dept
						,:vo.cntrt_resp_dept_nm
						,:vo.cntrt_resp_up_dept
						,:vo.cntrt_respman_jikgup_nm
						,:vo.fst_cntrt_resp_dept
						,:vo.fst_cntrt_resp_up_dept
						
						,:vo.sign_plndman_id
						,:vo.seal_mthd
						,:vo.cntrt_cnclsn_yn
						,:vo.cntrt_status
						,:vo.cntrt_chge_conf_yn
						,:vo.prcs_depth
						,:vo.depth_status
						,:vo.bfhdcstn_mtnman_id
						,:vo.bfhdcstn_mtnman_nm
						,:vo.bfhdcstn_mtnman_jikgup_nm
						,:vo.bfhdcstn_mtn_dept_nm
						,:vo.bfhdcstn_mtnman_email
						,:vo.bfhdcstn_apbt_mthd
						,:vo.bfhdcstn_apbtman_id
						,:vo.bfhdcstn_apbtman_nm
						,:vo.bfhdcstn_apbtman_jikgup_nm
						,:vo.bfhdcstn_apbt_dept_nm
						,:vo.bfhdcstn_apbtday
						,:vo.reg_operdiv 
						,GETDATE()						
						,:vo.reg_id
						,:vo.reg_nm
						,:vo.del_yn
						,
						 (	
							SELECT 
								CASE 
									WHEN CNT1 = 0 	THEN AUTO_CNTRD_NM + '0001'
										ELSE AUTO_CNTRD_NM + dbo.Function_lpad(CONVERT(VARCHAR, (SUBSTRING(MAX1,LEN(MAX1)-3,4))+1), 4, '0')
									END AS AUTO_CNTRD_NM
								FROM     
								(   
									SELECT
										(SELECT COUNT(CNTRT_ID) 
											FROM TN_CLM_CONTRACT_MASTER A  
											WHERE CHARINDEX(TA.AUTO_CNTRD_NM,CNTRT_NO) > 0) AS CNT1,
										(SELECT MAX(CNTRT_NO) 
											FROM TN_CLM_CONTRACT_MASTER A  
											WHERE CHARINDEX(TA.AUTO_CNTRD_NM,CNTRT_NO) > 0) AS MAX1,
													AUTO_CNTRD_NM
									FROM (
											SELECT 	:vo.session_comp_cd + Rtrim(replace(CONVERT(CHAR(10), GETDATE(), 11),'/',''))+'_' AS AUTO_CNTRD_NM
										 ) TA
								) X
	          			 )
			    )
		    ]]>
		  </statement>
		</query>
		<!-- 계약 마스터 단계 상태 변경 단 DROP건은 상태 변경에서 제외함  -->
		<query id="clm.manage.modifyContractMaster.depthStatus" isCamelCase="false">
		  <statement>
		    <![CDATA[
			    UPDATE TN_CLM_CONTRACT_MASTER SET						
					   DEPTH_STATUS = :vo.depth_status, MOD_DT = GETDATE()
				 WHERE 1=1
				   AND DEL_YN = 'N'
				   AND DEPTH_STATUS NOT IN ('C02603')
				
				#if ($vo.submit_status == "tab_save")
	    		  AND CNTRT_ID = :vo.master_cntrt_id
    			#else    				
    			  AND CNTRT_ID IN (													
						#foreach ($master_cntrt_id in $vo.arr_cntrt_id) 
							#if ($velocityCount	== 1 ) 
								'$master_cntrt_id'
							#else 
						 	  , '$master_cntrt_id'
							#end 
						#end
						)					
    			#end	
		    ]]>
		  </statement>
		</query>
		
		<query id="clm.manage.modifyContractMaster.depthStatus2" isCamelCase="false">
		  <statement>
		    <![CDATA[
			    UPDATE TN_CLM_CONTRACT_MASTER 
			       SET DEPTH_STATUS = :vo.depth_status, MOD_DT = GETDATE()
				 WHERE DEL_YN = 'N'
				   AND DEPTH_STATUS NOT IN ('C02603')
    			   AND CNTRT_ID = :vo.cntrt_id
    				
		    ]]>
		  </statement>
		</query>
		
		<query id="clm.manage.modifyContractMaster" isCamelCase="false">
		  <statement>
		    <![CDATA[
			    UPDATE  TN_CLM_CONTRACT_MASTER SET
						CNTRT_NM = :vo.cntrt_nm
						,CNTRT_NM_EN = :vo.cntrt_nm	/* 2014-07-04 SUNGWOO ADDED */
						,REGION_GBN = :vo.region_gbn
						,CNTRT_OPPNT_CD = :vo.cntrt_oppnt_cd						
						,CNTRT_OPPNT_NM = :vo.cntrt_oppnt_nm
						,CNTRT_OPPNT_TELNO = :vo.cntrt_oppnt_telno
						,CNTRT_OPPNT_EMAIL = :vo.cntrt_oppnt_email
						,CNTRT_OPPNT_RPRSNTMAN = :vo.cntrt_oppnt_rprsntman
						,CNTRT_OPPNT_TYPE = :vo.cntrt_oppnt_type
						,CNTRT_OPPNT_RESPMAN = :vo.cntrt_oppnt_respman
						,BIZ_CLSFCN = :vo.biz_clsfcn
						,DEPTH_CLSFCN = :vo.depth_clsfcn
						,CNCLSNPURPS_BIGCLSFCN = :vo.cnclsnpurps_bigclsfcn
						,CNCLSNPURPS_MIDCLSFCN = :vo.cnclsnpurps_midclsfcn
						/*,CNCLSNPURPS_MIDCLSFCN_ETC = :vo.cnclsnpurps_midclsfcn_etc*/
						,CNTRT_TRGT = :vo.cntrt_trgt
						,CNTRT_TRGT_DET = :vo.cntrt_trgt_det
						,PSHDBKGRND_PURPS = :vo.pshdbkgrnd_purps
						,PAYMENT_GBN = :vo.payment_gbn
						,ANTCPTNEFCT = :vo.antcptnefct
						,CNTRTPERIOD_STARTDAY = :vo.cntrtperiod_startday
						,CNTRTPERIOD_ENDDAY = :vo.cntrtperiod_endday
						,CRRNCY_UNIT = :vo.crrncy_unit					
						#if(!$vo.cntrt_amt.equals("") && $vo.cntrt_amt)
							,CNTRT_AMT = CONVERT(FLOAT, REPLACE(:vo.cntrt_amt,'.00',''))
						#else
							,CNTRT_AMT = 0
						#end
						,CNTRT_UNTPRC_EXPL = :vo.cntrt_untprc_expl
						,PAYMENT_COND = :vo.payment_cond
						,ETC_MAIN_CONT = :vo.etc_main_cont
						,CNCLSN_PLNDDAY = :vo.cnclsn_plndday
						,CNTRT_RESPMAN_ID = :vo.cntrt_respman_id
						,SIGN_PLNDMAN_ID = :vo.sign_plndman_id
						,SEAL_MTHD = :vo.seal_mthd
						,CNTRT_CNCLSN_YN = :vo.cntrt_cnclsn_yn
						,CNTRT_STATUS = :vo.cntrt_status
						,CNTRT_CHGE_CONF_YN = :vo.cntrt_chge_conf_yn
						,PRCS_DEPTH = :vo.prcs_depth
						,DEPTH_STATUS = :vo.depth_status
						,BFHDCSTN_MTNMAN_ID = :vo.bfhdcstn_mtnman_id
						,BFHDCSTN_MTNMAN_NM = :vo.bfhdcstn_mtnman_nm
						,BFHDCSTN_MTNMAN_JIKGUP_NM = :vo.bfhdcstn_mtnman_jikgup_nm
						,BFHDCSTN_MTN_DEPT_NM = :vo.bfhdcstn_mtn_dept_nm
						,BFHDCSTN_MTNMAN_EMAIL = :vo.bfhdcstn_mtnman_email
						,BFHDCSTN_APBT_MTHD = :vo.bfhdcstn_apbt_mthd
						,BFHDCSTN_APBTMAN_ID = :vo.bfhdcstn_apbtman_id
						,BFHDCSTN_APBTMAN_NM = :vo.bfhdcstn_apbtman_nm
						,BFHDCSTN_APBTMAN_JIKGUP_NM = :vo.bfhdcstn_apbtman_jikgup_nm
						,BFHDCSTN_APBT_DEPT_NM = :vo.bfhdcstn_apbt_dept_nm
						,BFHDCSTN_APBTDAY = :vo.bfhdcstn_apbtday
						,REG_OPERDIV = :vo.reg_operdiv
						,MOD_DT = GETDATE()
						,MOD_ID = :vo.session_user_id
						,MOD_NM  = :vo.session_user_nm
						,CNSLT_NO = :vo.std_cnslt_no
						,TOP_30_CUS =:vo.cntrt_top30_cus
						,RELATED_PRODUCTS=:vo.cntrt_rel_prd
						,CONT_DRAFT =:vo.cntrt_src_cont_drft
						/*Kevin added. 2014-04-14*/
						,CONTRACT_TYPE = :vo.GERPContractType
						,COST_TYPE = :vo.GERPCostType
						,CONTRACT_DIV_CODE = :vo.GERPDivCode
				WHERE 	1=1
				  AND DEPTH_STATUS NOT IN ('C02603')
				  AND CNTRT_ID = :vo.cntrt_id
		    ]]>
		  </statement>
		</query>
		
		
		<!-- 의뢰 테이블 상태값만 변경  -->
		<query id="clm.manage.modifyContCnsdReq.prgrsStatus" isCamelCase="false">
		  <statement>
		    <![CDATA[
		         UPDATE TN_CLM_CONT_CNSDREQ
		          SET  MOD_DT = GETDATE()
					  , MOD_ID = :vo.session_user_id
					  , MOD_NM  = :vo.session_user_nm
					  #if ($vo.submit_status.equals("reqIF"))
						  , PRGRS_STATUS = (SELECT DECODE(C.CNCLSNPURPS_BIGCLSFCN,'T0301','C04203','T0303','C04203','C04203')  
					                        FROM (SELECT MIN(SA.CNTRT_ID) CNTRT_ID
					                                    FROM TN_CLM_CONTRACT_CNSD SA,
	                                            TN_CLM_CONTRACT_MASTER SB
	                                            WHERE SA.CNSDREQ_ID = :vo.cnsdreq_id AND SA.CNTRT_ID = SB.CNTRT_ID AND
	                                            SB.DEL_YN = 'N' AND SB.DEPTH_STATUS NOT IN ('C02603')
	                                            ) B, 
					                              TN_CLM_CONTRACT_MASTER C 
					                              WHERE B.CNTRT_ID = C.CNTRT_ID  )
						  ,FAST_TRACK_DIV = (select DECODE(CNSD_LEVEL,'1',:vo.fast_track_div,FAST_TRACK_DIV)
												from  TN_CLM_CONT_CNSDREQ 
												where CNSDREQ_ID = :vo.cnsdreq_id )					                              
					  #else
					  	  , PRGRS_STATUS = :vo.prgrs_status
					  #end              
					WHERE 1=1 
					AND CNSDREQ_ID = :vo.cnsdreq_id		              
		    ]]>
		  </statement>
		</query>
		<!-- 재의뢰시 검토요청 내용과 회신 요청일 변경자..정보 업데이트  -->
		<query id="clm.manage.modifyAgainReqConsideration" isCamelCase="false">
		  <statement>
		    <![CDATA[
		         UPDATE TN_CLM_CONT_CNSDREQ
		          SET
		              	RE_DEMNDDAY = :vo.re_demndday
		              , CNSD_DEMND_CONT = :vo.cnsd_demnd_cont		              
		              , MOD_DT = GETDATE()
					  , MOD_ID = :vo.session_user_id
					  , MOD_NM  = :vo.session_user_nm	              
		              , PRGRS_STATUS = :vo.prgrs_status		              
					WHERE 1=1 
					AND CNSDREQ_ID = :vo.cnsdreq_id		              
		    ]]>
		  </statement>
		</query>
		
		
		<query id="clm.manage.modifyConsideration" isCamelCase="false">
		  <statement>
		    <![CDATA[
		         UPDATE TN_CLM_CONT_CNSDREQ
		            SET MN_CNSD_DEPT = :vo.mn_cnsd_dept
	                  , MN_RESPMAN_APNT_YN = /* decode(:vo.prev_cnsdreq_id, '','N',:vo.prev_mn_respman_apnt_yn) */
	                                         CASE :vo.prev_cnsdreq_id
	                                           WHEN '' THEN 'N'
	                                         ELSE 
	                                           :vo.prev_mn_respman_apnt_yn
	                                         END
	                  , VC_CNSD_DEPT = /* decode(:vo.prev_cnsdreq_id,'',:vo.vc_cnsd_dept,'') */
	                                   CASE :vo.prev_cnsdreq_id
	                                     WHEN '' THEN :vo.vc_cnsd_dept
	                                   ELSE
	                                     ''
	                                   END	                                  
	                  , VC_CNSD_DEMND_DT = :vo.vc_cnsd_demnd_dt
	                  , VC_CNSD_DEMND_CONT = :vo.vc_cnsd_demnd_cont
	                  , VC_RESPMAN_APNT_YN = /* decode(:vo.prev_cnsdreq_id, '','N',:vo.prev_vc_respman_apnt_yn) */
	                                         CASE :vo.prev_cnsdreq_id
	                                           WHEN '' THEN 'N'
	                                         ELSE
	                                           :vo.prev_vc_respman_apnt_yn
	                                         END
		              , DMSTFRGN_GBN = :vo.dmstfrgn_gbn
		              , REQ_TITLE = :vo.req_title
		              #if(!$vo.lastbn_chge_yn.equals("") && $vo.lastbn_chge_yn)
		             	, LASTBN_CHGE_YN = :vo.lastbn_chge_yn
		              #else
		              	, LASTBN_CHGE_YN = 'N'
		              #end           
		              /* Sungwoo Commented 2014-07-04
		              , REQMAN_ID = :vo.reqman_id
		              , REQMAN_NM = :vo.reqman_nm
		              , REQ_DEPT = :vo.req_dept
		              , REQ_DEPT_NM = :vo.req_dept_nm
		              */
		              , REQ_DT = GETDATE()
		              , ACPT_DT = GETDATE()
		              , RE_DT = GETDATE()
		              , RE_DEMNDDAY = :vo.re_demndday
		              #if(!$vo.vo.cnsd_demnd_cont.equals("") && $vo.cnsd_demnd_cont)
		              	, CNSD_DEMND_CONT = CAST(:vo.cnsd_demnd_cont AS NTEXT)
		              #else
		              	, CNSD_DEMND_CONT = NULL
		              #end
		              , PREV_CNSDREQ_ID = :vo.prev_cnsdreq_id
		              , MOD_DT = GETDATE()
					  , MOD_ID = :vo.session_user_id
					  , MOD_NM  = :vo.session_user_nm	              
		              , PRGRS_STATUS = :vo.prgrs_status
		              , REBFR_APPRVL_YN = :vo.rebfr_apprvl_yn
		              , PLNDBN_REQ_YN = /* decode(:vo.plndbn_req_yn,null,'N','','N',:vo.plndbn_req_yn) */
		                                CASE :vo.plndbn_req_yn
		                                  WHEN NULL THEN 'N'
		                                  WHEN ''   THEN 'N'
		                                ELSE
		                                  :vo.plndbn_req_yn
		                                END
		              , LAST_CNSD_YN = /* decode(:vo.last_cnsd_yn,'','N',:vo.last_cnsd_yn) */
		                               CASE :vo.last_cnsd_yn
		                                 WHEN '' THEN 'N'
		                               ELSE
		                                 :vo.last_cnsd_yn
		                               END
		              , PLNDBN_CHGE_CONT = :vo.plndbn_chge_cont
		              , PUB_YN = /* decode(:vo.pub_yn,'','N',:vo.pub_yn) */
		                        CASE :vo.pub_yn
		                          WHEN '' THEN 'N'
		                        ELSE
		                          :vo.pub_yn
		                        END
				  WHERE 1=1 
					AND CNSDREQ_ID = :vo.cnsdreq_id		              
		    ]]>
		  </statement>
		</query>
		
		<!-- clm.manage.dropReqeust.update  d의뢰 Drop 처리 하다 //-->
		<query id="clm.manage.dropReqeust.update" isCamelCase="false">
		  <statement>
		    <![CDATA[
		         UPDATE TN_CLM_CONT_CNSDREQ
		          SET 
		               PRGRS_STATUS = :vo.prgrs_status
		              , MOD_DT = GETDATE()
					  , MOD_ID = :vo.session_user_id
					  , MOD_NM  = :vo.session_user_nm
					WHERE 1=1 
					AND CNSDREQ_ID = :vo.cnsdreq_id		              
		    ]]>
		  </statement>
		</query>
		
		<!-- 계약마스터 del_flag ='Y'  계약삭제 버튼 클릭시 -->
		<query id="clm.manage.deleteContractMaster" isCamelCase="false">
		  <statement>
		    <![CDATA[
		         UPDATE  TN_CLM_CONTRACT_MASTER SET
						DEL_YN = :vo.del_yn
						, DEL_DT = GETDATE()
						, DEL_ID = :vo.del_id
						, DEL_NM = :vo.del_nm
				WHERE 	1=1
				AND CNTRT_ID = :vo.cntrt_id
		    ]]>
		  </statement>
		</query>
		
		<!-- 계약 drop drop 사유 입력-->
		<query id="clm.manage.dropContract.update" isCamelCase="false">
		  <statement>
		    <![CDATA[
		         UPDATE  TN_CLM_CONTRACT_MASTER SET
						CNTRT_STATUS = :vo.cntrt_status
						, DEPTH_STATUS = :vo.depth_status
						, CNTRT_CHGE_DEMNDDAY = :vo.cntrt_chge_demndday
						, CNTRT_CHGE_DEMNDMAN_ID = :vo.cntrt_chge_demndman_id
						, CNTRT_CHGE_DEMNDMAN_NM = :vo.cntrt_chge_demndman_nm
						, CNTRT_CHGE_DEMND_DEPT_NM = :vo.cntrt_chge_demnd_dept_nm
						, CNTRT_CHGE_DEMNDMAN_JIKGUP_NM = :vo.cntrt_chge_demndman_jikgup_nm
						, CNTRT_CHGE_DEMND_CAUSE = :vo.cntrt_chge_demnd_cause
						, CNTRT_CHGE_PLNDDAY = :vo.cntrt_chge_plndday
				WHERE 	1=1
				AND CNTRT_ID = :vo.cntrt_id
		    ]]>
		  </statement>
		</query>	
		
		<query id="clm.manage.getDropDiv" isCamelCase="false" comment="의뢰에 포함된 모든 계약의 Drop여부를 리턴">
		  <statement>
		    <![CDATA[
		    	SELECT DECODE((SELECT COUNT(CNSDREQ_ID)
		    				     FROM TN_CLM_CONTRACT_CNSD A,
		    				          TN_CLM_CONTRACT_MASTER B
		    				    WHERE A.CNSDREQ_ID = :vo.cnsdreq_id
		    				      AND A.CNTRT_ID = B.CNTRT_ID
		    				      AND B.DEL_YN = 'N'),
		    				  (SELECT COUNT(CNSDREQ_ID)
		    				     FROM TN_CLM_CONTRACT_CNSD A,
		    				          TN_CLM_CONTRACT_MASTER B
		    				    WHERE A.CNSDREQ_ID = :vo.cnsdreq_id
		    				      AND A.CNTRT_ID = B.CNTRT_ID
		    				      AND B.DEL_YN = 'N'
		    				      AND B.DEPTH_STATUS = 'C02603'),
		    				   'Y', 'N') AS DROP_DIV
		    ]]>
		  </statement>
		</query>
		
		<query id="clm.manage.getHoldOffDiv" isCamelCase="false" comment="보류여부 리스트">
		  <statement>
		    <![CDATA[
		    	SELECT (CASE WHEN (SELECT COUNT(CNSDREQ_ID) AS HOLDOFF_CNT
				    			  FROM TN_CLM_CONT_CNSDREQ_HOLD
				    			 WHERE CNSDREQ_ID = :vo.prev_cnsdreq_id) > 0
				    		THEN 'Y'
				    		ELSE 'N'
				    	END) AS HOLDOFF_DIV,
						(CASE WHEN (select  COUNT(CNSDREQ_ID) AS ADMRETURN_CNT from TN_CLM_CONT_CNSDREQ_ADMRETURN
				    			 WHERE CNSDREQ_ID = :vo.prev_cnsdreq_id) > 0
				    		THEN 'Y'
				    		ELSE 'N'
				    	END) AS ADMRETURN_CNT
								
		    ]]>
		  </statement>
		</query>
		
		<query id="clm.manage.deferContract.update" isCamelCase="false">
		  <statement>
		    <![CDATA[
		         UPDATE  TN_CLM_CONTRACT_MASTER SET						
						DEPTH_STATUS = :vo.depth_status						
				WHERE 	1=1
				AND CNTRT_ID = :vo.cntrt_id
				/* --AND CNTRT_ID IN (													
						#foreach ($master_cntrt_id in $vo.arr_cntrt_id) 
							#if ($velocityCount	== 1 ) 
								'$master_cntrt_id'
							#else 
								, '$master_cntrt_id'
							#end 
						#end
						)
						*/ 
		    ]]>
		  </statement>
		</query>
		
		<query id="clm.manage.deleteCnsdreqRespMan" isCamelCase="false" comment="담당자 배정 삭제">
		  <statement>
		    <![CDATA[
		         DELETE TN_CLM_CONT_CNSDREQ_RESPMAN 
		         WHERE 1=1 
		         AND CNSDREQ_ID=:vo.cnsdreq_id
		    ]]>
		  </statement>
		</query>		
		
		<query id="clm.manage.listClmSpecialAttr" isCamelCase="false" comment="특화속성 가져오기 ">
		  <statement>
		    <![CDATA[
		       	select 
		       		B.ATTR_SEQNO AS ATTR_SEQNO		       		
		       	   	,B.CRTN_DEPTH AS CRTN_DETH
      				,B.ATTR_NM AS ATTR_NM
      				,A.MNDTRY_YN AS MNDTRY_YN
				from 
					TN_CLM_TYPE_SPCLINFO A
     				, TN_CLM_SPECIAL_ATTR B
				WHERE 	
				A.ATTR_SEQNO = B.ATTR_SEQNO
				AND A.CNCLSNPURPS_BIGCLSFCN = :cnclsnpurps_bigclsfcn
				AND A.CNCLSNPURPS_MIDCLSFCN = :cnclsnpurps_midclsfcn
				AND A.USE_YN <> 'N'
				ORDER BY /* DECODE(B.ATTR_SEQNO, '11', '1', '9', '2', '5', '3', '9') */
				      CASE A.ATTR_SEQNO
				           WHEN '11' THEN '1'
				           WHEN '9'  THEN '2'
				           WHEN '5'  THEN '3'
				         ELSE 
				           '7'
				         END
		    ]]>
		  </statement>
		</query>
		
		<query id="clm.manage.listTypeSpclinfo" isCamelCase="false" comment="특화정보 가져오기 ">
		  <statement>
		    <![CDATA[
		       	SELECT A.CNTRT_ID
      					,A.ATTR_SEQNO
      					,A.ATTR_CD
      					,A.ATTR_CONT
      					,B.ATTR_NM
      				/*   2번 7번 decode 변환 ,DECODE(A.ATTR_SEQNO,'2',DECODE(ATTR_CONT,'1','가능','2','불가능','3','조건부 가능','4','기타',ATTR_CONT),  REPLACE(REPLACE(REPLACE(A.ATTR_CONT, chr(13), '<br>'),chr(10),'<Br>'),'<br><Br>','<br>')) ATTR_VALUE */
      			  ,CASE WHEN A.ATTR_SEQNO = '2' THEN       			  
                    CASE WHEN :vo.session_user_locale = 'ko' THEN
                    	/* DECODE(ATTR_CONT,'1','가능','2','불가능','3','조건부 가능','4','기타',ATTR_CONT) */
                    	CASE ATTR_CONT
                    	  WHEN '1' THEN '가능'
                    	  WHEN '2' THEN '불가능'
                    	  WHEN '3' THEN '조건부 가능'
                    	  WHEN '4' THEN '기타'
                    	ELSE
                    	  ATTR_CONT
                    	END
                    WHEN :vo.session_user_locale = 'fr' THEN
                    	/* DECODE(ATTR_CONT,'1','Possible','2','Impossible','3','Soumis à conditions','4','Autres',ATTR_CONT) */
                    	CASE ATTR_CONT
                    	  WHEN '1' THEN 'Possible'
                    	  WHEN '2' THEN 'Impossible'
                    	  WHEN '3' THEN 'Soumis à conditions'
                    	  WHEN '4' THEN 'Autres'
                    	ELSE
                    	  ATTR_CONT
                    	END
                    WHEN :vo.session_user_locale = 'de' THEN
                    	/* DECODE(ATTR_CONT,'1','Möglich','2','Unmöglich','3','Bedingt','4','Sonstige',ATTR_CONT) */
                    	CASE ATTR_CONT
                    	  WHEN '1' THEN 'Möglich'
                    	  WHEN '2' THEN 'Unmöglich'
                    	  WHEN '3' THEN 'Bedingt'
                    	  WHEN '4' THEN 'Sonstige'
                    	ELSE
                    	  ATTR_CONT
                    	END
                    ELSE
                    	/* DECODE(ATTR_CONT,'1','Capable','2','Impossible','3','Conditional','4','Others',ATTR_CONT) */
                    	CASE ATTR_CONT
                    	  WHEN '1' THEN 'Capable'
                    	  WHEN '2' THEN 'Impossible'
                    	  WHEN '3' THEN 'Conditional'
                    	  WHEN '4' THEN 'Others'
                    	ELSE ATTR_CONT
                    	END
                    END
                  WHEN A.ATTR_SEQNO = '7' THEN
                  	CASE WHEN :vo.session_user_locale = 'ko' THEN
                  		/* DECODE(ATTR_CONT,'1','당사','2','업체','3','공동','4','N.A',ATTR_CONT) */
                        CASE ATTR_CONT
                    	  WHEN '1' THEN '당사'
                    	  WHEN '2' THEN '업체'
                    	  WHEN '3' THEN '공동'
                    	  WHEN '4' THEN 'N.A'
                    	ELSE
                    	  ATTR_CONT
                    	END
                    WHEN :vo.session_user_locale = 'fr' THEN
                  		/* DECODE(ATTR_CONT,'1','Samsung Electronics','2','Société','3','Collaboration','4','N.A',ATTR_CONT) */
                        CASE ATTR_CONT
                    	  WHEN '1' THEN 'Samsung Electronics'
                    	  WHEN '2' THEN 'Société'
                    	  WHEN '3' THEN 'Collaboration'
                    	  WHEN '4' THEN 'N.A'
                    	ELSE
                    	  ATTR_CONT
                    	END
                    WHEN :vo.session_user_locale = 'de' THEN
                  		/* DECODE(ATTR_CONT,'1','Samsung Electronics','2','Unternehmen','3','Zusammenarbeit','4','N.A',ATTR_CONT) */
                        CASE ATTR_CONT
                    	  WHEN '1' THEN 'Samsung Electronics'
                    	  WHEN '2' THEN 'Unternehmen'
                    	  WHEN '3' THEN 'Zusammenarbeit'
                    	  WHEN '4' THEN 'N.A'
                    	ELSE
                    	  ATTR_CONT
                    	END
                    ELSE
                        /* DECODE(ATTR_CONT,'1','Samsung Electronics','2','Company','3','Collaboration','4','N.A',ATTR_CONT) */
                    	CASE ATTR_CONT
                    	  WHEN '1' THEN 'Samsung Electronics'
                    	  WHEN '2' THEN 'Company'
                    	  WHEN '3' THEN 'Collaboration'
                    	  WHEN '4' THEN 'N.A'
                    	ELSE
                    	  ATTR_CONT
                    	END
                    END
                  ELSE                    
                    ISNULL(REPLACE(REPLACE(REPLACE(A.ATTR_CONT, CHAR(13), '<br>'),CHAR(10),'<Br>'),'<br><Br>','<br>'),'')                                        
                  END AS ATTR_VALUE  
				FROM TN_CLM_CONT_TYPE_SPCLINFO A    
   					 ,TN_CLM_SPECIAL_ATTR B
				WHERE 1=1 
				AND A.CNTRT_ID = :vo.cntrt_id
				#if ($vo.cnsd_status.equals("C04305") && $vo.plndbn_req_yn.equals("Y")) 
				AND A.ATTR_SEQNO IN ('11', '1', '9', '2', '5','6', '3', '7')					
				#else 
				AND A.ATTR_SEQNO IN ('11', '9')
				#end
				AND A.ATTR_SEQNO = B.ATTR_SEQNO				
				ORDER BY /* DECODE(A.ATTR_SEQNO, '11', '1', '9', '2', '5', '3', '7') */
				         CASE A.ATTR_SEQNO
				           WHEN '11' THEN '1'
				           WHEN '9'  THEN '2'
				           WHEN '5'  THEN '3'
				         ELSE 
				           '7'
				         END 
		    ]]>
		  </statement>
		</query>
		
		<query id="clm.manage.listTypeSpclinfoMod" isCamelCase="false" comment="특화정보 가져오기 ">
		  <statement>
		    <![CDATA[
		       	SELECT A.CNTRT_ID
      					,A.ATTR_SEQNO
      					,A.ATTR_CD
      					,A.ATTR_CONT   
      					,B.ATTR_NM
      					,A.ATTR_CONT AS ATTR_VALUE
				FROM TN_CLM_CONT_TYPE_SPCLINFO A    
   					 ,TN_CLM_SPECIAL_ATTR B
				WHERE 1=1 
				AND A.CNTRT_ID = :vo.cntrt_id	
				AND A.ATTR_SEQNO IN ('11', '9')			
				AND A.ATTR_SEQNO = B.ATTR_SEQNO				
				ORDER BY /* DECODE(A.ATTR_SEQNO, '11', '1', '9', '2', '5', '3', '7') */
				         CASE A.ATTR_SEQNO
				           WHEN '11' THEN '1'
				           WHEN '9'  THEN '2'
				           WHEN '5'  THEN '3'
				         ELSE 
				           '7'
				         END		       				
		    ]]>
		  </statement>
		</query>
		
		
		<!-- 20111016 김재원 , 심주완 , 코더 : 박병주 계약이름추가 사용 안함 -->
		<query id="clm.manage.listRelationContract_old_1125" isCamelCase="false" comment="연관계약 ">
			<statement>
		    <![CDATA[
		    		   
		    SELECT A.CNTRT_ID
                , A.PARENT_CNTRT_ID
                , A.REL_TYPE
                , CASE 	WHEN :vo.session_user_locale = 'ko' THEN D.CD_NM
                		WHEN :vo.session_user_locale = 'fr' THEN D.CD_NM_FRA
						WHEN :vo.session_user_locale = 'de' THEN D.CD_NM_DEU
						ELSE D.CD_NM_ENG
				  END AS REAL_TYPE_NM
                , A.REL_DEFN
                , A.EXPL
                , A.REG_ID
                , A.REG_NM
                , A.REG_DT
                , B.CNTRT_NM
                ,C.CNTRT_NM AS PARENT_CNTRT_NM
          FROM TN_CLM_RELATION_CONTRACT A
              , TN_CLM_CONTRACT_MASTER B
              , TN_CLM_CONTRACT_MASTER C
              , TB_COM_CD D
          WHERE 1=1
            AND A.CNTRT_ID = B.CNTRT_ID
            AND A.PARENT_CNTRT_ID = C.CNTRT_ID
            AND A.REL_TYPE = D.CD                      
            AND A.CNTRT_ID = :vo.cntrt_id
            #if (!$vo.parent_cntrt_id.equals("")) 
				AND A.PARENT_CNTRT_ID = :vo.parent_cntrt_id					
			#end      
            ORDER BY A.REL_TYPE ASC
		    ]]>
			</statement>
		</query>
		
		
		<query id="clm.manage.listRelationContract" isCamelCase="false" comment="연관계약 ">
			<statement>
		    <![CDATA[
		    SELECT 	A.CNTRT_ID , A.PARENT_CNTRT_ID , A.REL_TYPE, REAL_TYPE_NM, REL_DEFN,
		    		A.EXPL , A.REG_ID , A.REG_NM , A.REG_DT, PARENT_CNTRT_NM, REQ_TITLE, MAX(CNSDREQ_ID) CNSDREQ_ID
			FROM 
			(
					SELECT DISTINCT A.CNTRT_ID 
					     , A.PARENT_CNTRT_ID 
					     , A.REL_TYPE 
					     , CASE WHEN :vo.session_user_locale = 'ko' THEN D.CD_NM
                		        WHEN :vo.session_user_locale = 'fr' THEN D.CD_NM_FRA
						   ELSE D.CD_NM_ENG
				  	       END AS REAL_TYPE_NM 
					     , A.REL_DEFN 
					     , A.EXPL 
					     , A.REG_ID 
					     , A.REG_NM 
					     , A.REG_DT 
					     , C.CNTRT_NM AS PARENT_CNTRT_NM
					     , F.REQ_TITLE 
						 , F.CNSDREQ_ID
					  FROM TN_CLM_RELATION_CONTRACT A  
					     , TN_CLM_CONTRACT_MASTER C 
					     , TB_COM_CD D
					     , TN_CLM_CONTRACT_CNSD E
					     , TN_CLM_CONT_CNSDREQ F
					 WHERE 1=1 
					   AND A.PARENT_CNTRT_ID = C.CNTRT_ID 
					   AND A.REL_TYPE = D.CD
					   AND C.CNTRT_ID = E.CNTRT_ID
					   AND E.CNSDREQ_ID = F.CNSDREQ_ID
					   AND A.CNTRT_ID = :vo.cntrt_id
					#if (!$vo.parent_cntrt_id.equals("")) 
					   AND A.PARENT_CNTRT_ID = :vo.parent_cntrt_id					
					#end					
			) A
			GROUP BY 	A.CNTRT_ID , A.PARENT_CNTRT_ID , A.REL_TYPE, REAL_TYPE_NM, REL_DEFN, 
						A.EXPL , A.REG_ID , A.REG_NM , A.REG_DT, PARENT_CNTRT_NM, REQ_TITLE
			ORDER BY A.REL_TYPE ASC 
		 ]]>
			</statement>
		</query>

		
		<query id="clm.manage.getCntrtId" isCamelCase="false">
			<statement>
		    <![CDATA[		     
               SELECT 
              	TO_CHAR(GETDATE(),'YYYYmmddHH24MISSSSS') AS CNTRT_ID FROM   
              WHERE 1=1  
		    ]]>
		  	</statement>
		</query>
				
    	<query id="clm.manage.listConsultation" isCamelCase="false">
 	 		<statement>
		    <![CDATA[
		      SELECT *
		                  FROM(
		                    SELECT ROW_NUMBER () OVER (ORDER BY A.CNTRT_ID) RN
		                          ,COUNT(1) OVER() TOTAL_CNT
		                          ,A.*
					         FROM (
		      SELECT CNTRT_ID
		        ,CNTRT_NM
		        ,REGION_GBN
		        ,BIZ_CLSFCN
		        ,DEPTH_CLSFCN
		        ,CNCLSNPURPS_BIGCLSFCN
		        ,CNCLSNPURPS_MIDCLSFCN
		        ,CNCLSNPURPS_MIDCLSFCN_ETC
		        ,CNTRT_TRGT
		        ,CNTRT_TRGT_DET
		        ,PSHDBKGRND_PURPS
		        ,PAYMENT_GBN
		        ,ANTCPTNEFCT
		        ,CNTRTPERIOD_STARTDAY
		        ,CNTRTPERIOD_ENDDAY
		        ,SECRET_KEEPPERIOD
		        ,CNTRT_UNTPRC
		        ,CNTRT_AMT
		        ,CRRNCY_UNIT
		        ,PAYMENT_COND
		        ,ETC_MAIN_CONT
		        ,IF_SYS_CD
		        ,AUTO_RNEW_YN
		        ,EXPRT_NOTIDAY
		        ,OBLGT_LMT
		        ,SPCL_COND
		        ,CNCLSN_PLNDDAY
		        ,CNTRT_RESPMAN_ID
		        ,CNTRT_RESPMAN_NM
		        ,CNTRT_OPPNT_CD
		        ,SIGN_PLNDMAN_ID
		        ,SIGN_PLNDMAN_NM
		        ,SEAL_MTHD
		        ,CNTRT_CNCLSN_YN
		        ,SIGNMAN_ID
		        ,SIGNMAN_NM
		        ,OPPNT_SIGNMAN_NM
		        ,OPPNT_SIGNMAN_JIKGUP
		        ,OPPNT_SIGNMAN_DEPT
		        ,OPPNT_SIGNDAY
		        ,CNTRT_CNCLSNDAY
		        ,CPY_REGDAY
		        ,CNTRT_NO
		        ,LOAC
		        ,DSPT_RESOLT_MTHD
		        ,DSPT_RESOLT_MTHD_DET
		        ,ORG_ACPT_DLAY_CAUSE
		        ,ORG_ACPTDAY
		        ,ORG_TKOVMAN_ID
		        ,ORG_TKOVMAN_NM
		        ,ORG_HDOVMAN_ID
		        ,ORG_HDOVMAN_NM
		        ,ORG_STRG_POS
		        ,PRCS_DEPTH
		        ,DEPTH_STATUS
		        ,CNTRT_STATUS
		        ,REG_DT
		        ,REG_ID
		        ,REG_NM
		        ,MOD_DT
		        ,MOD_ID
		        ,MOD_NM
		        ,DEL_YN
		        ,DEL_DT
		        ,DEL_ID
		        ,DEL_NM
		        ,LOAC_ETC
		        ,CNTRT_CHGE_DEMNDDAY
		        ,CNTRT_CHGE_DEMNDMAN_ID
		        ,CNTRT_CHGE_DEMNDMAN_NM
		        ,CNTRT_CHGE_DEMND_CAUSE
		        ,CNTRT_CHGE_PLNDDAY
		        ,CNTRT_CHGE_CONF_YN
		        ,CNTRT_CHGE_CONFDAY
		        ,CNTRT_CHGE_CONFMAN_ID
		        ,CNTRT_CHGE_CONFMAN_NM
		        ,BFHDCSTN_MTNMAN_ID
		        ,BFHDCSTN_MTNMAN_NM
		        ,BFHDCSTN_MTNMAN_JIKGUP_NM
		        ,BFHDCSTN_MTN_DEPT_NM
		        ,BFHDCSTN_MTNMAN_EMAIL
		        ,BFHDCSTN_APBT_MTHD
		        ,BFHDCSTN_APBTMAN_ID
		        ,BFHDCSTN_APBTMAN_NM
		        ,BFHDCSTN_APBTMAN_JIKGUP_NM
		        ,BFHDCSTN_APBT_DEPT_NM
		        ,BFHDCSTN_APBTDAY
		        ,SEAL_RQSTDAY
		        ,SEAL_RQSTMAN_ID
		        ,SEAL_RQSTMAN_NM
		        ,SEAL_FFMTMAN_ID
		        ,SEAL_FFMTMAN_NM
		        ,SEAL_FFMTDAY
		        ,REG_OPERDIV
		           FROM TN_CLM_CONTRACT_MASTER
		           
		            ) A
						    ) B
		
						WHERE RN between :vo.start_index and :vo.end_index
		    ]]>
		  	</statement>
		</query>
		
		<!-- 의뢰보류 SEQ -->
		<query id="clm.manage.deferContCnsdreq.seqno" isCamelCase="false">
			<statement>
		    <![CDATA[		    	
		    	SELECT ISNULL(MAX(HOLD_SEQNO), 0) + 1 AS SEQNO 
		          FROM TN_CLM_CONT_CNSDREQ_HOLD
		    	 WHERE CNSDREQ_ID = :vo.cnsdreq_id
		    ]]>
		  	</statement>
		</query>
		
		<!-- 의뢰 보류  insert -->			
		<query id="clm.manage.deferContCnsdreq.insert" isCamelCase="false">
			<statement>
		    <![CDATA[		    	
		    	INSERT INTO TN_CLM_CONT_CNSDREQ_HOLD 
		    			(
		    			  CNSDREQ_ID
						, HOLD_SEQNO
						, HOLD_STARTDAY
						, HOLD_ENDDAY
						, HOLD_CAUSE
						, REG_DT
						, REG_ID
						, REG_NM		    	
		    	) VALUES (
		    			  :vo.cnsdreq_id
						, :vo.hold_seqno
						, GETDATE()
						, GETDATE()
						, :vo.hold_cause
						, GETDATE()
						, :vo.reg_id
						, :vo.reg_nm
		    	)
		    ]]>
		  	</statement>
		</query>
		<!--의로 보류 update -->
		<query id="clm.manage.deferContCnsdReqHold.update" isCamelCase="false">
			<statement>
		    <![CDATA[		    	
		    	UPDATE TN_CLM_CONT_CNSDREQ_HOLD 
		    	   SET HOLD_ENDDAY = GETDATE()
				     , MOD_DT = GETDATE()
					 , MOD_ID = :vo.mod_id
					 , MOD_NM = :vo.mod_nm
				WHERE 	1=1
				  AND CNSDREQ_ID = :vo.cnsdreq_id
				  AND HOLD_SEQNO = :vo.hold_seqno 
		    ]]>
		  	</statement>
		</query>		
		<!-- 보류  -->		
		<!-- 의뢰중 보류시 의뢰일자을 보류 해제일로 업데이트 함 -->
		<query id="clm.manage.deferContCnsdReq.update" isCamelCase="false">
			<statement>
		    <![CDATA[		    	
		    	UPDATE  TN_CLM_CONT_CNSDREQ SET						
						 REQ_DT = GETDATE()
						, MOD_DT = GETDATE()
						, MOD_ID = :vo.mod_id
						, MOD_NM = :vo.mod_nm
				WHERE 	1=1
				AND CNSDREQ_ID = :vo.cnsdreq_id				
		    ]]>
		  	</statement>
		</query>
		<!-- 의뢰중 보류시 의뢰일자을 보류 해제일로 업데이트 함 -->
		
		<!-- 의뢰 drop -->			
		<query id="clm.manage.dropRequest" isCamelCase="false">
			<statement>
		    <![CDATA[
		         UPDATE  TN_CLM_CONT_CNSDREQ SET
						 DEL_YN = :vo.del_yn
						, DEL_DT = GETDATE()
						, DEL_ID = :vo.del_id
						, DEL_NM = :vo.del_nm
				WHERE 	1=1
				AND CNSDREQ_ID = :vo.cnsdreq_id
		    ]]>
		  	</statement>
		</query>
		
		<!-- 의뢰 삭제버튼 클릭시  의뢰건 del_flag ='Y' -->			
		<query id="clm.manage.deleteContCnsdreq" isCamelCase="false">
			<statement>
		    <![CDATA[
		         UPDATE  TN_CLM_CONT_CNSDREQ SET
						 DEL_YN = :vo.del_yn
						, DEL_DT = GETDATE()
						, DEL_ID = :vo.del_id
						, DEL_NM = :vo.del_nm
				WHERE 	1=1
				AND CNSDREQ_ID = :vo.cnsdreq_id
		    ]]>
		  	</statement>
		</query>	
			
		<!--2011.09.07  계약 마스터 테이블  이하  //--> 		
		<!-- clm.manage.deleteContractCnsd -->
		<query id="clm.manage.deleteContractCnsd" isCamelCase="false" comment="계약 검토별 ">
			<statement>
		    <![CDATA[
		         DELETE
		           FROM TN_CLM_CONTRACT_CNSD
		         WHERE 1=1 
		         AND CNTRT_ID = :vo.cntrt_id
		         AND CNSDREQ_ID = :vo.cnsdreq_id
		    ]]>
		  	</statement>
		</query> 
		<!-- clm.manage.deleteContractCnsd -->
		<query id="clm.manage.modifyContractCnsd" isCamelCase="false" comment="계약 검토별 ">
			<statement>
		    <![CDATA[
		         UPDATE
		         	TN_CLM_CONTRACT_CNSD
		         SET
		         	REG_DT = GETDATE()
		         	,REG_ID = :vo.session_user_id
		         	,REG_NM = :vo.session_user_nm
		          	/*  --MOD_DT = GETDATE()
		         	,MOD_ID = :vo.session_user_id
		         	,MOD_NM = :vo.session_user_nm
		         	*/
		         WHERE 1=1 
		         AND CNTRT_ID = :vo.cntrt_id
		         AND CNSDREQ_ID = :vo.cnsdreq_id
		    ]]>
		  	</statement>
		</query>
		
		<query id="clm.manage.deleteContractAuthreq" isCamelCase="false" comment="권한요청">
			<statement>
		    <![CDATA[
		         DELETE
		           FROM TN_CLM_CONTRACT_AUTHREQ
		         WHERE 1=1
		         #if ($vo.tab_cnt != "1")
	    			AND CNTRT_ID IN (													
						#foreach ($master_cntrt_id in $vo.arr_cntrt_id) 
							#if ($velocityCount	== 1 ) 
								'$master_cntrt_id'
							#else 
								, '$master_cntrt_id'
							#end 
						#end
						) 
    			#else
    				AND CNTRT_ID IN (:vo.cntrt_id)
    			#end
		    ]]>
		  	</statement>
		</query>
		
		<query id="clm.manage.deleteContTypeSpclinfo" isCamelCase="false" comment="유형특화정보">
			<statement>
		    <![CDATA[
		         DELETE TN_CLM_CONT_TYPE_SPCLINFO
		           FROM  
		         WHERE 1=1
		         AND ATTR_SEQNO = :vo.attr_seqno
		         AND CNTRT_ID = :vo.cntrt_id
		    ]]>
		  	</statement>
		</query>
		
		<query id="clm.manage.deleteRelationContract" isCamelCase="false" comment="연관계약">
			<statement>
		    <![CDATA[
		         DELETE
		           FROM TN_CLM_RELATION_CONTRACT  
		         WHERE 1=1
		         	AND CNTRT_ID = :vo.cntrt_id		         	
		         	#if (!$vo.parent_cntrt_id.equals(""))
		         		AND PARENT_CNTRT_ID = :vo.parent_cntrt_id
		         	#end 
		    ]]>
		  	</statement>
		</query>		
		
		<query id="clm.manage.insertContractAuthreq" isCamelCase="false" comment="계약관리_계약_권한요청">
			<statement>
		    <![CDATA[
		         INSERT INTO TN_CLM_CONTRACT_AUTHREQ         
		         (
		         	CNTRT_ID
					,DEMND_SEQNO
					,DEMNDMAN_ID
					,DEMNDMAN_NM
					,DEMNDMAN_DEPT_NM					
					,TRGTMAN_ID	
					,TRGTMAN_NM
					,TRGTMAN_DEPT_NM
					,TRGTMAN_JIKGUP_NM				
					,RD_AUTH
					,AUTH_STARTDAY					
					,DEMND_STATUS
					,DEMND_DT
					,DEMND_GBN					
		         )VALUES(
		         	:vo.master_cntrt_id
					,:vo.demnd_seqno
					,:vo.demndman_id
					,:vo.demndman_nm
					,:vo.demndman_dept_nm					
					,:vo.trgtman_id		
					,:vo.trgtman_nm
					,:vo.trgtman_dept_nm	
					,:vo.trgtman_jikgup_nm		
					,:vo.rd_auth
					,:vo.auth_startday					
					,:vo.demnd_status					
					,GETDATE()
					,:vo.demnd_gbn					
		         )
		    ]]>
		  	</statement>
		</query>
		
		<query id="clm.manage.approvalCCinsertContractAuthreq" isCamelCase="false" comment="계약관리_결재자_권한요청">
			<statement>
			<![CDATA[
				MERGE INTO TN_CLM_CONTRACT_AUTHREQ A
					USING (
							SELECT CNTRT_ID, DEMNDMAN_ID 
							FROM TB_COM_USER U
							INNER JOIN 
							(SELECT :vo.master_cntrt_id AS CNTRT_ID, :vo.trgtman_id AS DEMNDMAN_ID ) A
							ON U.USER_ID = A.DEMNDMAN_ID
							WHERE U.COMP_CD = 'HQ'
							GROUP BY CNTRT_ID, DEMNDMAN_ID
						) B 
					ON A.CNTRT_ID = B.CNTRT_ID
					AND A.DEMNDMAN_ID = b.DEMNDMAN_ID
				WHEN NOT MATCHED THEN 
					INSERT 
						(
						CNTRT_ID
						,DEMND_SEQNO
						,DEMNDMAN_ID
						,DEMNDMAN_NM
						,DEMNDMAN_DEPT_NM
						,TRGTMAN_ID	
						,TRGTMAN_NM
						,TRGTMAN_DEPT_NM
						,TRGTMAN_JIKGUP_NM
						,RD_AUTH
						,AUTH_STARTDAY
						,DEMND_STATUS
						,DEMND_DT
						,DEMND_GBN
						,DEMND_CONT
					)VALUES(
						:vo.master_cntrt_id
						,(SELECT ISNULL(MAX(DEMND_SEQNO),0) + 1 FROM TN_CLM_CONTRACT_AUTHREQ WHERE CNTRT_ID = :vo.master_cntrt_id)
						,:vo.demndman_id
						,:vo.demndman_nm
						,:vo.demndman_dept_nm
						,:vo.trgtman_id		
						,:vo.trgtman_nm
						,(SELECT DEPT_NM_ENG
							FROM TB_COM_USER
							WHERE USER_ID = :vo.trgtman_id)	
						,(SELECT JIkGUP_NM_ENG
							FROM TB_COM_USER
							WHERE USER_ID = :vo.trgtman_id)
						,:vo.rd_auth
						,:vo.auth_startday
						,:vo.demnd_status
						,GETDATE()
						,:vo.demnd_gbn
						,:vo.demnd_cont
			         ) ;
		    ]]>
		  	</statement>
		</query>
		
		<!-- 권한요청 관련자 select -->
		<query id="clm.manage.listContractAuthreq" isCamelCase="false" comment="계약관리_계약_권한요청 - 관련자">
			<statement>
		    <![CDATA[
		    		SELECT		    			 
		    			  TRGTMAN_ID
						, TRGTMAN_NM
						, TRGTMAN_DEPT_NM
						, TRGTMAN_JIKGUP_NM	
						, MIN(DEMND_SEQNO) DEMND_SEQNO					    			 
		    		FROM TN_CLM_CONTRACT_AUTHREQ
		    	   WHERE DEL_YN='N'
		    		 AND DEMND_GBN = 'C04601'
		    		 AND DEMND_STATUS = 'C03702' 
		    			#if ($vo.status == "consider")
			    			AND CNTRT_ID IN (													
								#foreach ($master_cntrt_id in $vo.arr_cntrt_id) 
									#if ($velocityCount	== 1 ) 
										'$master_cntrt_id'
									#else 
									  , '$master_cntrt_id'
									#end 
								#end
								) 
		    			#else
		    				AND CNTRT_ID IN (:vo.cntrt_id)
		    			#end
		    		 GROUP BY  TRGTMAN_ID , TRGTMAN_NM , TRGTMAN_DEPT_NM , TRGTMAN_JIKGUP_NM	
		    			
		    ]]>
		  	</statement>
		</query>
		<!-- 의뢰건 보류 사유 select -->
		<query id="clm.manage.listCnsdreqHold" isCamelCase="false" comment="의뢰건 보류">
			<statement>
		    <![CDATA[
		    		SELECT A.CNSDREQ_ID
		    		      ,A.HOLD_SEQNO
		    		      ,A.HOLD_STARTDAY
		    		      ,A.HOLD_ENDDAY
		    		      ,A.HOLD_CAUSE
		    		      /* ,TO_CHAR(A.REG_DT,'YYYY-MM-DD') REG_DT */
		    		      ,CONVERT(VARCHAR, A.REG_DT, 120) AS REG_DT
		    		      ,A.REG_ID
		    		      ,A.REG_NM
		    		      ,A.MOD_DT
		    		      ,A.MOD_ID
		    		      ,A.MOD_NM
		    		      ,B.DEPT_NM
		    		      ,B.JIKGUP_NM
		    		  FROM (SELECT * FROM TN_CLM_CONT_CNSDREQ_HOLD A WHERE CNSDREQ_ID = :vo.cnsdreq_id) A, 
		    		       (SELECT USER_ID, USER_NM, DEPT_NM, JIKGUP_NM FROM TB_COM_USER) B
		    		WHERE A.REG_ID = B.USER_ID
		    		  AND A.HOLD_SEQNO = 1
		    		ORDER BY A.HOLD_SEQNO DESC
		    ]]>
		  	</statement>
		</query>
		
		<!-- 의뢰작성취소	재의뢰/최종본이뢰시	start -->
		<query id="clm.manage.saveCancelContCnsdreq" isCamelCase="false" comment="재의뢰 최종본의뢰 작성 취소 - 계약 검토의뢰 삭제 ">
			<statement>
		    <![CDATA[
		    		DELETE FROM
		    			TN_CLM_CONT_CNSDREQ
		    		WHERE 1=1 AND CNSDREQ_ID = :vo.cnsdreq_id		    		
		    ]]>
		  	</statement>
		</query>
		<query id="clm.manage.saveCancelContractCnsd" isCamelCase="false" comment="재의뢰 최종본의뢰 작성 취소 - 계약별 검토 삭제">
			<statement>
		    <![CDATA[
		    		DELETE FROM
		    			TN_CLM_CONTRACT_CNSD
		    		WHERE 1=1 AND CNSDREQ_ID = :vo.cnsdreq_id		    		
		    ]]>
		  	</statement>
		</query>
		<!-- 배정자 삭제 TN_CLM_CONT_CNSDREQ_RESPMAN -->
		<query id="clm.manage.saveCancelCnsdReqRespMan" isCamelCase="false" comment="재의뢰 최종본의뢰 작성 취소 - 배정자 삭제">
			<statement>
		    <![CDATA[
		    		DELETE FROM
		    			TN_CLM_CONT_CNSDREQ_RESPMAN
		    		WHERE 1=1 AND CNSDREQ_ID = :vo.cnsdreq_id		    		
		    ]]>
		  	</statement>
		</query>
		<!-- 의뢰작성취소	재의뢰/최종본이뢰시	end  -->
		
		<query id="clm.manage.insertContTypeSpclinfo" isCamelCase="false" comment="유형특화정보">
			<statement>
		    <![CDATA[
		         INSERT INTO TN_CLM_CONT_TYPE_SPCLINFO         
		         (
		         	CNTRT_ID
					,ATTR_SEQNO
					,ATTR_CD
					,ATTR_CONT
					,REG_DT
					,REG_ID
					,REG_NM 
		         )VALUES(
		         	:vo.cntrt_id
					,:vo.attr_seqno
					,:vo.attr_cd
					,:vo.attr_cont
					,GETDATE()
					,:vo.session_user_id
					,:vo.session_user_nm					
		         )
		    ]]>
		  	</statement>
		</query>	
 
		<query id="clm.manage.insertRelationContract" isCamelCase="false" comment="연관계약">
		  	<statement>
		    <![CDATA[
		         INSERT INTO TN_CLM_RELATION_CONTRACT         
		         (
		         	CNTRT_ID
					,PARENT_CNTRT_ID
					,REL_TYPE
					,EXPL
					,REL_DEFN
					,REG_DT
					,REG_ID
					,REG_NM 
		         )VALUES(
		         	:vo.cntrt_id
					,:vo.parent_cntrt_id
					,:vo.rel_type   
					,:vo.expl
					,:vo.rel_defn 
		         	,GETDATE()
				    ,:vo.session_user_id
				    ,:vo.session_user_nm
		         )
		    ]]>
		  	</statement>
		</query>
		
		<query id="clm.manage.updateRelKey" isCamelCase="false" comment="연관계약 KEY를 업데이트 함.">
		  	<statement>
		    <![CDATA[
		         UPDATE TN_CLM_RELATION_CONTRACT
                    SET CNTRT_ID = :vo.cntrt_id
                  WHERE CNTRT_ID = :vo.rel_up_cntrt_id
		    ]]>
		  	</statement>
		</query>
		
		<query id="clm.manage.insertContractCnsd" isCamelCase="false" comment="계약별검토 등록">
			<statement>
		    <![CDATA[
		         INSERT INTO TN_CLM_CONTRACT_CNSD         
		         (
					  CNSDREQ_ID,
					  CNTRT_ID,
					  CNSDMAN_ID,
					  CNSDMAN_NM,
					  CNSD_DT,
					  CNSD_OPNN,
					 
					  APBTMAN_ID,
					  APBTMAN_NM,
					  APBT_DT,
					  APBT_OPNN,
					  CNSD_STATUS,
					  RISK,
					  REG_DT,
					  REG_ID,
					  REG_NM,
					  COMP_CD,
					  COMP_NM
		         )VALUES(
					  :vo.cnsdreq_id,
					  :vo.cntrt_id,
					  :vo.cnsdman_id,
					  :vo.cnsdman_nm,
					  CONVERT(DATE, :vo.cnsd_dt),
					  CONVERT(NVARCHAR, :vo.cnsd_opnn),
					  
					  :vo.apbtman_id,
					  :vo.apbtman_nm,
					  CONVERT(DATE, :vo.apbt_dt),
					  :vo.apbt_opnn,
					  :vo.cnsd_status,
					  :vo.risk,
					  GETDATE(),
					  :vo.session_user_id,
					  :vo.session_user_nm,
					  :vo.session_comp_cd,
					  :vo.session_comp_nm		
		         )
		    ]]>
		  	</statement>
		</query>
		
		<query id="clm.manage.insertContractCnsdFinal_FOR_DB2_BACK" isCamelCase="false" comment="계약별검토 등록 의뢰 아이디를 가져온다. ">
			<statement>
		    <![CDATA[		    
		    	SELECT CNSDREQ_ID as V_NEW_CNSDREQ_ID FROM FINAL TABLE (
					  INSERT INTO TN_CLM_CONTRACT_CNSD
					        ( CNSDREQ_ID,
										  CNTRT_ID,
										  CNSDMAN_ID,
										  CNSDMAN_NM,
										  CNSD_DT,
										  CNSD_OPNN,					 
										  APBTMAN_ID,
										  APBTMAN_NM,
										  APBT_DT,
										  APBT_OPNN,
										  CNSD_STATUS,
										  RISK,
										  REG_DT,
										  REG_ID,
										  REG_NM
					        )
					        SELECT 
					          (SELECT
					                  CASE WHEN cnsdreq_id = ' ' THEN
					                    :vo.dmstfrgn_gbn + TO_CHAR(GETDATE(),'yyyyMMdd') + '001'
					                  ELSE					
					                    :vo.dmstfrgn_gbn + TO_CHAR(TO_NUMBER(SUBSTRING(cnsdreq_id,1,12))+1)
					                  END AS SEQNO
					           FROM (
				           			SELECT MAX(cnsdreq_id) cnsdreq_id FROM (
				                          SELECT ISNULL(MAX(SUBSTRING(cnsdreq_id,2,12)),' ') AS cnsdreq_id FROM
				                            tn_clm_contract_cnsd
				                            WHERE 1=1 AND SUBSTRING(CNSDREQ_ID,2,8) = TO_CHAR(GETDATE(),'yyyyMMdd')
				                            UNION 
				                          SELECT ISNULL(MAX(SUBSTRING(cnsdreq_id,2,12)),' ') AS cnsdreq_id FROM
				                             TN_CLM_CONT_CNSDREQ  
				                             WHERE 1=1 AND SUBSTRING(CNSDREQ_ID,2,8) = TO_CHAR(GETDATE(),'yyyyMMdd')
					                )
					           )
					          ) CNSDREQ_ID,         
					        			:vo.cntrt_id CNTRT_ID,
										  :vo.cnsdman_id CNSDMAN_ID,
										  :vo.cnsdman_nm   CNSDMAN_NM,
										  :vo.cnsd_dt CNSD_DT,
										  :vo.cnsd_opnn CNSD_OPNN,					 
										  :vo.apbtman_id APBTMAN_ID,
										  :vo.apbtman_nm   APBTMAN_NM,
										  :vo.apbt_dt  APBT_DT,
										  :vo.apbt_opnn APBT_OPNN,
										  :vo.cnsd_status CNSD_STATUS,
										  :vo.risk RISK,
										  GETDATE() AS REG_DT,
										  :vo.session_user_id REG_ID,
										  :vo.session_user_nm REG_NM)
		    ]]>
		  	</statement>
		</query>
		

		<query id="clm.manage.insertContractCnsdFinal" isCamelCase="false" comment="계약별검토 등록 의뢰 아이디를 가져온다. ">
			<statement>
		    <![CDATA[		    
		    	SELECT 
                             (SELECT
                                      CASE WHEN ISNULL(RTRIM(LTRIM(B.CNSDREQ_ID)),'') = '' THEN
                                        CONVERT(NVARCHAR, 'H') + CONVERT(NVARCHAR, REPLACE (CONVERT (NVARCHAR, GETDATE (), 23), '-', '')) + CONVERT(NVARCHAR, '001')
                                      ELSE                    
                                        CONVERT(NVARCHAR, 'H') + CONVERT (NVARCHAR, CONVERT (BIGINT, SUBSTRING (B.CNSDREQ_ID, 1, 12))+1)
                                      END AS SEQNO
                               FROM (
                                       SELECT MAX(A.CNSDREQ_ID) AS CNSDREQ_ID 
                                         FROM (
                                          SELECT ISNULL (MAX (SUBSTRING (CNSDREQ_ID, 2, 12)),' ') AS CNSDREQ_ID 
                                            FROM TN_CLM_CONTRACT_CNSD
                                           WHERE 1=1 
                                             AND SUBSTRING (CNSDREQ_ID, 2, 8) = CONVERT(NVARCHAR, REPLACE ( CONVERT (NVARCHAR, GETDATE (), 23), '-', ''))
                                           UNION 
                                          SELECT CONVERT(NVARCHAR, ISNULL (MAX (SUBSTRING (CNSDREQ_ID, 2, 12)),' ')) AS CNSDREQ_ID 
                                            FROM TN_CLM_CONT_CNSDREQ  
                                           WHERE 1=1 
                                             AND CONVERT(NVARCHAR, SUBSTRING (CNSDREQ_ID, 2, 8)) = CONVERT(NVARCHAR, REPLACE ( CONVERT (NVARCHAR, GETDATE (), 23), '-', ''))
                                         ) A
                                     ) B
                              ) AS CNSDREQ_ID
		    ]]>
		  	</statement>
		</query>
		
		<!-- 상위 키값을 넣기 위해서 조회를 해온다. -->
		<query id="clm.manage.setPrev_cnsdreq_id" isCamelCase="false">
			<statement>
		    <![CDATA[		    
		    	SELECT DISTINCT PREV_CNSDREQ_ID
                  FROM TN_CLM_CONT_CNSDREQ
                 WHERE CNSDREQ_ID = :vo.cnsdreq_id
		    ]]>
		  	</statement>
		</query>
		
		<!-- 상위 키값을 넣기 위해서 조회를 해온다. -->
		<query id="clm.manage.ListPrev_cnsdreq_id" isCamelCase="false">
			<statement>
		    <![CDATA[		    
		    	SELECT DISTINCT HQ_REQ_YN
                  FROM TN_CLM_CONTRACT_CNSD
                 WHERE CNSDREQ_ID = :vo.prev_cnsdreq_id
		    ]]>
		  	</statement>
		</query>
		
		
		<!-- 검토의뢰정보>연관계약정보 팝업계약 목록 clm.manage.popupListContract -->
		<query id="clm.manage.popupListContract" isCamelCase="false">
			<statement>
		    <![CDATA[
		   	  SELECT *
                FROM (
                      SELECT  ROWNUM RM
                            , COUNT(1) OVER() TOTAL_CNT
                            , TJ.*
                        FROM (
                                  SELECT G.*
	      			                   , CASE WHEN :vo.session_user_locale = 'ko' THEN H.CD_NM
	      			                   		  WHEN :vo.session_user_locale = 'fr' THEN H.CD_NM_FRA
	      			                   		  WHEN :vo.session_user_locale = 'de' THEN H.CD_NM_DEU
	                 	                      ELSE H.CD_NM_ENG
	       				                 END PRCS_DEPTH_NM
	      			                   , CASE WHEN :vo.session_user_locale = 'ko' THEN I.CD_NM
	      			                   		  WHEN :vo.session_user_locale = 'fr' THEN I.CD_NM_FRA
	      			                   		  WHEN :vo.session_user_locale = 'de' THEN I.CD_NM_DEU
	                 	  				      ELSE I.CD_NM_ENG
	       			                     END DEPTH_STATUS_NM
	    		                     FROM (
                                            SELECT F.* 
						                      FROM (
						                             SELECT D.CNSDREQ_ID
                                                           ,D.REQ_TITLE
                                                           ,D.REQMAN_ID
                                                           ,D.REQMAN_NM
                                                           ,D.REQ_DEPT_NM
                                                           ,D.REG_DT
                                                           ,D.CNTRT_ID
                                                           ,E.CNTRT_NM
                                                           ,E.BIZ_CLSFCN
                                                           ,E.BIZ_CLSFCN_NM
                                                           ,E.DEPTH_CLSFCN
                                                           ,E.DEPTH_CLSFCN_NM
                                                           ,E.PRCS_DEPTH
                                                           ,E.DEPTH_STATUS                                     
						                               FROM (
						                                     SELECT B.CNSDREQ_ID
						                                           ,B.REQ_TITLE
						                                           ,B.REQMAN_ID
						                                           ,B.REQMAN_NM
						                                           ,B.REQ_DEPT_NM
						                                           ,B.REG_DT
						                                           ,C.CNTRT_ID						                                
						                                       FROM (
						                                             SELECT CNSDREQ_ID
						                                                   ,REQ_TITLE
						                                                   ,REQMAN_ID
						                                                   ,REQMAN_NM
						                                                   ,REQ_DEPT_NM
						                                                   ,REG_DT
						                                               FROM (
						                                                     SELECT A.CNSDREQ_ID
						                                                           ,A.REQ_TITLE
						                                                           ,A.REQMAN_ID
						                                                           ,A.REQMAN_NM
						                                                           ,A.REQ_DEPT_NM
						                                                           ,TO_CHAR(A.REG_DT, 'YYYYMMDD') REG_DT
						                                                           ,ISNULL(B.C_CNT, 0) C_CNT
						                                                       FROM TN_CLM_CONT_CNSDREQ A
						                                                    ,(
						                                                       SELECT PREV_CNSDREQ_ID
						                                                             ,COUNT(*) AS C_CNT
						                                                         FROM TN_CLM_CONT_CNSDREQ
						                                                        WHERE PREV_CNSDREQ_ID IS NOT NULL
						                                                        GROUP BY PREV_CNSDREQ_ID
						                                                       ) B
						                                              WHERE A.CNSDREQ_ID = B.PREV_CNSDREQ_ID(+)
						                                                AND A.DEL_YN = 'N'
		                                                         #if ($vo.search_req_nm && !$vo.search_req_nm(""))
			                                                            AND A.REQMAN_NM LIKE :vo.search_req_nm +'%'	                	
		                                                         #end 
						                                              )
						                                       WHERE C_CNT = 0						                                       
						                                  ) B
						                                 ,TN_CLM_CONTRACT_CNSD C
						                            WHERE B.CNSDREQ_ID = C.CNSDREQ_ID
						                         ) D
						                        ,(
						                           SELECT CNTRT_ID
                                                         ,CNTRT_NM    
                                                         ,BIZ_CLSFCN
                                                         ,CASE WHEN :vo.session_user_locale = 'ko' THEN B.CD_NM
			              	  								   WHEN :vo.session_user_locale = 'fr' THEN B.CD_NM_FRA
			              	  								   WHEN :vo.session_user_locale = 'de' THEN B.CD_NM_DEU
			              	  								   ELSE B.CD_NM_ENG
			             								  END AS BIZ_CLSFCN_NM
                                                         ,DEPTH_CLSFCN
                                                         ,CASE WHEN :vo.session_user_locale = 'ko' THEN C.CD_NM
			              	  								   WHEN :vo.session_user_locale = 'fr' THEN C.CD_NM_FRA
			              	  								   WHEN :vo.session_user_locale = 'de' THEN C.CD_NM_DEU
			              	  								   ELSE C.CD_NM_ENG
			             								  END AS DEPTH_CLSFCN_NM
						                                 ,PRCS_DEPTH
						                                 ,DEPTH_STATUS                                             
						                             FROM TN_CLM_CONTRACT_MASTER A
                                                         ,TN_COM_CONTRACTTYPE_CD B
                                                         ,TN_COM_CONTRACTTYPE_CD C
						                            WHERE 1 = 1 
                                                      AND A.BIZ_CLSFCN = B.TYPE_CD
                                                      AND A.DEPTH_CLSFCN = C.TYPE_CD
						                           ) E
						                   WHERE D.CNTRT_ID = E.CNTRT_ID
                                           #if ($vo.search_cntrt_nm && !$vo.search_cntrt_nm(""))
			                                 AND E.CNTRT_NM LIKE '%' + :vo.search_cntrt_nm +'%'	                	
		                                   #end
						                   ORDER BY D.CNSDREQ_ID DESC 
						                ) F
                      ) G
                                 ,TB_COM_CD H
						         ,TB_COM_CD I
				     WHERE H.SYS_CD = 'LAS' 
			           AND H.GRP_CD = 'C025' 
			           AND G.PRCS_DEPTH = H.CD 
			           AND I.SYS_CD = 'LAS' 
			           AND I.GRP_CD = G.PRCS_DEPTH
			           AND G.DEPTH_STATUS = I.CD
			      	) TJ
           		) TK             
           WHERE TK.RM BETWEEN :vo.start_index and :vo.end_index
           
             
		    ]]>
		  </statement>
		</query>
		
		<query id="clm.manage.popupListContract1" isCamelCase="false">
			<statement>
		    <![CDATA[
		   	  SELECT *
                FROM (
                      SELECT  ROWNUM RM
                            , COUNT(1) OVER() TOTAL_CNT
                            , TJ.*
                        FROM (
                                  SELECT 
								       A.CNTRT_ID
								     , A.CNTRT_NM
								     , A.BIZ_CLSFCN
								     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	  						WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  						WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  						ELSE CD_NM_ENG
			             						END CD_NM
								          FROM TN_COM_CONTRACTTYPE_CD B 
								         WHERE B.TYPE_CD = A.BIZ_CLSFCN) AS BIZ_CLSFCN_NM
								     , A.DEPTH_CLSFCN
								     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	  						WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  						WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  						ELSE CD_NM_ENG
			             						END CD_NM
								          FROM TN_COM_CONTRACTTYPE_CD C 
								         WHERE C.TYPE_CD = A.DEPTH_CLSFCN) AS DEPTH_CLSFCN_NM
								     , A.PRCS_DEPTH
								     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              						WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              						WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              						ELSE CD_NM_ENG
			              					END CD_NM 
								          FROM TB_COM_CD D 
								         WHERE D.CD = A.PRCS_DEPTH) AS PRCS_DEPTH_NM
								     , A.DEPTH_STATUS
								     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
							              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
							              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
							              			ELSE CD_NM_ENG
							              		END CD_NM 
								          FROM TB_COM_CD E 
								         WHERE E.CD = A.DEPTH_STATUS) AS DEPTH_STATUS_NM
								     , TO_CHAR(A.REG_DT, 'YYYYMMDD') REG_DT
								     , A.CNTRT_RESPMAN_NM AS REQMAN_NM
								     , B.CNSDREQ_ID
								   FROM TN_CLM_CONTRACT_MASTER A
								   JOIN TN_CLM_CONTRACT_CNSD B ON A.CNTRT_ID = B.CNTRT_ID
								   JOIN TN_CLM_CONT_CNSDREQ C ON B.CNSDREQ_ID = C.CNSDREQ_ID
								  WHERE A.DEL_YN = 'N'
								    AND A.CNTRT_STATUS in( 'C02402','C02403','C02404','C02405')
								    AND A.REG_OPERDIV = :vo.dept
								    #if ($vo.search_cntrt_nm && !$vo.search_cntrt_nm(""))
			                                 AND A.CNTRT_NM LIKE '%' + :vo.search_cntrt_nm +'%'	                	
		                            #end
		                            #if ($vo.search_req_nm && !$vo.search_req_nm(""))
			                                 AND A.CNTRT_RESPMAN_NM LIKE :vo.search_req_nm +'%'	                	
		                            #end
		                            #if ($vo.rel_type1 == "C03201")
			                                 AND A.BIZ_CLSFCN IN ('T0101','T0102')	                	
		                            #end 
		                            ORDER BY CNTRT_ID DESC
                              ) TJ
           		) TK             
           WHERE TK.RM BETWEEN :vo.start_index and :vo.end_index
		    ]]>
		  </statement>
		</query>
		
		<query id="clm.manage.popupListContract4" isCamelCase="false">
			<statement>
		    <![CDATA[
		   	  SELECT *
                FROM (
                      SELECT  ROWNUM RM
                            , COUNT(1) OVER() TOTAL_CNT
                            , TJ.*
                        FROM (
                                  SELECT 
								       A.CNTRT_ID
								     , A.CNTRT_NM
								     , A.BIZ_CLSFCN
								     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	  						WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  						WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  						ELSE CD_NM_ENG
			             						END CD_NM
								          FROM TN_COM_CONTRACTTYPE_CD B 
								         WHERE B.TYPE_CD = A.BIZ_CLSFCN) AS BIZ_CLSFCN_NM
								     , A.DEPTH_CLSFCN
								     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	  						WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  						WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  						ELSE CD_NM_ENG
			             						END CD_NM
								          FROM TN_COM_CONTRACTTYPE_CD C 
								         WHERE C.TYPE_CD = A.DEPTH_CLSFCN) AS DEPTH_CLSFCN_NM
								     , A.PRCS_DEPTH
								     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
							              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
							              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
							              			ELSE CD_NM_ENG
							              		END CD_NM 
								          FROM TB_COM_CD D 
								         WHERE D.CD = A.PRCS_DEPTH) AS PRCS_DEPTH_NM
								     , A.DEPTH_STATUS
								     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
							              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
							              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
							              			ELSE CD_NM_ENG
							              		END CD_NM 
								          FROM TB_COM_CD E 
								         WHERE E.CD = A.DEPTH_STATUS) AS DEPTH_STATUS_NM
								     , TO_CHAR(A.REG_DT, 'YYYYMMDD') REG_DT
								     , A.CNTRT_RESPMAN_NM AS REQMAN_NM
								     , B.CNSDREQ_ID
								   FROM TN_CLM_CONTRACT_MASTER A
								   JOIN TN_CLM_CONTRACT_CNSD B ON A.CNTRT_ID = B.CNTRT_ID
								   JOIN TN_CLM_CONT_CNSDREQ C ON B.CNSDREQ_ID = C.CNSDREQ_ID
								  WHERE A.DEL_YN = 'N'
								    AND A.CNTRT_STATUS in( 'C02402','C02403','C02404','C02405')
								    AND A.REG_OPERDIV = :vo.dept
							         AND     (
						                         C.CNSDREQ_ID IN (
						                                        SELECT 	DISTINCT CNSD.CNSDREQ_ID
																FROM	TN_CLM_CONTRACT_CNSD CNSD, TN_CLM_CONTRACT_AUTHREQ AUTHREQ
																WHERE 	CNSD.CNTRT_ID = AUTHREQ.CNTRT_ID	
																AND		AUTHREQ.DEL_YN = 'N'
																AND 	AUTHREQ.DEMND_GBN = 'C04601'
																AND 	AUTHREQ.DEMND_STATUS = 'C03702'
																AND 	AUTHREQ.TRGTMAN_ID = :vo.session_user_id
						                                       )
						                         OR C.REQMAN_ID = :vo.session_user_id
									#if ($vo.session_manager_yn.equals("Y"))
						                         OR C.REQ_UP_DEPT LIKE '%' + :vo.session_dept_cd + '^%'
									#end
									#if ($vo.session_auth_apnt_yn.equals("Y"))
						                         OR C.COMP_CD = :vo.session_comp_cd
									#end
									            )
								    #if ($vo.search_cntrt_nm && !$vo.search_cntrt_nm(""))
			                                 AND A.CNTRT_NM LIKE '%' + :vo.search_cntrt_nm +'%'	                	
		                            #end
		                            #if ($vo.search_req_nm && !$vo.search_req_nm(""))
			                                 AND A.CNTRT_RESPMAN_NM LIKE :vo.search_req_nm +'%'	                	
		                            #end
		                            #if ($vo.rel_type1 == "C03201")
			                                 AND A.BIZ_CLSFCN IN ('T0101','T0102')	                	
		                            #end 
		                            ORDER BY CNTRT_ID DESC
                              ) TJ
           		) TK             
           WHERE TK.RM BETWEEN :vo.start_index and :vo.end_index
		    ]]>
		  </statement>
		</query>
		
		<!-- 검토의뢰정보>연관계약정보 팝업계약 목록 clm.manage.popupListContract2 (법무 담당자 로그인 시) -->
		<query id="clm.manage.popupListContract2" isCamelCase="false">
			<statement>
		    <![CDATA[
		   	  SELECT *
                FROM (
                      SELECT  ROWNUM RM
                            , COUNT(1) OVER() TOTAL_CNT
                            , TJ.*
                        FROM (
                                  SELECT   DISTINCT
									       A.CNTRT_ID
									     , A.CNTRT_NM
									     , A.BIZ_CLSFCN
									     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	  							WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  							WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  							ELSE CD_NM_ENG
			             							END CD_NM
									          FROM TN_COM_CONTRACTTYPE_CD B 
									         WHERE B.TYPE_CD = A.BIZ_CLSFCN) AS BIZ_CLSFCN_NM
									     , A.DEPTH_CLSFCN
									     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	  							WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  							WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  							ELSE CD_NM_ENG
			             							END CD_NM
									          FROM TN_COM_CONTRACTTYPE_CD C 
									         WHERE C.TYPE_CD = A.DEPTH_CLSFCN) AS DEPTH_CLSFCN_NM
									     , A.PRCS_DEPTH
									     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
								              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
								              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
								              			ELSE CD_NM_ENG
								              		END CD_NM 
									          FROM TB_COM_CD D 
									         WHERE D.CD = A.PRCS_DEPTH) AS PRCS_DEPTH_NM
									     , A.DEPTH_STATUS
									     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
								              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
								              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
								              			ELSE CD_NM_ENG
								              		END CD_NM 
									          FROM TB_COM_CD E 
									         WHERE E.CD = A.DEPTH_STATUS) AS DEPTH_STATUS_NM
									     , TO_CHAR(A.REG_DT, 'YYYYMMDD') REG_DT
									     , A.CNTRT_RESPMAN_NM AS REQMAN_NM
									     , A.REG_OPERDIV
									     , D.RESPMAN_ID
									     , B.CNSDREQ_ID
									   FROM TN_CLM_CONTRACT_MASTER A
									   JOIN TN_CLM_CONTRACT_CNSD B ON A.CNTRT_ID = B.CNTRT_ID
									   JOIN TN_CLM_CONT_CNSDREQ C ON B.CNSDREQ_ID = C.CNSDREQ_ID
									   JOIN TN_CLM_CONT_CNSDREQ_RESPMAN D ON C.CNSDREQ_ID = D.CNSDREQ_ID
									  WHERE A.DEL_YN = 'N'
									    AND C.DEL_YN = 'N'
									    AND A.CNTRT_STATUS in( 'C02402','C02403','C02404','C02405')
									  #if($vo.dept("B00000003"))
									    AND C.VC_CNSD_DEPT IS NOT NULL
									  #end
									  #if ($vo.search_cntrt_nm && !$vo.search_cntrt_nm(""))
			                                 AND A.CNTRT_NM LIKE '%' + :vo.search_cntrt_nm +'%'	                	
		                            #end
		                            #if ($vo.search_req_nm && !$vo.search_req_nm(""))
			                                 AND A.CNTRT_RESPMAN_NM LIKE :vo.search_req_nm +'%'	                	
		                            #end
		                             #if ($vo.rel_type1 == "C03201")
			                                 AND A.BIZ_CLSFCN IN ('T0101','T0102')	                	
		                            #end 
		                            ORDER BY CNTRT_ID DESC
									   
			      	) TJ
           		) TK             
           WHERE TK.RM BETWEEN :vo.start_index and :vo.end_index
           
             
		    ]]>
		  </statement>
		</query>
		
		<!-- 검토의뢰정보>연관계약정보 팝업계약 목록 clm.manage.popupListContract2 (시스템 담당자 로그인 시) -->
		<query id="clm.manage.popupListContract3" isCamelCase="false">
			<statement>
		    <![CDATA[
		   	  SELECT *
                FROM (
                      SELECT  ROWNUM RM
                            , COUNT(1) OVER() TOTAL_CNT
                            , TJ.*
                        FROM (
                                  SELECT   DISTINCT
									       A.CNTRT_ID
									     , A.CNTRT_NM
									     , A.BIZ_CLSFCN
									     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	  							WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  							WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  							ELSE CD_NM_ENG
			             							END CD_NM
									          FROM TN_COM_CONTRACTTYPE_CD B 
									         WHERE B.TYPE_CD = A.BIZ_CLSFCN) AS BIZ_CLSFCN_NM
									     , A.DEPTH_CLSFCN
									     , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	  							WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  							WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  							ELSE CD_NM_ENG
			             							END CD_NM
									          FROM TN_COM_CONTRACTTYPE_CD C 
									         WHERE C.TYPE_CD = A.DEPTH_CLSFCN) AS DEPTH_CLSFCN_NM
									     , A.PRCS_DEPTH
									     , (SELECT CD_NM 
									          FROM TB_COM_CD D 
									         WHERE D.CD = A.PRCS_DEPTH) AS PRCS_DEPTH_NM
									     , A.DEPTH_STATUS
									     , (SELECT CD_NM 
									          FROM TB_COM_CD E 
									         WHERE E.CD = A.DEPTH_STATUS) AS DEPTH_STATUS_NM
									     , TO_CHAR(A.REG_DT, 'YYYYMMDD') REG_DT
									     , A.CNTRT_RESPMAN_NM AS REQMAN_NM
									     , A.REG_OPERDIV
									     , D.RESPMAN_ID
									     , B.CNSDREQ_ID
									   FROM TN_CLM_CONTRACT_MASTER A
									   JOIN TN_CLM_CONTRACT_CNSD B ON A.CNTRT_ID = B.CNTRT_ID
									   JOIN TN_CLM_CONT_CNSDREQ C ON B.CNSDREQ_ID = C.CNSDREQ_ID
									   JOIN TN_CLM_CONT_CNSDREQ_RESPMAN D ON C.CNSDREQ_ID = D.CNSDREQ_ID
									  WHERE A.DEL_YN = 'N'
									    AND C.DEL_YN = 'N'
									    AND A.CNTRT_STATUS in( 'C02402','C02403','C02404','C02405')
									    AND D.RESPMAN_ID = :vo.user_id
									#if ($vo.search_cntrt_nm && !$vo.search_cntrt_nm(""))
			                            AND A.CNTRT_NM LIKE '%' + :vo.search_cntrt_nm +'%'	                	
		                            #end
		                            #if ($vo.search_req_nm && !$vo.search_req_nm(""))
			                            AND A.CNTRT_RESPMAN_NM LIKE :vo.search_req_nm +'%'	                	
		                            #end
		                             #if ($vo.rel_type1 == "C03201")
			                                 AND A.BIZ_CLSFCN IN ('T0101','T0102')	                	
		                            #end 
		                            ORDER BY CNTRT_ID DESC
			      	) TJ
           		) TK             
           WHERE TK.RM BETWEEN :vo.start_index and :vo.end_index
           
             
		    ]]>
		  </statement>
		</query>
		
		<!-- 
	 	* 결재관련시작
	 	-->
		<query id="clm.manage.detailConsiderationApprovalRequest" isCamelCase="false"  comment="검토의뢰 보기 ">
			<statement>
		   	<![CDATA[
			SELECT CNSDREQ_ID 
			     , REQ_TITLE
			     , MN_CNSD_DEPT
			     , REQMAN_NM
			     , REQ_DEPT_NM
			     , REQMAN_JIKGUP_NM
			     , CONVERT(VARCHAR, CONVERT(DATE, REQ_DT, 23)) AS REQ_DT
				 , CONVERT(VARCHAR, CONVERT(DATE, RE_DEMNDDAY, 23)) AS RE_DEMNDDAY
			     , CNSD_DEMND_CONT
		     FROM TN_CLM_CONT_CNSDREQ 
			WHERE CNSDREQ_ID = :vo.cnsdreq_id
		    ]]>
		  </statement>
		</query>
		
		<query id="clm.manage.listConsiderationApprovalContract" isCamelCase="false" comment="검토의뢰용계약목록">
		  	<statement>
		    <![CDATA[
	    	SELECT ROW_NUMBER () OVER (ORDER BY B.CNTRT_ID) RM
	    	     , B.CNTRT_ID
			  FROM TN_CLM_CONT_CNSDREQ A
			     , TN_CLM_CONTRACT_CNSD C
			     , TN_CLM_CONTRACT_MASTER B
			 WHERE A.CNSDREQ_ID = :vo.cnsdreq_id
			   AND A.DEL_YN = 'N'
			   AND A.CNSDREQ_ID = C.CNSDREQ_ID
			   AND B.CNTRT_ID = C.CNTRT_ID
			   AND B.DEL_YN = 'N'
			   AND B.CNTRT_STATUS <> 'C02406'
 	      ORDER BY B.CNTRT_ID ASC
		    ]]>
		  	</statement>
		</query>
		
		<query id="clm.manage.modifyConsiderationCntrtStatus" isCamelCase="false" comment="계약마스터상태수정">
		  	<statement>
		    <![CDATA[
		   	UPDATE TN_CLM_CONTRACT_MASTER
		   	   SET PRCS_DEPTH				= :vo.prcs_depth
			     , DEPTH_STATUS				= :vo.depth_status
			     , CNTRT_STATUS				= :vo.cntrt_status
		   	     , MOD_DT					= GETDATE()
		   	     , MOD_ID	 				= :vo.session_user_id
		       	 , MOD_NM    				= :vo.session_user_nm
		     WHERE CNTRT_ID	 				= :vo.cntrt_id
		       AND 1=1
		      ]]>
		  	</statement>
		</query>
		
		<query id="clm.manage.modifyDeptCnsdLeadTimeCnt" isCamelCase="false" commnet="현재 계약건의 계약체결에 소요된 시간 업데이트">
			<statement>
			<![CDATA[
				UPDATE TN_CLM_CONTRACT_DEPTCNSD 
				   SET CNT_LT = (SELECT dbo.COM_REQ_LT (CNSD_DT,GETDATE(),:vo.session_comp_cd) CNT_LT )
	        	 WHERE CNSDREQ_ID = (SELECT	MAX(CNSDREQ_ID) 
	    							   FROM TN_CLM_CONTRACT_DEPTCNSD
	    							  WHERE	CNTRT_ID = :vo.cntrt_id)
	         	   AND CNSD_DT IS NOT NULL
	         	   AND CNT_LT IS NULL
         	]]>
			</statement>
		</query>
		
		<query id="clm.manage.modifyDeptCnsdLeadTimeReg" isCamelCase="false" commnet="현재 계약건의 계약등록에 소요된 시간 업데이트">
			<statement>
			<![CDATA[
				UPDATE TN_CLM_CONTRACT_DEPTCNSD 
				   SET REG_LT = (SELECT dbo.COM_REQ_LT ((SELECT SEAL_RQSTDAY 
				                                           FROM TN_CLM_CONTRACT_MASTER 
				                                          WHERE CNTRT_ID = :vo.cntrt_id)
											              , GETDATE()
											              , :vo.session_comp_cd) REG_LT )
	        	  WHERE CNSDREQ_ID = (SELECT MAX(CNSDREQ_ID) 
	    								FROM TN_CLM_CONTRACT_DEPTCNSD
	    							   WHERE CNTRT_ID = :vo.cntrt_id)
	         	    AND CNSD_DT IS NOT NULL
	         		AND REG_LT IS NULL
         	]]>
			</statement>
		</query>
		
		<!-- 2012.08.13 개발, 라이선스 유형의 최초의뢰건일 경우 FAST_TRACK_DIV 컬럼값을 WAIT상태로 수정 added by hanjihoon -->
		<query id="clm.manage.modifyConsiderationApprove" isCamelCase="false" comment="검토의뢰로 상태값 변경">
		  	<statement>
		    <![CDATA[
		    	BEGIN
				    UPDATE TN_CLM_CONT_CNSDREQ
				       SET ACPT_DT      = GETDATE(),
				    	   PRGRS_STATUS = ISNULL((SELECT /*DECODE(C.CNCLSNPURPS_BIGCLSFCN,'T0301','C04203','T0303','C04203','C04203')*/
				    	                                 CASE C.CNCLSNPURPS_BIGCLSFCN
					                                       WHEN 'T0301' THEN 'C04203'
					                                       WHEN 'T0303' THEN 'C04203'
					                                     ELSE
					                                       'C04203'
					                                     END
				                                    FROM (SELECT MIN(SA.CNTRT_ID) CNTRT_ID
				                                            FROM TN_CLM_CONTRACT_CNSD SA,
                                                                 TN_CLM_CONTRACT_MASTER SB
                                                           WHERE SA.CNSDREQ_ID = :vo.cnsdreq_id 
                                                             AND SA.CNTRT_ID = SB.CNTRT_ID 
                                                             AND SB.DEL_YN = 'N' 
                                                             AND SB.DEPTH_STATUS NOT IN ('C02603')
                                                          ) B, 
				                                          TN_CLM_CONTRACT_MASTER C 
				                                   WHERE B.CNTRT_ID = C.CNTRT_ID  )
				                               ,PRGRS_STATUS)
					   #if(($vo.cnclsnpurps_bigclsfcn.equals("T0301") + $vo.cnclsnpurps_bigclsfcn.equals("T0303")) && $vo.region_gbn.equals("C01801"))
					   	    ,FAST_TRACK_DIV = /* DECODE(A.CNSDREQ_ID, A.FST_CNSDREQ_ID, 'W', '') */
					   	                    CASE CNSDREQ_ID
					   	                      WHEN FST_CNSDREQ_ID THEN 'W'
					   	                    ELSE 
					   	                      ''
					   	                    END
					   #end
				    WHERE CNSDREQ_ID = :vo.cnsdreq_id ;
			
				    UPDATE TN_CLM_CONTRACT_MASTER
				       SET DEPTH_STATUS = 'C02606', MOD_DT = GETDATE()
				     FROM TN_CLM_CONTRACT_MASTER A
				     WHERE EXISTS( SELECT * 
				                     FROM TN_CLM_CONTRACT_CNSD B 
				                    WHERE A.CNTRT_ID = B.CNTRT_ID 
				                      AND B.CNSDREQ_ID = :vo.cnsdreq_id  
				                      AND A.DEL_YN = 'N'
				                  )
				       AND DEPTH_STATUS NOT IN ('C02603')
				END;
		      ]]>
		  	</statement>
		</query>
		
		<query id="clm.manage.listConsiderationAttachFileInfo" isCamelCase="false" comment="결재용첨부파일리스트">
			<statement>
		    <![CDATA[
		   	SELECT '1'    		 	AS FILETYPE  	/*--의뢰 계약서 파일 */
			      , COUNT(1) OVER() AS FILECNT
			      , FILE_ID
			      , ORG_FILE_NM
			  FROM TN_COM_ATTACH 
			 WHERE FILE_BIGCLSFCN = 'F012'
			   AND FILE_MIDCLSFCN = 'F01202'
			   AND FILE_SMLCLSFCN = 'F0120201'
			   AND REF_KEY = :vo.cntrt_id + '@' + :vo.cnsdreq_id
			   AND DEL_YN = 'N'
			   --AND SYS_CD = 'LAS'
			 UNION ALL  
			   SELECT '2'     		AS FILETYPE		/*--의뢰 별첨 파일 */
			      , COUNT(1) OVER() AS FILECNT
			      , FILE_ID
			      , ORG_FILE_NM
			  FROM TN_COM_ATTACH 
			 WHERE FILE_BIGCLSFCN = 'F012'
			   AND FILE_MIDCLSFCN = 'F01202'
			   AND FILE_SMLCLSFCN = 'F0120208'
			   AND REF_KEY = :vo.cntrt_id + '@' + :vo.cnsdreq_id
			   AND DEL_YN = 'N'
			   --AND SYS_CD = 'LAS'
			 UNION ALL  
			 SELECT '3'     		AS FILETYPE  /*--의뢰 사전검토파일 */
			      , COUNT(1) OVER() AS FILECNT
			      , FILE_ID
			      , ORG_FILE_NM
			  FROM TN_COM_ATTACH 
			 WHERE FILE_BIGCLSFCN = 'F012'
			  AND FILE_MIDCLSFCN = 'F01201'
			  AND FILE_SMLCLSFCN = 'F0120101'
			  AND REF_KEY = :vo.cntrt_id
			  AND DEL_YN = 'N'
			  --AND SYS_CD = 'LAS'
			 UNION ALL  
			 SELECT '4'     		AS FILETYPE   /*--의뢰 단가 파일 */
			      , COUNT(1) OVER() AS FILECNT
			      , FILE_ID
			      , ORG_FILE_NM
			  FROM TN_COM_ATTACH 
			 WHERE FILE_BIGCLSFCN = 'F012'
			   AND FILE_MIDCLSFCN = 'F01202'
			   AND FILE_SMLCLSFCN = 'F0120211'
			   AND REF_KEY = :vo.cntrt_id
			   AND DEL_YN = 'N'
			   --AND SYS_CD = 'LAS'
			 UNION ALL  
			 SELECT '5'     		AS FILETYPE	/*--의뢰 기타 파일 */
			      , COUNT(1) OVER() AS FILECNT
			      , FILE_ID
			      , ORG_FILE_NM
			  FROM TN_COM_ATTACH 
			 WHERE FILE_BIGCLSFCN = 'F012'
			   AND FILE_MIDCLSFCN = 'F01202'
			   AND FILE_SMLCLSFCN = 'F0120205'
			   AND REF_KEY = :vo.cntrt_id + '@' + :vo.cnsdreq_id
			   AND DEL_YN = 'N'
			   --AND SYS_CD = 'LAS'
			ORDER BY FILETYPE
		      ]]>
		  	</statement>
		</query>
		
		
		<query id="clm.manage.modifyConsiderationReqStatus" isCamelCase="false" comment="계약의뢰상태수정">
		  	<statement>
		    <![CDATA[
		   	UPDATE TN_CLM_CONT_CNSDREQ
		   	   SET PRGRS_STATUS				= :vo.prgrs_status
		   	     , MOD_DT					= GETDATE()
		   	     , MOD_ID	 				= :vo.session_user_id
		       	 , MOD_NM    				= :vo.session_user_nm
		     WHERE CNSDREQ_ID 				= :vo.cnsdreq_id
		      ]]>
		  	</statement>
		</query>
		
		
		<query id="clm.manage.getButtonControl" isCamelCase="false">
 	 		<statement>
		    <![CDATA[
		    	SELECT LAS_BUT_FLAGS(
			    						'LAS'			,
			    						:vo.top_role 	,
			    						:vo.blngt_orgnz ,
			    						:vo.cnsdreq_id  ,
			    						:vo.session_user_id
		    						)		    	
		    ]]>
		  	</statement>
		</query>
		
		<query id="clm.manage.selectCnsdreqRespMan" isCamelCase="false">
 	 		<statement>
		    <![CDATA[
		    	SELECT * 
		    	  FROM TN_CLM_CONT_CNSDREQ_RESPMAN
		    	 WHERE 1=1 
		    	   AND CNSDREQ_ID = :vo.prev_cnsdreq_id	    	
		    ]]>
		  	</statement>
		</query>
		
		
		
		
		<query id="clm.manage.insertCnsdreqRespMan" isCamelCase="false">
 	 		<statement>
		    <![CDATA[
		    	INSERT INTO TN_CLM_CONT_CNSDREQ_RESPMAN  
						(
							 CNSDREQ_ID
							,RESPMAN_ID
							,RESP_DEPT
							,RESPMAN_NM
							,RESPMAN_JIKGUP_NM
							,ASGN_DT
							,ASGNMAN_ID
							,ASGNMAN_NM
							,MAIN_CNSD_YN
							,AUTO_APBT_YN
				        ) VALUES (
				           :vo.cnsdreq_id
				          ,:vo.respman_id
				          ,:vo.resp_dept
				          ,:vo.respman_nm
				          ,:vo.respman_jikgup_nm
				          ,GETDATE()
				          ,:vo.mod_id
				          ,:vo.mod_nm
				          ,:vo.main_cnsd_yn
				          ,:vo.auto_apbt_yn
				        ) 		    	
		    ]]>
		  	</statement>
		</query>	
		
		
		<query id="clm.contractmanager.modifyRespmanCnsdreq" isCamelCase="false" comment="법무담당자 지정">
            <statement>
            <![CDATA[
            UPDATE TN_CLM_CONT_CNSDREQ
               SET PRGRS_STATUS = :vo.chg_prgrs_status
               	  ,MOD_DT = GETDATE()
               	  ,MOD_ID = :vo.mod_id
				  ,MOD_NM = :vo.mod_nm
             	  ,MN_RESPMAN_APNT_YN = 'Y'
				  ,VC_RESPMAN_APNT_YN = 'Y'
             WHERE CNSDREQ_ID = :vo.cnsdreq_id               
            ]]>
            </statement>
        </query>
        
        <!-- 보류이력 SQL -->
        <query id="clm.manage.listDeferHis" isCamelCase="false">
			<statement>
			<![CDATA[
					SELECT A.CNSDREQ_ID
				      ,B.CR_FLAN_NM
				      ,TO_CHAR(A.HOLD_STARTDAY,'yyyy-MM-dd') HOLD_STARTDAY
      				  ,TO_CHAR(A.HOLD_ENDDAY,'yyyy-MM-dd') HOLD_ENDDAY				      
				      ,REPLACE(REPLACE(REPLACE(A.HOLD_CAUSE, CHAR(13), '<br>'), CHAR(10),'<Br>'),'<br><Br>','<br>') AS HOLD_CAUSE
				      ,A.REG_NM
				      FROM TN_CLM_CONT_CNSDREQ_HOLD A
				      ,(SELECT CNSD_LEVEL AS RM
				              ,CNSDREQ_ID
				              , CASE WHEN :vo.session_user_locale = 'ko' THEN
				              		'[' + CNSD_LEVEL + '차 의뢰' + DECODE(PLNDBN_REQ_YN, 'Y', '-최종본]', ']')
				              	ELSE
				              		CASE WHEN CNSD_LEVEL = '1' THEN '[' + CNSD_LEVEL + 'st Request' + DECODE(PLNDBN_REQ_YN, 'Y', '-Final Version]', ']')
				              			 WHEN CNSD_LEVEL = '2' THEN '[' + CNSD_LEVEL + 'nd Request' + DECODE(PLNDBN_REQ_YN, 'Y', '-Final Version]', ']')
				              			 WHEN CNSD_LEVEL = '3' THEN '[' + CNSD_LEVEL + 'rd Request' + DECODE(PLNDBN_REQ_YN, 'Y', '-Final Version]', ']')
				              		 	 ELSE '[' + CNSD_LEVEL + 'th Request' + DECODE(PLNDBN_REQ_YN, 'Y', '-Final Version]', ']')
				              		END
				              	END AS CR_FLAN_NM
				              FROM  TN_CLM_CONT_CNSDREQ WHERE DEL_YN = 'N'
								      START WITH  CNSDREQ_ID = :vo.cnsdreq_id
								CONNECT BY PRIOR  PREV_CNSDREQ_ID = CNSDREQ_ID
				       )B     
				WHERE A.CNSDREQ_ID = B.CNSDREQ_ID
			]]>
			</statement>
		</query>       
        
        <!-- 검토이력 정보 CONT 수정 by JOON 04/12/2014 -->
		<query id="clm.manage.listReqContractReview" isCamelCase="false">
			<statement>
			<![CDATA[
				SELECT    CNSDREQ_ID
				        , CR_FLAN_NM
				        , CR_FLAG, TITLE
				        , MAN_ID, MAN_NM
				        , DEPT
				        , DEPT_NM
				        , CONVERT(CHAR(10), REG_DT, 23) AS REG_DT /*YYYY-MM-DD*/
				        , REPLACE(CONVERT(VARCHAR(8000), CONT), 'frm', 'selmsfrm') as CONT
				        , CNSD_DEPT
				        , RM
				        , CNTRT_INFO_GBN
				        , PLNDBN_REQ_YN
				        , CNSD_DEPT_OPNN
				        , :vo.dept_div AS DEPT_DIV
				        ,ISNULL( CASE :vo.dept_div
				            WHEN 'VC' THEN VC_CNSD_APBT
				          ELSE 
				            MN_CNSD_APBT 
				          END, '') AS CNSD_APBT
				        ,ISNULL( CASE :vo.dept_div
				            WHEN 'VC' THEN VC_APBT_DT
				          ELSE 
				            MN_APBT_DT  
				          END, '') AS APBT_DT
				        ,ISNULL( CASE :vo.dept_div
				            WHEN 'VC' THEN VC_APBTMAN_NM
				          ELSE 
				            MN_APBTMAN_NM
				          END, '') AS APBTMAN_NM
				        , LASTBN_CHGE_YN_NM
				        , PLNDBN_CHGE_CONT
				        , CNSDMAN_NM
				        , CNSD_DEPT_NM
				        , CNSD_JIKGUP_NM
				        , CNSD_DT
				        , nm
				  FROM  (
				          SELECT * FROM (
				          SELECT  CNSD_LEVEL RM
				          		  , A.CNSDREQ_ID
				                  , CASE WHEN CNSD_LEVEL = '1' THEN '[' + CAST(CNSD_LEVEL AS NVARCHAR) + 'st Request' + ']'
			                  		 	 WHEN CNSD_LEVEL = '2' THEN '[' + CAST(CNSD_LEVEL AS NVARCHAR) + 'nd Request' + ']'
			                  		 	 WHEN CNSD_LEVEL = '3' THEN '[' + CAST(CNSD_LEVEL AS NVARCHAR) + 'rd Request' + ']'
			                  		 	 ELSE '[' + CAST(CNSD_LEVEL AS NVARCHAR) + 'th Request' + ']'
			                  		END AS CR_FLAN_NM
				                  , 'CONSULT' AS CR_FLAG
				                  , '' AS CNTRT_ID
				                  , REQ_TITLE AS TITLE
				                  , REQMAN_ID AS MAN_ID
				                  , REQMAN_NM AS MAN_NM
				                  , REQ_DEPT AS DEPT
				                  , REQ_DEPT_NM AS DEPT_NM
				                  , ACPT_DT REG_DT
				                  , CNSD_DEMND_CONT AS CONT
				                  , '' AS CNSD_DEPT
				                  , '' AS CNTRT_INFO_GBN
				                  , PLNDBN_REQ_YN
				                  , PRGRS_STATUS AS STATUS
				                  , REQMAN_NM+'/'+REQMAN_JIKGUP_NM+'/'+REQ_DEPT_NM as nm
				                  , '' AS CNSD_DEPT_OPNN
				                  , '' AS MN_CNSD_APBT
				                  , '' AS VC_CNSD_APBT
				            	  , '' AS MN_APBT_DT
				            	  , '' AS VC_APBT_DT
				            	  , '' AS MN_APBTMAN_NM
				            	  , '' AS VC_APBTMAN_NM
				            	  , (CASE WHEN LASTBN_CHGE_YN = 'Y' THEN 'YES' 
				            	  		WHEN LASTBN_CHGE_YN = 'N' THEN 'NO' ELSE '' END) AS LASTBN_CHGE_YN_NM
				            	  , PLNDBN_CHGE_CONT
				            	  , '' AS CNSDMAN_NM
				            	  , REQ_DEPT_NM AS CNSD_DEPT_NM
				            	  , REQMAN_JIKGUP_NM AS CNSD_JIKGUP_NM
				            	  , '' AS CNSD_DT
				            FROM  TN_CLM_CONT_CNSDREQ A,
				            (SELECT CNSDREQ_ID FROM DBO.[COM.GET_LINK_CNSDREQ_ID]( :vo.cnsdreq_id )) FB
				          WHERE A.PRGRS_STATUS IN ( SELECT CD 
				                                      FROM TB_COM_CD 
				                                     WHERE SYS_CD = 'LAS' 
				                                       AND GRP_CD = 'C042' )
				            AND A.DEL_YN = 'N'	
							AND A.CNSDREQ_ID = FB.CNSDREQ_ID		
				) SA
				UNION ALL
				          SELECT  F.* 
				          		  , H.CNSD_OPNN AS CNSD_DEPT_OPNN
				          		  , G.APBT_OPNN AS MN_CNSD_APBT
				            	  , H.APBT_OPNN AS VC_CNSD_APBT
               					  , CONVERT(CHAR(10), G.APBT_DT, 23) AS MN_APBT_DT /*YYYY-MM-DD*/
               					  , CONVERT(CHAR(10), H.APBT_DT, 23) AS VC_APBT_DT /*YYYY-MM-DD*/
				            	  , G.APBTMAN_NM AS MN_APBTMAN_NM
				            	  , H.APBTMAN_NM AS VC_APBTMAN_NM
				            	  , '' AS LASTBN_CHGE_YN_NM
				            	  , '' AS PLNDBN_CHGE_CONT
				            	  , H.CNSDMAN_NM
				            	  , (SELECT DEPT_NM
				            	       FROM TB_COM_USER
				            	      WHERE USER_ID =  F.MAN_ID) CNSD_DEPT_NM
				            	  , (SELECT JIKGUP_NM
				            	       FROM TB_COM_USER
				            	      WHERE USER_ID =  F.MAN_ID) CNSD_JIKGUP_NM
				            	  , CONVERT(CHAR(10), H.CNSD_DT, 23) AS CNSD_DT /*YYYY-MM-DD*/
			                FROM  	 (SELECT  D.CNSD_LEVEL AS RM
							          		  , A.CNSDREQ_ID
							          		  , CASE WHEN D.CNSD_LEVEL = '1' THEN '[' + CAST(D.CNSD_LEVEL AS NVARCHAR) + 'st Reply' + DBO.DECODE3(PLNDBN_REQ_YN, 'Y', '-Final Version]', ']')
						          		  			 WHEN D.CNSD_LEVEL = '2' THEN '[' + CAST(D.CNSD_LEVEL AS NVARCHAR) + 'nd Reply' + DBO.DECODE3(PLNDBN_REQ_YN, 'Y', '-Final Version]', ']')
						          		  			 WHEN D.CNSD_LEVEL = '3' THEN '[' + CAST(D.CNSD_LEVEL AS NVARCHAR) + 'rd Reply' + DBO.DECODE3(PLNDBN_REQ_YN, 'Y', '-Final Version]', ']')
						          		  			 ELSE '[' + CAST(D.CNSD_LEVEL AS NVARCHAR) + 'th Reply' + DBO.DECODE3(PLNDBN_REQ_YN, 'Y', '-Final Version]', ']')
						          		  		END AS CR_FLAN_NM
							                  , 'REPLY__' AS CR_FLAG
			                          		  , B.CNTRT_ID AS CNTRT_ID
							                  , B.CNTRT_NM AS TITLE
							                  , (CASE WHEN A.CNSDMAN_ID IS NULL THEN A.APBTMAN_ID
													ELSE A.CNSDMAN_ID END) MAN_ID
							                  , (CASE WHEN A.CNSDMAN_ID IS NULL THEN A.APBTMAN_NM
													ELSE A.CNSDMAN_NM END) MAN_NM
							                  , D.MN_CNSD_DEPT DEPT
							                  , ff.DEPT_NM DEPT_NM
							                  , ISNULL(A.APBT_DT, A.CNSD_DT) REG_DT
							                  , A.CNSD_OPNN AS CONT
							                  , D.VC_CNSD_DEPT AS CNSD_DEPT
							                  , B.CNTRT_INFO_GBN
							                  , D.PLNDBN_REQ_YN							                  
							                  , A.CNSD_STATUS AS STATUS
							                  , DBO.DECODE3(ff.comp_cd,'C10',ff.user_nm, (CASE WHEN A.CNSDMAN_ID IS NULL THEN A.APBTMAN_NM ELSE A.CNSDMAN_NM END)+'/'+ ff.JIKGUP_NM+'/'+ ff.DEPT_NM )as nm
							            FROM  TN_CLM_CONTRACT_CNSD A 
							            	JOIN 
							                  TN_CLM_CONTRACT_MASTER B ON A.CNTRT_ID = B.CNTRT_ID
							                RIGHT OUTER JOIN    
							                  TN_CLM_CONT_CNSDREQ D ON D.CNSDREQ_ID = A.CNSDREQ_ID
							                JOIN 
							                  TB_COM_CD E ON D.COMP_CD = E.CD
							                JOIN
							                  TB_COM_USER ff ON ff.USER_ID = A.CNSDMAN_ID
							          WHERE  
							            A.CNTRT_ID = :vo.cntrt_id             
							            AND  A.CNSD_STATUS = 'C04305'
							            AND  E.GRP_CD = 'COMP2'
							            )F LEFT OUTER JOIN
			                    TN_CLM_CONTRACT_CNSD G ON F.CNSDREQ_ID = G.CNSDREQ_ID AND F.CNTRT_ID = G.CNTRT_ID
			                    LEFT OUTER JOIN
			                    TN_CLM_CONTRACT_DEPTCNSD H ON F.CNSDREQ_ID = H.CNSDREQ_ID
			                    							AND F.CNTRT_ID = H.CNTRT_ID
			                    							AND F.CNSD_DEPT = H.CNSD_DEPT
				UNION ALL
				          SELECT  F.* 
				          		  , '' AS CNSD_DEPT_OPNN
				          		  , '' AS MN_CNSD_APBT
				            	  , '' AS VC_CNSD_APBT
               					  , '' AS MN_APBT_DT
               					  , '' AS VC_APBT_DT
				            	  , '' AS MN_APBTMAN_NM
				            	  , '' AS VC_APBTMAN_NM
				            	  , '' AS LASTBN_CHGE_YN_NM
				            	  , '' AS PLNDBN_CHGE_CONT
				            	  , '' CNSDMAN_NM
				            	  , (SELECT DEPT_NM
				            	       FROM TB_COM_USER
				            	      WHERE USER_ID =  F.MAN_ID) CNSD_DEPT_NM
				            	  , (SELECT JIKGUP_NM
				            	       FROM TB_COM_USER
				            	      WHERE USER_ID =  F.MAN_ID) CNSD_JIKGUP_NM
				            	  , '' AS CNSD_DT
			                FROM  	 (SELECT  D.CNSD_LEVEL AS RM
							          		  , D.CNSDREQ_ID
							          		  , CASE WHEN D.CNSD_LEVEL = '1' THEN '[' + CAST(D.CNSD_LEVEL AS NVARCHAR) + 'st Holding' + ']'
						          		  			 WHEN D.CNSD_LEVEL = '2' THEN '[' + CAST(D.CNSD_LEVEL AS NVARCHAR) + 'nd Holding' + ']'
						          		  			 WHEN D.CNSD_LEVEL = '3' THEN '[' + CAST(D.CNSD_LEVEL AS NVARCHAR) + 'rd Holding' + ']'
						          		  			 ELSE '[' + CAST(D.CNSD_LEVEL AS NVARCHAR) + 'th Holding' + ']'
						          		  		END AS CR_FLAN_NM
							                  , 'RESHOLD' AS CR_FLAG
			                          		  , B.CNTRT_ID AS CNTRT_ID
							                  , B.CNTRT_NM AS TITLE
							                  , C.REG_ID MAN_ID
							                  , C.REG_NM MAN_NM
							                  , D.MN_CNSD_DEPT DEPT
							                  , (SELECT  DEPT_NM FROM TB_COM_USER WHERE (USER_ID =  C.REG_ID)) AS DEPT_NM
							                  , C.REG_DT REG_DT
							                  , C.HOLD_CAUSE  AS CONT
							                  , D.VC_CNSD_DEPT AS CNSD_DEPT
							                  , B.CNTRT_INFO_GBN
							                  , D.PLNDBN_REQ_YN
							                  , A.CNSD_STATUS AS STATUS
							                  , C.REG_NM+'/'+(SELECT jikgup_nm FROM TB_COM_USER WHERE USER_ID =  C.REG_ID)+'/'+(SELECT dept_nm FROM TB_COM_USER WHERE USER_ID =  C.REG_ID) as nm
							            FROM  TN_CLM_CONTRACT_CNSD A 
							            	JOIN 
							                  TN_CLM_CONTRACT_MASTER B ON A.CNTRT_ID = B.CNTRT_ID  
							                RIGHT OUTER JOIN
							                  TN_CLM_CONT_CNSDREQ D ON D.CNSDREQ_ID = A.CNSDREQ_ID
							                JOIN
							                  TN_CLM_CONT_CNSDREQ_HOLD C ON C.CNSDREQ_ID = D.CNSDREQ_ID
							          WHERE C.HOLD_SEQNO = '1'
							            AND  A.CNTRT_ID = :vo.cntrt_id
							            )F
				/* admin reply 추가 시작 */
				UNION ALL
					SELECT  
						H.* 
					, '' AS CNSD_DEPT_OPNN 
					, '' AS MN_CNSD_APBT 
					, '' AS VC_CNSD_APBT 
					, '' AS MN_APBT_DT 
					, '' AS VC_APBT_DT 
					, '' AS MN_APBTMAN_NM 
					, '' AS VC_APBTMAN_NM 
					, '' AS LASTBN_CHGE_YN_NM 
					, '' AS PLNDBN_CHGE_CONT 
					, '' CNSDMAN_NM 
					,(SELECT DEPT_NM FROM TB_COM_USER WHERE USER_ID = H.MAN_ID) CNSD_DEPT_NM 
					, (SELECT JIKGUP_NM FROM TB_COM_USER WHERE USER_ID = H.MAN_ID) CNSD_JIKGUP_NM 
					, '' AS CNSD_DT 
							FROM  	 
							(
								SELECT  
									D.CNSD_LEVEL AS RM
									, D.CNSDREQ_ID
									, CASE WHEN D.CNSD_LEVEL = '1' THEN '[' + CAST(D.CNSD_LEVEL AS NVARCHAR) + 'st Admin Reply' + ']'
											WHEN D.CNSD_LEVEL = '2' THEN '[' + CAST(D.CNSD_LEVEL AS NVARCHAR) + 'nd Admin Reply' + ']'
											WHEN D.CNSD_LEVEL = '3' THEN '[' + CAST(D.CNSD_LEVEL AS NVARCHAR) + 'rd Admin Reply' + ']'
											ELSE '[' + CAST(D.CNSD_LEVEL AS NVARCHAR) + 'th Admin Reply' + ']'
									  END AS CR_FLAN_NM
									, 'ZADMIN_REPLY' AS CR_FLAG
									, B.CNTRT_ID AS CNTRT_ID
									, B.CNTRT_NM AS TITLE
									, C.REG_ID MAN_ID
									, C.REG_NM MAN_NM
									, D.MN_CNSD_DEPT DEPT
									, E.DEPT_NM AS DEPT_NM
									, C.REG_DT REG_DT
									, CAST(C.RET_CAUSE AS NVARCHAR(1000)) AS CONT
									, D.VC_CNSD_DEPT AS CNSD_DEPT
									, B.CNTRT_INFO_GBN
									, D.PLNDBN_REQ_YN
									, A.CNSD_STATUS AS STATUS
									, C.REG_NM+'/'+(SELECT jikgup_nm FROM TB_COM_USER WHERE USER_ID = C.REG_ID)+'/'+(SELECT dept_nm FROM TB_COM_USER WHERE USER_ID = C.REG_ID) as nm 
								FROM  
									TN_CLM_CONTRACT_CNSD A 
									JOIN 
									TN_CLM_CONTRACT_MASTER B ON A.CNTRT_ID = B.CNTRT_ID
									LEFT OUTER JOIN
									TN_CLM_CONT_CNSDREQ D ON D.CNSDREQ_ID = A.CNSDREQ_ID
									JOIN
									TN_CLM_CONT_CNSDREQ_ADMRETURN C ON C.CNSDREQ_ID = D.CNSDREQ_ID
									LEFT OUTER JOIN
									TB_COM_USER E ON C.REG_ID = E.USER_ID
								WHERE C.RET_SEQNO = '1'
									AND  A.CNTRT_ID =  :vo.cntrt_id
									
							) H						
								/* admin reply 추가 끝 */	            
				        ) TA
				        
			  ORDER BY  RM, CR_FLAG
			]]>
			</statement>
		</query>
		
		<!-- 2014-08-11 Kevin commented. 전혀 쓰잘데기 없는 쿼리. 계약 상세 볼때마다 로그를 찍다니. 쓸데도 없으면서. -->
		<!-- <query id="clm.manage.insertConsiderationLog" isCamelCase="false" comment="상세조회 로그">
            <statement>
            <![CDATA[
            INSERT INTO TN_CLM_RDLOG(
			                         RD_ID,
			                         INFO_GBN,
			                         REL_KEY,
			                         REL_INFO_NM,
			                         RDMAN_ID,
			                         RDMAN_NM,
			                         RDMAN_JIKGUP_NM,
			                         RD_DEPT_NM
		    ) 
		    SELECT
		    	( SELECT (REPLACE(CONVERT(VARCHAR, GETDATE(),23),'-','') + 
		       		     CASE  
		       		       WHEN COUNT(*)=0 THEN /* LPAD ('1', 7, '0') */ dbo.Function_lpad('1',7,'0')
			               WHEN REPLACE(CONVERT(VARCHAR, GETDATE(),23),'-','') = SUBSTRING(MAX(RD_ID),0,9)  THEN /* LPAD ( (SUBSTRING (MAX (RD_ID), 7) + 1), 7, '0')*/  dbo.Function_lpad((SUBSTRING (MAX (RD_ID), 9, 16) + 1) ,7, '0')
			             ELSE 
			               /* LPAD ('1', 7, '0') */  dbo.Function_lpad('1',7,'0')
			             END) 
			        FROM TN_CLM_RDLOG
			    ) AS RD_ID, 
		      	'C05801' INFO_GBN,
		      	B.CNSDREQ_ID REL_KEY,
		      	B.REQ_TITLE REL_INFO_NM,
		      	:vo.session_user_id RDMAN_ID, 
		      	:vo.session_user_nm RDMAN_NM,
		      	:vo.session_jikgup_nm RDMAN_JIKGUP_NM,
		      	:vo.session_dept_nm RD_DEPT_NM
		    FROM (SELECT CNSDREQ_ID,
		                 REQ_TITLE 
		            FROM TN_CLM_CONT_CNSDREQ 
		           WHERE CNSDREQ_ID = :vo.cnsdreq_id ) B
		           
            ]]>
            </statement>
        </query> -->
        
        <query id="clm.manage.modifyRegMaster" isCamelCase="false" comment="체결후등록값으로 변경">
            <statement>
            <![CDATA[
            UPDATE TN_CLM_CONTRACT_MASTER
               SET CNTRT_INFO_GBN = 'C05404'
                  ,exprt_notiday          = :vo.regNotiday_before
                  ,seal_ffmtman_id        = :vo.regSeal_ffmtman_id
                  ,seal_ffmtman_nm        = :vo.regSeal_ffmtman_nm
                  ,seal_ffmtman_jikgup_nm = :vo.regSeal_ffmtman_jikgup_nm
                  ,seal_ffmt_dept_nm      = :vo.regSeal_ffmt_dept_nm
                  , MOD_DT = GETDATE()
		     WHERE CNTRT_ID = :vo.cntrt_id
            ]]>
            </statement>
        </query>
        
		<query id="clm.manage.preventDuplication" isCamelCase="false" comment="의뢰 중복방지 구분값 조회 ">
		  	<statement>
		    <![CDATA[
				SELECT (CASE WHEN (SELECT DEPTH_STATUS
									 FROM TN_CLM_CONTRACT_MASTER
								    WHERE CNTRT_ID = :vo.cntrt_id) IN ('C02607','C02608','C02609') 
							 THEN 'N'
							 ELSE 'Y'
						END) AS DUP_DIV
	      	]]>
		  	</statement>
		</query>
		
		<query id="clm.manage.verifyFinalConsideration" isCamelCase="false" comment="최종본검토 가능여부 체크 ">
		  	<statement>
		    <![CDATA[
				SELECT B.CNSDREQ_ID
				  FROM TN_CLM_CONT_CNSDREQ A,
				  	   TN_CLM_CONT_CNSDREQ B
				 WHERE A.CNSDREQ_ID = :vo.cnsdreq_id
				   AND A.FST_CNSDREQ_ID = B.FST_CNSDREQ_ID
				   AND B.PRGRS_STATUS = 'C04207'
	      	]]>
		  	</statement>
		</query>
		
		<query id="clm.manage.insertCopyCnsd" isCamelCase="false" comment="검토의뢰복사">
			<statement>
		    <![CDATA[
			DECLARE @RC int
			DECLARE @V_CNSDREQ_ID nvarchar(40) = :vo.c_cnsdreq_id
			DECLARE @V_USER_ID nvarchar(40) = :vo.reqman_id
			DECLARE @V_DEPT_NM nvarchar(70) = :vo.reqdept_nm
			DECLARE @V_CNTRT_RESP_UP_DEPT nvarchar(40) = :vo.cntrt_resp_up_dept
			DECLARE @V_RE_DEMNDDAY nvarchar(20) = :vo.re_demndday
			DECLARE @V_COMP_CD nvarchar(10) = :vo.session_comp_cd
			DECLARE @O_MSG nvarchar(100)
			 
			EXECUTE @RC = DBO.[SP_CNSD_COPY_REQ] 
			   @V_CNSDREQ_ID
			  ,@V_USER_ID
			  ,@V_DEPT_NM
			  ,@V_CNTRT_RESP_UP_DEPT
			  ,@V_RE_DEMNDDAY
			  ,@V_COMP_CD
			  ,@O_MSG OUTPUT
			SELECT @O_MSG as o_msg
			]]>
		  	</statement>
		</query>
		
		<query id="clm.returnContractMaster.modify" isCamelCase="false">
			<statement>
    		<![CDATA[
				 UPDATE TN_CLM_CONTRACT_MASTER
				  SET 
				  	SECRET_KEEPPERIOD = :vo.secret_keepperiod				  	
				  	,  AUTO_RNEW_YN = :vo.auto_rnew_yn
				  	#if($vo.plndbn_req_yn.equals("Y"))
				  	, OBLGT_LMT = :vo.oblgt_lmt
				  	, SPCL_COND = :vo.spcl_cond
				  	, LOAC = :vo.loac
				  	, LOAC_ETC = :vo.loac_etc
				  	, DSPT_RESOLT_MTHD = :vo.dspt_resolt_mthd  
				  	, DSPT_RESOLT_MTHD_DET = :vo.dspt_resolt_mthd_det
				  	#end
				WHERE 1=1
					AND CNTRT_ID = :vo.cntrt_id 
			 ]]>
			</statement>
		</query>



<query id="clm.contractmanager.approvalOpnnDeptCnsdinsert" isCamelCase="false" comment="계약관리_계약별_부서검토  - 승인 - insert">
			<statement>
    		<![CDATA[
        	 	INSERT INTO TN_CLM_CONTRACT_DEPTCNSD
        	 		(
	        	 		CNSDREQ_ID
	        	 		, COMP_CD
						, CNTRT_ID
						, CNSD_DEPT
						, CNSDMAN_ID
						, CNSDMAN_NM
						, CNSD_DT
						, CNSD_OPNN	
						, APBT_MEMO
						, MAIN_MATR_CONT
               	    	, APBTMAN_ID
               	    	, APBTMAN_NM
               	    	, APBT_DT
               	    	, APBT_OPNN
						, CNSD_STATUS
						, REQ_LT
        	 		) VALUES (
        	 		 :vo.cnsdreq_id
        	 		,:vo.session_comp_cd
        	 		,:vo.master_cntrt_id
        	 		,:vo.cnsd_dept
        	 		,:vo.deptcnsd_cnsdman_id 
        	 		,:vo.deptcnsd_cnsdman_nm
        	 		,GETDATE()
        	 		
        	 	#if ($vo.active_cntrt_id.equals($vo.master_cntrt_id))
        	 		,:vo.cnsd_opnn  /* ,:vo.deptcnsd_cnsd_opnn */
        	 		,:vo.apbt_memo
        	 		,:vo.main_matr_cont
        	 	#else
        	 		,''
        	 		,''
        	 		,''
        	 	#end
        	 		
				#if ($vo.top_role.equals("RA01"))
               	    ,:vo.mod_id
               	    ,:vo.mod_nm
               	    ,GETDATE()
               	    ,:vo.apbt_opnn
				#else
        	 		,''
        	 		,''
        	 		,''
        	 		,''
				#end
					,:vo.cnsd_status
				#if ($vo.cnsd_status.equals("C04305"))
               	    ,(dbo.COM_REQ_LT((SELECT REQ_DT FROM TN_CLM_CONT_CNSDREQ WHERE CNSDREQ_ID = :vo.cnsdreq_id),GETDATE(), :vo.session_auth_comp_cd ))
				#else
        	 		,''
				#end
        	 		)
		    ]]>
			</statement>
		</query>


<!-- 수정  TN_CLM_CONTRACT_CNSD 계약관리_계약별_검토 -->
		<query id="clm.returnContractCnsd.modify" isCamelCase="false" comment="임시저장 버튼 그룹장 사용하는경우 종합검토만 업테이트 ">
			<statement>
    		<![CDATA[
    		BEGIN
        	 UPDATE TN_CLM_CONTRACT_CNSD
        	    SET  CNSD_OPNN = :vo.cnsd_opnn  
        	    #if($vo.top_role.equals("RA02") + $vo.page_div.equals("RESP"))
        	    	, CNSD_MEMO = :vo.cnsd_memo        	    	
        	    	, CNSDMAN_ID = :vo.cnsdman_id
					, CNSDMAN_NM = :vo.cnsdman_nm
					, CNSD_DT = GETDATE()					
					, CNSD_STATUS = :vo.cnsd_status
				#end
              WHERE 1=1
              	AND CNSDREQ_ID = :vo.cnsdreq_id
				AND CNTRT_ID = :vo.cntrt_id ;
				
        	 UPDATE TN_CLM_CONTRACT_DEPTCNSD
        	    SET  CNSD_OPNN = :vo.cnsd_opnn
        	    #if($vo.top_role.equals("RA02") + $vo.page_div.equals("RESP"))
        	        , CNSDMAN_ID = :vo.cnsdman_id
					, CNSDMAN_NM = :vo.cnsdman_nm
					, CNSD_DT = GETDATE()
					#if ($vo.cnsd_status.equals("C04305"))
               	    ,REQ_LT = dbo.COM_REQ_LT((SELECT REQ_DT FROM TN_CLM_CONT_CNSDREQ WHERE CNSDREQ_ID = :vo.cnsdreq_id),GETDATE(),COMP_CD)
					#end
				#end
              WHERE 1=1
              	AND CNSDREQ_ID = :vo.cnsdreq_id
              	AND CNTRT_ID = :vo.cntrt_id
              	AND CNSD_DEPT = :vo.deptcnsd_cnsd_dept ;
			END;
		    ]]>
			</statement>
		</query>

<query id="clm.contractmanager.approvalOpnnCnsd" isCamelCase="false" comment="계약관리_계약별_검토 - C04305 최종 검토완료">
            <statement>
            <![CDATA[
            UPDATE TN_CLM_CONTRACT_CNSD
               SET CNSD_STATUS = :vo.cnsd_status
               	  ,APBTMAN_ID = :vo.mod_id
               	  ,APBTMAN_NM = :vo.mod_nm
               	  ,APBT_DT = GETDATE()
               	  ,APBT_OPNN = :vo.apbt_opnn
               	/* --  ,CNSD_OPNN = :vo.cnsd_opnn
       	    	#if($vo.top_role.equals("RA02") + $vo.page_div.equals("RESP"))
       	    	  ,CNSD_MEMO = :vo.cnsd_memo  
				  ,CNSDMAN_ID = :vo.deptcnsd_cnsdman_id
				  ,CNSDMAN_NM = :vo.deptcnsd_cnsdman_nm
				  ,CNSD_DT = GETDATE()
				 #end */
				  ,MOD_DT = GETDATE()
				  ,MOD_ID = :vo.mod_id
				  ,MOD_NM = :vo.mod_nm
			 WHERE 1=1
			 AND CNSDREQ_ID = :vo.cnsdreq_id
			                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     
            ]]>
            </statement>
        </query>

<query id="clm.contractmanager.changeCnsdreqStatus" isCamelCase="false" comment="계약관리_계약_검토의뢰 - 진행상태 변경">
            <statement>
            <![CDATA[
            UPDATE TN_CLM_CONT_CNSDREQ
               SET PRGRS_STATUS = CASE WHEN :vo.chg_prgrs_status IN ('C04206', 'C04205', 'C04207') 
               								THEN :vo.chg_prgrs_status 
               								ELSE CASE WHEN (MN_RESPMAN_APNT_YN = 'Y' OR VC_RESPMAN_APNT_YN = 'Y') 
               												THEN 'C04204' 
               												ELSE 'C04203' 
               									 END
               					  END
				  ,MOD_DT = GETDATE()
				  ,MOD_ID = :vo.mod_id
				  ,MOD_NM = :vo.mod_nm
				#if ($vo.chg_prgrs_status.equals("C04207"))
				  ,RE_DT = GETDATE()
				#end
			 WHERE CNSDREQ_ID = :vo.cnsdreq_id
            ]]>
            </statement>
        </query>

<query id="clm.contractmanager.changeMasterStatus" isCamelCase="false" comment="계약관리_계약_마스터 단계상태 변경">
            <statement>
            <![CDATA[
            UPDATE TN_CLM_CONTRACT_MASTER
               SET DEPTH_STATUS = :vo.chg_depth_status, MOD_DT = GETDATE()
			 WHERE DEPTH_STATUS != 'C02603'
			   AND CNTRT_ID = :vo.master_cntrt_id
            ]]>
            </statement>
        </query>

<query id="clm.returnDeptCnsdApbt.modifyAll" isCamelCase="false">
			<statement>
    		<![CDATA[
        	 UPDATE TN_CLM_CONTRACT_DEPTCNSD
        	    SET 
					  APBTMAN_ID	= :vo.deptcnsd_apbtman_id
					, APBTMAN_NM	= :vo.deptcnsd_apbtman_nm
				#if (!$vo.deptcnsd_apbtman_id.equals(""))
					, APBT_DT		= GETDATE()
				#end
					, APBT_OPNN		= :vo.deptcnsd_apbt_opnn
				#if (!$vo.deptcnsd_cnsd_status.equals(""))
					, CNSD_STATUS	= :vo.deptcnsd_cnsd_status
					#if ($vo.deptcnsd_cnsd_status.equals("C04305"))
               	    ,REQ_LT = dbo.COM_REQ_LT((SELECT REQ_DT FROM TN_CLM_CONT_CNSDREQ WHERE CNSDREQ_ID = :vo.cnsdreq_id),GETDATE(),COMP_CD)
					#end	
				#end
				#if(($vo.top_role.equals("RA01") + $vo.page_div.equals("RESP")))
					, APBT_MEMO		= :vo.apbt_memo
				#end
              WHERE 1=1
              	AND CNSDREQ_ID = :vo.cnsdreq_id
              	AND CNSD_DEPT = :vo.deptcnsd_cnsd_dept
		    ]]>
			</statement>
		</query>

		<query id="clm.contractmanager.ApprchangeMasterStatus" isCamelCase="false" comment="계약관리_계약_마스터 단계상태 변경">
            <statement>
            <![CDATA[
            UPDATE TN_CLM_CONTRACT_MASTER
               SET CNTRT_STATUS = :vo.chg_cntrt_status
                  ,PRCS_DEPTH =   :vo.chg_prcs_depth
                  ,DEPTH_STATUS =:vo.chg_depth_status
                  , MOD_DT = GETDATE()
			 WHERE DEPTH_STATUS != 'C02603'
			   AND CNTRT_ID = :vo.master_cntrt_id
            ]]>
            </statement>
        </query>	
        
        <query id="clm.contractmanager.ApprchangeCnsdreqStatus" isCamelCase="false" comment="계약관리_계약_검토의뢰 - 진행상태 변경">
            <statement>
            <![CDATA[
            UPDATE TN_CLM_CONT_CNSDREQ
               SET PRGRS_STATUS =  :vo.chg_prgrs_status 
				  ,MOD_DT = GETDATE()
				  ,MOD_ID = :vo.mod_id
				  ,MOD_NM = :vo.mod_nm
				#if ($vo.chg_prgrs_status.equals("C04207"))
				  ,RE_DT = GETDATE()
				#end
			 WHERE CNSDREQ_ID = :vo.cnsdreq_id
            ]]>
            </statement>
        </query>	
		
		<!-- 최종본 의뢰(회신)로 상태변경 -->
		<query id="clm.manage.lastchangeCnsdreqStatus" isCamelCase="false">
		  <statement>
		    <![CDATA[
		    UPDATE TN_CLM_CONT_CNSDREQ 
		    	SET LAST_CNSD_YN = 'N'
		    	   ,PLNDBN_REQ_YN = 'Y'
				 WHERE CNSDREQ_ID = :vo.cnsdreq_id
		    ]]>
		  </statement>
		</query>
		
		<!-- 인쇄용 검토의뢰 정보 -->
        <query id="clm.manage.print.considerationDetail" isCamelCase="false">
          <statement>
            <![CDATA[
				SELECT  /**** 의뢰정보 *****/
				        a2.CNSDREQ_ID /* 의뢰 ID */
				       ,a2.REQ_TITLE /* 의뢰명 */
				       ,a2.REQMAN_NM /* 의뢰자명 */
				       ,a2.REQ_DEPT_NM /* 의뢰자 부서명 */
				       ,a2.REQMAN_JIKGUP_NM /* 의뢰 직급명 */
				       /* ,TO_CHAR(a2.REQ_DT, 'YYYY-MM-DD') AS REQ_DT 의뢰일시 */
				       ,CONVERT(VARCHAR, CONVERT(DATE,a2.REQ_DT), 23) AS REQ_DT  
				       /* ,TO_CHAR(TO_DATE(a2.RE_DEMNDDAY,'YYYYMMDD'),'YYYY-MM-DD') AS RE_DEMNDDAY  회신요청일 */
				       ,CONVERT(VARCHAR, CONVERT(DATE, a2.RE_DEMNDDAY), 23) AS RE_DEMNDDAY
				       ,a2.CNSD_DEMND_CONT /* 검토요청내용 */
				       ,a2.LASTBN_CHGE_YN /* 검토본 변경 여부 */
				       ,a2.PLNDBN_CHGE_CONT /* 검토본 변경사유 및 내역 */
				       ,a4.HOLD_CAUSE /* 보류사유 */
				       ,a2.PRGRS_STATUS /* 의뢰상태 */
				       ,a2.PREV_CNSDREQ_ID /* 이전 의뢰ID*/
				       ,a2.PLNDBN_REQ_YN /* 예정본 여부 */
				       ,a1.CNSD_STATUS /* 검토 상태*/
				       /* ,DECODE(a2.LASTBN_CHGE_YN,'Y','YES','N','NO', '') LASTBN_CHGE_YN_NM  변경여부 */
				       , CASE a2.LASTBN_CHGE_YN
				           WHEN 'Y' THEN 'YES'
				         ELSE
				           'N'
				         END AS LASTBN_CHGE_YN_NM
				       ,a1.CNSD_OPNN /* 검토의견 */
				       ,a1.APBT_OPNN /* 그룹장의견 */
				       
				       /***** 계약정보 *****/
				       ,a3.CNTRT_ID /* 계약 ID */
				       ,a3.CNTRT_NM /* 계약명 */
				       ,a3.CNTRT_NO /* 계약 NO*/
				       ,a3.CNTRT_RESPMAN_NM /* 담당자명 */
				       ,a3.CNTRT_RESPMAN_JIKGUP_NM /* 담당자 직급명 */
				       ,a3.CNTRT_RESP_DEPT_NM /* 담당자 부서명 */
				       ,a3.CNTRT_OPPNT_NM /* 계약상대방 명 */
				       ,a3.CNTRT_OPPNT_RPRSNTMAN /* 계약상대방 대표자명 */
				       ,a3.CNTRT_OPPNT_TYPE /* 계약상대방 유형*/
				       ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              						WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              						WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              						ELSE CD_NM_ENG
			              					END CD_NM 
				           FROM TB_COM_CD 
				          WHERE GRP_CD = 'C056' 
				            AND CD = a3.CNTRT_OPPNT_TYPE) AS CNTRT_OPPNT_TYPE_NM /* 계약상대방 유형명*/
				       ,a3.BIZ_CLSFCN /* 비지니스 단계에 따른 분류*/
				       ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	  		 WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		 WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		 ELSE CD_NM_ENG
			             		END CD_NM
				           FROM TN_COM_CONTRACTTYPE_CD 
				          WHERE TYPE_CD = a3.BIZ_CLSFCN) AS BIZ_CLSFCN_NM /* 비지니스 단계에 따른 분류명 */
				       ,a3.DEPTH_CLSFCN /* 계약 단계에 따른 분류 */
				       ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	  		 WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		 WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		 ELSE CD_NM_ENG
			             		END CD_NM
				           FROM TN_COM_CONTRACTTYPE_CD 
				          WHERE TYPE_CD = a3.DEPTH_CLSFCN) AS DEPTH_CLSFCN_NM /* 계약 단계에 따른 분류명 */
				       ,a3.CNCLSNPURPS_BIGCLSFCN /* 채용 단계에 따른 분1 */
				       ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	  		 WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		 WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		 ELSE CD_NM_ENG
			             		END CD_NM
				           FROM TN_COM_CONTRACTTYPE_CD 
				          WHERE TYPE_CD = a3.CNCLSNPURPS_BIGCLSFCN) AS CNCLSNPURPS_BIGCLSFCN_NM /* 채용 단계에 따른 분류명1 */
				       ,a3.CNCLSNPURPS_MIDCLSFCN /* 채용 단계에 따른 분류2 */
				       ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	  		 WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		 WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		 ELSE CD_NM_ENG
			             		END CD_NM
				           FROM TN_COM_CONTRACTTYPE_CD 
				          WHERE TYPE_CD = a3.CNCLSNPURPS_MIDCLSFCN) AS CNCLSNPURPS_MIDCLSFCN_NM /* 채용 단계에 따른 분류명2 */
				       ,a3.CNTRT_TRGT /* 계약대상*/
				       ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              	  		 WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              	  		 WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              	  		 ELSE CD_NM_ENG
			             		END CD_NM
				           FROM TN_COM_CONTRACTTYPE_CD 
				          WHERE TYPE_CD = a3.CNTRT_TRGT) AS CNTRT_TRGT_NM /* 계약대상명*/
				       ,a3.CNTRT_TRGT_DET /* 계약상대상세*/
				       ,a3.AUTO_RNEW_YN /* 자동연장여부*/
				       ,a2.MN_CNSD_DEPT /* 주부서*/
				       ,a2.VC_CNSD_DEPT /* 부부서*/
				       ,CASE WHEN :vo.session_user_locale = 'ko' THEN
				         /* DECODE(a3.CNCLSNPURPS_BIGCLSFCN, 'T0302', '', DECODE(a2.MN_CNSD_DEPT,'A00000001', '국내법무','A00000002','해외법무')) */
				       	 CASE a3.CNCLSNPURPS_BIGCLSFCN
				       	   WHEN 'T0302' THEN ''
				       	 ELSE
				       	   CASE a2.MN_CNSD_DEPT
				       	     WHEN 'A00000001' THEN '국내법무'
				       	   ELSE
				       	     '해외법무'
				       	   END
				       	 END
				       	ELSE
				       	   /* DECODE(a3.CNCLSNPURPS_BIGCLSFCN, 'T0302', '', DECODE(a2.MN_CNSD_DEPT,'A00000001', 'Corporate Legal Team','A00000002','Global Legal Team')) */
				       	   CASE a3.CNCLSNPURPS_BIGCLSFCN
				       	     WHEN 'T0302' THEN ''
				       	   ELSE
				       	     CASE a2.MN_CNSD_DEPT
				       	       WHEN 'A00000001' THEN 'Corporate Legal Team'
				       	     ELSE
				       	       'Global Legal'
				       	     END
				       	   END
				       	END AS MN_CNSD_DEPT_NM /* 검토주관부서명*/
				       /* ,TO_CHAR(TO_DATE(a3.CNTRTPERIOD_STARTDAY,'YYYYMMDD'),'YYYY-MM-DD') AS a3.CNTRTPERIOD_STARTDAY   계약기간 - 시작 */
				       , CONVERT(VARCHAR, CONVERT(DATE, a3.CNTRTPERIOD_STARTDAY), 23) AS CNTRTPERIOD_STARTDAY
				       /* ,TO_CHAR(TO_DATE(a3.CNTRTPERIOD_ENDDAY,'YYYYMMDD'),'YYYY-MM-DD') AS CNTRTPERIOD_ENDDAY  계약기간 - 시작 */
				       , CONVERT(VARCHAR, CONVERT(DATE, a3.CNTRTPERIOD_ENDDAY), 23) AS CNTRTPERIOD_ENDDAY
				       ,a3.PAYMENT_GBN /* 지불/수금 구분 */
				       ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              						WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              						WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              						ELSE CD_NM_ENG
			              					END CD_NM 
				           FROM TB_COM_CD 
				          WHERE CD = a3.PAYMENT_GBN ) AS PAYMENT_GBN_NM /* 지불/수금 구분명 */
				       /* ,TRIM(TO_CHAR(a3.CNTRT_AMT, '999,999,999,999,999')) AS CNTRT_AMT  계약금액 */
				       , RTRIM(REPLACE( CONVERT( VARCHAR, CONVERT( MONEY, ISNULL(a3.CNTRT_AMT,'0')  ), 1 ), '.00', '' )) AS CNTRT_AMT 
				       ,a3.CNTRT_UNTPRC_EXPL /* 단가내역 요약 */
				       ,a3.CRRNCY_UNIT /* 통화단위 */
				       ,a3.PSHDBKGRND_PURPS /* 추진목적 및 배경 */
				       ,a3.ETC_MAIN_CONT /* 기타주요사항*/
				       ,a3.OBLGT_LMT /* 배상책임한도 */
				       ,a3.SPCL_COND /* 기타특약사항 */
				       ,a3.LOAC /* 준거법 */
				       ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              						WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              						WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              						ELSE CD_NM_ENG
			              					END CD_NM 
				           FROM TB_COM_CD 
				          WHERE CD = a3.LOAC ) AS LOAC_NM /*준거법명*/
				       ,a3.LOAC_ETC /* 준거법 상세 */
				       ,a3.DSPT_RESOLT_MTHD /* 분쟁해결방법 */
				       ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              						WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              						WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              						ELSE CD_NM_ENG
			              					END CD_NM
				           FROM TB_COM_CD 
				          WHERE CD = a3.DSPT_RESOLT_MTHD ) AS DSPT_RESOLT_MTHD_NM /* 분쟁해결방법명*/
				       ,a3.DSPT_RESOLT_MTHD_DET /* 분쟁해결방법 상세 */
				       ,a3.PRCS_DEPTH /* 계약단계 */
				       ,a3.DEPTH_STATUS /* 계약단계 상태*/
				       ,a3.CNSLT_NO /* 표준계약서 */
				       ,a3.IF_SYS_CD /* IF 시스템 CD */
				       ,dbo.CLM_REQ_RESPMANS_M(a2.CNSDREQ_ID,:vo.session_user_locale) AS CNSDMANS /* 검토자 */
				       
				       /***** 승인정보 *****/
				       ,a3.BFHDCSTN_APBT_MTHD /* 승인방식 */
				       ,(SELECT /* DECODE( :vo.session_user_locale ,'ko',CD_NM,CD_NM_ENG) */
				                CASE :vo.session_user_locale
				                  WHEN 'ko' THEN CD_NM
				                  WHEN 'fr' THEN CD_NM_FRA
				                  WHEN 'de' THEN CD_NM_DEU
				                ELSE
				                  CD_NM_ENG
				                END
				           FROM TB_COM_CD 
				          WHERE CD = a3.BFHDCSTN_APBT_MTHD ) AS BFHDCSTN_APBT_MTHD_NM /* 승인방식명 */
				       /* ,TO_CHAR(TO_DATE(a3.BFHDCSTN_APBTDAY,'YYYYMMDD'),'YYYY-MM-DD') as BFHDCSTN_APBTDAY  승인일자 */
				       , CONVERT(VARCHAR, CONVERT(DATE, a3.BFHDCSTN_APBTDAY), 23) AS BFHDCSTN_APBTDAY
				       ,a3.BFHDCSTN_MTNMAN_NM /* 발의자명*/
				       ,a3.BFHDCSTN_MTNMAN_JIKGUP_NM /* 발의자 직급*/
				       ,a3.BFHDCSTN_MTN_DEPT_NM /* 발의자 부서*/
				       ,a3.bfhdcstn_apbtman_nm /* 승인자명*/
				       ,a3.bfhdcstn_apbtman_jikgup_nm /* 승인자 직급 */
				       ,a3.bfhdcstn_apbt_dept_nm /* 승인자 부서명*/
				       
				       /***** 체결정보 *****/
				       ,a3.SEAL_MTHD /* 직인/서명 구분*/
				       ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              						WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              						WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              						ELSE CD_NM_ENG
			              					END CD_NM 
				           FROM TB_COM_CD 
				          WHERE GRP_CD = 'C021' 
				            AND CD = a3.SEAL_MTHD ) AS SEAL_MTHD_NM /* 직인/서명 구분명*/
				       /* ,TO_CHAR(TO_DATE(a3.EXPRT_NOTIDAY, 'YYYY-MM-DD'), 'YYYY-MM-DD') AS EXPRT_NOTIDAY  만료사전알림일 */
				       ,CONVERT(VARCHAR, CONVERT(DATE, a3.EXPRT_NOTIDAY), 23) AS EXPRT_NOTIDAY
				       ,a3.SEAL_FFMTMAN_NM /* 날인담당자 */
				       ,a3.SEAL_FFMT_DEPT_NM /* 날인담당자 부서명*/
				       ,a3.SEAL_FFMTMAN_JIKGUP_NM /* 날인담당자 직급명*/
				       ,a3.SIGN_PLNDMAN_NM /* 서명담당자 */
				       ,a3.SIGN_PLND_DEPT_NM /* 서명담당자 부서명 */
				       ,a3.SIGN_PLNDMAN_JIKGUP_NM /* 서명담당자 직급명 */
				       /* ,TO_CHAR(TO_DATE(a3.CNCLSN_PLNDDAY, 'YYYY-MM-DD'), 'YYYY-MM-DD') AS CNCLSN_PLNDDAY  체결예정일 */
				       ,CONVERT(VARCHAR, CONVERT(DATE, a3.CNCLSN_PLNDDAY), 23) AS CNCLSN_PLNDDAY
				       /* ,TO_CHAR(TO_DATE(a3.CNTRT_CNCLSNDAY, 'YYYY-MM-DD'), 'YYYY-MM-DD') AS CNTRT_CNCLSNDAY  체결예정일 */
				       ,CONVERT(VARCHAR, CONVERT(DATE, a3.CNTRT_CNCLSNDAY), 23) AS CNTRT_CNCLSNDAY
				       ,a3.SIGNMAN_NM /* 서명자(당사) */
		               ,a3.SIGN_DEPT_NM /* 서명자(당사) 부서 */
		               ,a3.SIGNMAN_JIKGUP_NM /* 서명자(당사) 직급 */
		               /* ,TO_CHAR(TO_DATE(a3.SIGNDAY, 'YYYY-MM-DD'), 'YYYY-MM-DD') AS SIGNDAY  서명일(당사) */
		               ,CONVERT(VARCHAR, CONVERT(DATE, a3.SIGNDAY), 23) AS SIGNDAY
		               ,a3.OPPNT_SIGNMAN_NM /* 서명자(상대) */
		               ,a3.OPPNT_SIGNMAN_JIKGUP /* 서명자(상대) 직급*/
		               ,a3.OPPNT_SIGNMAN_DEPT /* 서명자(상대) 부서*/
		               /* ,TO_CHAR(TO_DATE(a3.OPPNT_SIGNDAY, 'YYYY-MM-DD'), 'YYYY-MM-DD') AS OPPNT_SIGNDAY  서명일(상대) */
		               ,CONVERT(VARCHAR, CONVERT(DATE, a3.OPPNT_SIGNDAY), 23) AS OPPNT_SIGNDAY
		               ,a3.CPY_REGMAN_NM /* 사본등록자 */
		               ,a3.CPY_REGMAN_JIKGUP_NM  /* 사본등록자 직급*/
		               ,a3.CPY_REG_DEPT_NM /* 사본등록자 부서*/
		               /* ,TO_CHAR(TO_DATE(a3.CPY_REGDAY, 'YYYY-MM-DD'), 'YYYY-MM-DD')  AS CPY_REGDAY  사본등록일 */
		               ,CONVERT(VARCHAR, CONVERT(DATE, a3.CPY_REGDAY), 23) AS CPY_REGDAY
		               ,a3.ORG_HDOVMAN_NM /* 원본인계자 */
		               ,a3.ORG_HDOVMAN_JIKGUP_NM /* 원본인계자 직급 */
		               ,a3.ORG_HDOV_DEPT_NM /* 원본인계자 부서 */
		               /* ,TO_CHAR(TO_DATE(a3.ORG_ACPTDAY, 'YYYY-MM-DD'), 'YYYY-MM-DD') AS ORG_ACPTDAY  원본접수일 */
		               ,CONVERT(VARCHAR, CONVERT(DATE, a3.ORG_ACPTDAY), 23) AS ORG_ACPTDAY
		               ,a3.ORG_TKOVMAN_NM /* 원본접수자 */
		               ,a3.ORG_TKOVMAN_JIKGUP_NM /* 원본접수자 직급 */
		               ,a3.ORG_TKOV_DEPT_NM /* 원본접수자 부서 */
		               ,a3.ORG_STRG_POS /* 원본보관 위치 */
		               ,a3.ORG_ACPT_DLAY_CAUSE /* 원본 메모*/
		               /***** 종료정보 *****/
		               ,a3.CNTRT_CHGE_DEMNDMAN_NM /* 요청자 */
		               ,a3.CNTRT_CHGE_DEMNDMAN_JIKGUP_NM /* 요청자 직급 */
		               ,a3.CNTRT_CHGE_DEMND_DEPT_NM /* 요청자 부서 */
		               /* ,TO_CHAR(TO_DATE(a3.CNTRT_CHGE_DEMNDDAY, 'YYYY-MM-DD'), 'YYYY-MM-DD') AS CNTRT_CHGE_DEMNDDAY  요청일자 */
		               ,CONVERT(VARCHAR, CONVERT(DATE, a3.CNTRT_CHGE_DEMNDDAY), 23) AS CNTRT_CHGE_DEMNDDAY
		               ,a3.CNTRT_STATUS /* 계약상태 */
		               ,(SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
			              						WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
			              						WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
			              						ELSE CD_NM_ENG
			              					END CD_NM 
		                   FROM TB_COM_CD 
		                  WHERE SYS_CD = 'LAS' 
		                    AND GRP_CD = 'C024' 
		                    AND CD = a3.CNTRT_STATUS 
		                    AND USE_YN = 'Y') AS CNTRT_STATUS_NM
		               ,a3.CNTRT_CHGE_CONFMAN_NM  /* 확인자 */
		               ,a3.CNTRT_CHGE_CONFMAN_JIKGUP_NM /* 확인자 직급 */
		               ,a3.CNTRT_CHGE_CONF_DEPT_NM /*확인자 부서 */
		               ,CASE WHEN :vo.session_user_locale = 'ko' THEN
		               		/* DECODE(a3.CNTRT_CHGE_CONF_YN, 'Y', '확인', '미확인') */
		               		CASE a3.CNTRT_CHGE_CONF_YN
		               		  WHEN 'Y' THEN '확인'
		               		ELSE
		               		  '미확인'
		               		END
		               	WHEN :vo.session_user_locale = 'fr' THEN
		               		/* DECODE(a3.CNTRT_CHGE_CONF_YN, 'Y', 'Valider', 'Non vérifié') */
		               		CASE a3.CNTRT_CHGE_CONF_YN
		               		  WHEN 'Y' THEN 'Valider'
		               		ELSE
		               		  'Non vérifié'
		               		END
		               	WHEN :vo.session_user_locale = 'de' THEN
		               		/* DECODE(a3.CNTRT_CHGE_CONF_YN, 'Y', 'bestätigen', 'Deaktiviert') */
		               		CASE a3.CNTRT_CHGE_CONF_YN
		               		  WHEN 'Y' THEN 'bestätigen'
		               		ELSE
		               		  'Deaktiviert'
		               		END
		               	ELSE
		               		/* DECODE(a3.CNTRT_CHGE_CONF_YN, 'Y', 'Confirm', 'Unchecked') */
		               		CASE a3.CNTRT_CHGE_CONF_YN
		               		  WHEN 'Y' THEN 'Confirm'
		               		ELSE
		               		  'Unchecked'
		               		END
		               	END AS CNTRT_CHGE_CONF_YN
		               ,a3.CNTRT_CHGE_CONF_CONT AS CNTRT_CHGE_CONF_CONT /*확인의견 */
		               ,a3.CNTRT_CHGE_DEMND_CAUSE /* 상태변경 사유 */
		               /* ECMS 추가  S */
		               , a3.CONT_DRAFT
		               , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
					              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
					              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
					              			ELSE CD_NM_ENG
					              		END CD_NM FROM TB_COM_CD WHERE CD = a3.CONT_DRAFT)  AS CONT_DRAFT_NM
		               , a3.TOP_30_CUS
		               , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
					              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
					              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
					              			ELSE CD_NM_ENG
					              		END CD_NM FROM TB_COM_CD WHERE CD = a3.TOP_30_CUS)  AS TOP_30_CUS_NM
		               , a3.RELATED_PRODUCTS
		               , (SELECT CASE WHEN :vo.session_user_locale = 'ko' THEN CD_NM
					              			WHEN :vo.session_user_locale = 'fr' THEN CD_NM_FRA
					              			WHEN :vo.session_user_locale = 'de' THEN CD_NM_DEU
					              			ELSE CD_NM_ENG
					              		END CD_NM FROM TB_COM_CD WHERE CD = a3.RELATED_PRODUCTS)  AS RELATED_PRODUCTS_NM
					   /* ECMS 추가  E */
				  FROM  TN_CLM_CONTRACT_CNSD a1
	    LEFT OUTER JOIN TN_CLM_CONT_CNSDREQ_HOLD a4 ON a1.CNSDREQ_ID = a4.CNSDREQ_ID 
				       ,TN_CLM_CONT_CNSDREQ a2
				       ,TN_CLM_CONTRACT_MASTER a3
				 WHERE  a1.CNSDREQ_ID = a2.CNSDREQ_ID
				   AND  a1.CNTRT_ID = a3.CNTRT_ID
				   AND  a1.CNSDREQ_ID = :vo.cnsdreq_id
				   AND  a1.CNTRT_ID = :vo.cntrt_id
            ]]>
          </statement>
        </query>
          
          <!-- 인쇄용 관련자 정보 -->
        <query id="clm.manage.print.reqAuthList" isCamelCase="false">
          <statement>
            <![CDATA[
				SELECT  TRGTMAN_NM        /* 관련자명 */
				       ,TRGTMAN_DEPT_NM   /* 관련자부서명 */
				       ,TRGTMAN_JIKGUP_NM /*관련자직급명 */
				  FROM  TN_CLM_CONTRACT_AUTHREQ
				 WHERE  CNTRT_ID = :vo.cntrt_id
				   AND  DEL_YN = 'N'
				   AND  DEMND_GBN = 'C04601'    /* 계약정보 공유 요청 */
				   AND  DEMND_STATUS = 'C03702' /* 승인*/ 
            ]]>
          </statement>
        </query>
        
        <!-- 인쇄용 의뢰 첨부파일 -->
        <query id="clm.manage.print.reqAttatchList" isCamelCase="false">
            <statement>
            <![CDATA[
            SELECT '1'              AS FILETYPE     /* 의뢰 계약서 파일 */
                  , COUNT(1) OVER() AS FILECNT
                  , FILE_ID
                  , ORG_FILE_NM
                  , FILE_SRT
              FROM TN_COM_ATTACH 
             WHERE FILE_BIGCLSFCN = 'F012'
               AND FILE_MIDCLSFCN = 'F01202'
               AND FILE_SMLCLSFCN = 'F0120201'
               AND REF_KEY = :vo.cntrt_id + '@' + :vo.cnsdreq_id
               AND DEL_YN = 'N'
             UNION ALL  
               SELECT '2'           AS FILETYPE     /* 의뢰 별첨 파일 */
                  , COUNT(1) OVER() AS FILECNT
                  , FILE_ID
                  , ORG_FILE_NM
                  , FILE_SRT
              FROM TN_COM_ATTACH 
             WHERE FILE_BIGCLSFCN = 'F012'
               AND FILE_MIDCLSFCN = 'F01202'
               AND FILE_SMLCLSFCN = 'F0120208'
               AND REF_KEY = :vo.cntrt_id + '@' + :vo.cnsdreq_id
               AND DEL_YN = 'N'
             UNION ALL
              SELECT '3'             AS FILETYPE /* 의뢰 기타 파일 */
                  , COUNT(1) OVER() AS FILECNT
                  , FILE_ID
                  , ORG_FILE_NM
                  , FILE_SRT
              FROM TN_COM_ATTACH 
             WHERE FILE_BIGCLSFCN = 'F012'
               AND FILE_MIDCLSFCN = 'F01202'
               AND FILE_SMLCLSFCN = 'F0120205'
               AND REF_KEY = :vo.cntrt_id + '@' + :vo.cnsdreq_id
               AND DEL_YN = 'N'
             UNION ALL
              SELECT '4'             AS FILETYPE /* 표준계약서 파일 */
                  , COUNT(1) OVER() AS FILECNT
                  , FILE_ID
                  , ORG_FILE_NM
                  , FILE_SRT
              FROM TN_COM_ATTACH 
             WHERE FILE_BIGCLSFCN = 'F003'
               AND FILE_MIDCLSFCN = 'F00301'
               AND REF_KEY = :vo.cnslt_no + '@0'
               AND DEL_YN = 'N'
            UNION ALL
              SELECT '5'             AS FILETYPE /* 체결 기타 파일 */
                  , COUNT(1) OVER() AS FILECNT
                  , FILE_ID
                  , ORG_FILE_NM
                  , FILE_SRT
              FROM TN_COM_ATTACH 
             WHERE FILE_BIGCLSFCN = 'F012'
               AND FILE_MIDCLSFCN = 'F01202'
               AND FILE_SMLCLSFCN = 'F0120212'
               AND REF_KEY = :vo.cntrt_id + '@' + :vo.cnsdreq_id
               AND DEL_YN = 'N'
            ORDER BY FILETYPE, FILE_SRT
              ]]>
            </statement>
        </query>
        
        <!-- 인쇄용 회신 첨부파일 -->
        <query id="clm.manage.print.replyAttatchList" isCamelCase="false">
            <statement>
            <![CDATA[
            SELECT '1'              AS FILETYPE     /* 계약서 파일 */
                  , COUNT(1) OVER() AS FILECNT
                  , FILE_ID
                  , ORG_FILE_NM
                  , FILE_SRT
              FROM TN_COM_ATTACH 
             WHERE FILE_BIGCLSFCN = 'F012'
               AND FILE_MIDCLSFCN = 'F01202'
               AND FILE_SMLCLSFCN = 'F0120202'
               AND REF_KEY = :vo.cntrt_id + '@' + :vo.cnsdreq_id
               AND DEL_YN = 'N'
             UNION ALL  
               SELECT '2'           AS FILETYPE     /* 별첨 파일 */
                  , COUNT(1) OVER() AS FILECNT
                  , FILE_ID
                  , ORG_FILE_NM
                  , FILE_SRT
              FROM TN_COM_ATTACH 
             WHERE FILE_BIGCLSFCN = 'F012'
               AND FILE_MIDCLSFCN = 'F01202'
               AND FILE_SMLCLSFCN = 'F0120209'
               AND REF_KEY = :vo.cntrt_id + '@' + :vo.cnsdreq_id
               AND DEL_YN = 'N'
            UNION ALL             
             SELECT '3'             AS FILETYPE /* 기타 파일 */
                  , COUNT(1) OVER() AS FILECNT
                  , FILE_ID
                  , ORG_FILE_NM
                  , FILE_SRT
              FROM TN_COM_ATTACH 
             WHERE FILE_BIGCLSFCN = 'F012'
               AND FILE_MIDCLSFCN = 'F01202'
               AND FILE_SMLCLSFCN = 'F0120206'
               AND REF_KEY = :vo.cntrt_id + '@' + :vo.cnsdreq_id
               AND DEL_YN = 'N'
            ORDER BY FILETYPE, FILE_SRT
              ]]>
            </statement>
        </query>
        
        <!-- 인쇄용 그외 첨부파일 -->
        <query id="clm.manage.print.etcAttatchList" isCamelCase="false">
            <statement>
            <![CDATA[
             
             SELECT '1'             AS FILETYPE  /* 사전검토파일 */
                  , COUNT(1) OVER() AS FILECNT
                  , FILE_ID
                  , ORG_FILE_NM
                  , FILE_SRT
              FROM TN_COM_ATTACH 
             WHERE FILE_BIGCLSFCN = 'F012'
              AND FILE_MIDCLSFCN = 'F01201'
              AND FILE_SMLCLSFCN = 'F0120101'
              AND REF_KEY = :vo.cntrt_id
              AND DEL_YN = 'N'
             UNION ALL  
             SELECT '2'             AS FILETYPE   /* 단가 파일 */
                  , COUNT(1) OVER() AS FILECNT
                  , FILE_ID
                  , ORG_FILE_NM
                  , FILE_SRT
              FROM TN_COM_ATTACH 
             WHERE FILE_BIGCLSFCN = 'F012'
               AND FILE_MIDCLSFCN = 'F01202'
               AND FILE_SMLCLSFCN = 'F0120211'
               AND REF_KEY = :vo.cntrt_id
               AND DEL_YN = 'N'
            UNION ALL
            SELECT '3'             AS FILETYPE   /* 체결본사본 */
                  , COUNT(1) OVER() AS FILECNT
                  , FILE_ID
                  , ORG_FILE_NM
                  , FILE_SRT
              FROM TN_COM_ATTACH 
             WHERE FILE_BIGCLSFCN = 'F012'
               AND FILE_MIDCLSFCN = 'F01203'
               AND REF_KEY = :vo.cntrt_id
               AND DEL_YN = 'N'
            UNION ALL
            SELECT '4'             AS FILETYPE   /* 종료첨부파일 */
                  , COUNT(1) OVER() AS FILECNT
                  , FILE_ID
                  , ORG_FILE_NM
                  , FILE_SRT
              FROM TN_COM_ATTACH 
             WHERE FILE_BIGCLSFCN = 'F012'
               AND FILE_MIDCLSFCN = 'F01204'
               AND REF_KEY = :vo.cntrt_id + '@' + :vo.cnsdreq_id 
               AND DEL_YN = 'N'
            ORDER BY FILETYPE, FILE_SRT
              ]]>
            </statement>
        </query>
        
        <query id="clm.manage.print.spclList" isCamelCase="false" comment="특화정보 가져오기 ">
          <statement>
            <![CDATA[
                SELECT A.CNTRT_ID
                        ,A.ATTR_SEQNO
                        ,A.ATTR_CD
                        ,A.ATTR_CONT
                        ,B.ATTR_NM

                  ,CASE WHEN A.ATTR_SEQNO = '2' THEN
                  	CASE WHEN :vo.session_user_locale = 'ko' THEN    
                  		/* DECODE(ATTR_CONT,'1','가능','2','불가능','3','조건부 가능','4','기타',ATTR_CONT) */
                    	CASE ATTR_CONT
                    	  WHEN '1' THEN '가능'
                    	  WHEN '2' THEN '불가능'
                    	  WHEN '3' THEN '조건부 가능'
                    	  WHEN '4' THEN '기타'
                    	ELSE
                    	  ATTR_CONT
                    	END
                    WHEN :vo.session_user_locale = 'fr' THEN    
                  		/* DECODE(ATTR_CONT,'1','Possible','2','Impossible','3','Soumis à conditions','4','Autres',ATTR_CONT) */
                    	CASE ATTR_CONT
                    	  WHEN '1' THEN 'Possible'
                    	  WHEN '2' THEN 'Impossible'
                    	  WHEN '3' THEN 'Soumis à conditions'
                    	  WHEN '4' THEN 'Autres'
                    	ELSE
                    	  ATTR_CONT
                    	END
                    WHEN :vo.session_user_locale = 'de' THEN    
                  		/* DECODE(ATTR_CONT,'1','Möglich','2','Unmöglich','3','Bedingt','4','Sonstige',ATTR_CONT) */
                    	CASE ATTR_CONT
                    	  WHEN '1' THEN 'Möglich'
                    	  WHEN '2' THEN 'Unmöglich'
                    	  WHEN '3' THEN 'Bedingt'
                    	  WHEN '4' THEN 'Sonstige'
                    	ELSE
                    	  ATTR_CONT
                    	END              
                    ELSE
                    	/* DECODE(ATTR_CONT,'1','Capable','2','Impossible','3','Conditional','4','Others',ATTR_CONT) */
                    	CASE ATTR_CONT
                    	  WHEN '1' THEN 'Capable'
                    	  WHEN '2' THEN 'Impossible'
                    	  WHEN '3' THEN 'Conditional'
                    	  WHEN '4' THEN 'Others'
                    	ELSE
                    	  ATTR_CONT
                    	END
                    END
                  WHEN A.ATTR_SEQNO = '7' THEN
                  	CASE WHEN :vo.session_user_locale = 'ko' THEN
                  		/* DECODE(ATTR_CONT,'1','당사','2','업체','3','공동','4','N.A',ATTR_CONT) */
                    	CASE ATTR_CONT
                    	  WHEN '1' THEN '당사'
                    	  WHEN '2' THEN '업체'
                    	  WHEN '3' THEN '공동'
                    	  WHEN '4' THEN 'N.A'
                    	ELSE
                    	  ATTR_CONT
                    	END
                    WHEN :vo.session_user_locale = 'fr' THEN
                  		/* DECODE(ATTR_CONT,'1','Samsung Electronics','2','Société','3','Collaboration','4','N.A',ATTR_CONT) */
                    	CASE ATTR_CONT
                    	  WHEN '1' THEN 'Samsung Electronics'
                    	  WHEN '2' THEN 'Société'
                    	  WHEN '3' THEN 'Collaboration'
                    	  WHEN '4' THEN 'N.A'
                    	ELSE
                    	  ATTR_CONT
                    	END
                    WHEN :vo.session_user_locale = 'de' THEN
                  		/* DECODE(ATTR_CONT,'1','Samsung Electronics','2','Unternehmen','3','Zusammenarbeit','4','N.A',ATTR_CONT) */
                    	CASE ATTR_CONT
                    	  WHEN '1' THEN 'Samsung Electronics'
                    	  WHEN '2' THEN 'Unternehmen'
                    	  WHEN '3' THEN 'Zusammenarbeit'
                    	  WHEN '4' THEN 'N.A'
                    	ELSE
                    	  ATTR_CONT
                    	END 
                    ELSE
                    	/* DECODE(ATTR_CONT,'1','Samsung Electronics','2','Company','3','Collaboration','4','N.A',ATTR_CONT) */
                    	CASE ATTR_CONT
                    	  WHEN '1' THEN 'Samsung Electronics'
                    	  WHEN '2' THEN 'Company'
                    	  WHEN '3' THEN 'Collaboration'
                    	  WHEN '4' THEN 'N.A'
                    	ELSE
                    	  ATTR_CONT
                    	END
                    END
                  ELSE                    
                    ISNULL(A.ATTR_CONT,'')                                        
                  END AS ATTR_VALUE  
                FROM TN_CLM_CONT_TYPE_SPCLINFO A    
                    ,TN_CLM_SPECIAL_ATTR B
               WHERE A.CNTRT_ID = :vo.cntrt_id
                #if ($vo.cnsd_status.equals("C04305") && $vo.plndbn_req_yn.equals("Y")) 
                AND A.ATTR_SEQNO IN ('11', '1', '9', '2', '5','6', '3', '7')                    
                #else 
                AND A.ATTR_SEQNO IN ('11', '9')
                #end
                AND A.ATTR_SEQNO = B.ATTR_SEQNO             
                ORDER BY /* DECODE(A.ATTR_SEQNO, '11', '1', '9', '2', '5', '3', '7') */
                        CASE A.ATTR_SEQNO
                          WHEN '11' THEN '1'
                          WHEN '9'  THEN '2'
                          WHEN '5'  THEN '3'
                        ELSE
                          '7'
                        END
            ]]>
          </statement>
        </query>
        
        <!-- 인쇄용 승인 이력 -->
        <query id="clm.manage.print.approveList" isCamelCase="false" comment="인쇄용 승인이력 ">
          <statement>
            <![CDATA[
				SELECT  MIS_ID
				      , TITLE
				      /* , SUBSTRING(MAX(SYS_CONNECT_BY_PATH(APPR_USER_NM + '/ ' + APPR_USER_DUTY + '/ ' + APPR_USER_DEPT, '<br/>')), 6) AS APPR_MANS */
				      , dbo.LAS_CONT_CNSDREQ_RESPMAN_M(:vo.cnsdreq_id, ' / ', 'xx') AS APPR_MANS /*xx : TB_COM_USER의 USER_NM 값으로 가져오기 위해*/
				      , CASE WHEN :vo.session_user_locale = 'ko' THEN
				      		/* DECODE(MAX(APPR_STATUS), '1' ,'결재중', '2', '완결', '3', '반려', '4', '상신취소', '5', '전결', '6', '후완결',' ') */
				      		CASE MAX(APPR_STATUS)
				      		  WHEN '1' THEN '결재중'
				      		  WHEN '2' THEN '완결'
				      		  WHEN '3' THEN '반려'
				      		  WHEN '4' THEN '상신취소'
				      		  WHEN '5' THEN '전결'
				      		  WHEN '6' THEN '후완결'
				      		ELSE
				      		  ''
				      		END
				      	WHEN :vo.session_user_locale = 'fr' THEN
				      		/* DECODE(MAX(APPR_STATUS), '1' ,'Approbation en cours de traitement', '2', 'Complété', '3', 'Refuser', '4', 'Annuler', '5', 'Prise de décision', '6', 'Approuvé à l‘issue de la finalisation',' ') */
				      		CASE MAX(APPR_STATUS)
				      		  WHEN '1' THEN 'Approbation en cours de traitement'
				      		  WHEN '2' THEN 'Complété'
				      		  WHEN '3' THEN 'Refuser'
				      		  WHEN '4' THEN 'Annuler'
				      		  WHEN '5' THEN 'Prise de décision'
				      		  WHEN '6' THEN 'Approuvé à l‘issue de la finalisation'
				      		ELSE
				      		  ''
				      		END
				      	WHEN :vo.session_user_locale = 'de' THEN
				      		/* DECODE(MAX(APPR_STATUS), '1' ,'Genehmigung in Bearbeitung', '2', 'Abgeschlossen', '3', 'Ablehnen', '4', 'Abbrechen', '5', 'Entscheidungsfindung', '6', 'Genehmigt nach Abschluss',' ') */
				      		CASE MAX(APPR_STATUS)
				      		  WHEN '1' THEN 'Genehmigung in Bearbeitung'
				      		  WHEN '2' THEN 'Abgeschlossen'
				      		  WHEN '3' THEN 'Ablehnen'
				      		  WHEN '4' THEN 'Abbrechen'
				      		  WHEN '5' THEN 'Entscheidungsfindung'
				      		  WHEN '6' THEN 'Genehmigt nach Abschluss'
				      		ELSE
				      		  ''
				      		END
				      	ELSE
				      		/* DECODE(MAX(APPR_STATUS), '1' ,'Approval in Progress', '2', 'Completed', '3', 'Reject', '4', 'Cancel', '5', 'Decide Arbitrarily', '6', 'Approved after Completion',' ') */
				      		CASE MAX(APPR_STATUS)
				      		  WHEN '1' THEN 'Approval in Progress'
				      		  WHEN '2' THEN 'Completed'
				      		  WHEN '3' THEN 'Reject'
				      		  WHEN '4' THEN 'Cancel'
				      		  WHEN '5' THEN 'Decide Arbitrarily'
				      		  WHEN '6' THEN 'Approved after Completion'
				      		ELSE
				      		  ''
				      		END
				      	END AS APPR_STATUS
				      , MAX(APPR_CREATE_DATE) AS APPR_CREATE_DATE
				  FROM  ( SELECT  B.MIS_ID
				                , B.TITLE
				                , C.ACTIVITY
				                , ROW_NUMBER() OVER(PARTITION BY B.MIS_ID, C.ACTIVITY ORDER BY B.CREATE_DATE ASC, SEQUENCE) AS RD
				                /* , DECODE(C.ACTIVITY , '1', C.USER_NAME) AS APPR_USER_NM */
				                , CASE C.ACTIVITY
				                    WHEN '1' THEN C.USER_NAME
				                  ELSE
				                    '' 
				                  END AS APPR_USER_NM
				                /* , DECODE(C.ACTIVITY , '1', C.DEPT_NAME) AS APPR_USER_DEPT */
				                , CASE C.ACTIVITY
				                    WHEN '1' THEN C.DEPT_NAME
				                  ELSE
				                    ''
				                  END AS APPR_USER_DEPT
				                /* , DECODE(C.ACTIVITY , '1', C.DUTY) AS APPR_USER_DUTY */
				                , CASE C.ACTIVITY
				                    WHEN '1' THEN C.DUTY
				                  ELSE
				                    ''
				                  END AS APPR_USER_DUTY
				                /* , DECODE(C.ACTIVITY , '1', C.GROUP_NAME) AS APPR_GROUP_NAME */
				                , CASE C.ACTIVITY
				                    WHEN '1' THEN C.GROUP_NAME
				                  ELSE
				                    ''
				                  END AS APPR_GROUP_NAME
				                /* , DECODE(C.ACTIVITY , '1', TO_CHAR(TO_DATE(B.CREATE_DATE, 'YYYY-MM-DD HH24:MI:SS'), 'YYYY-MM-DD')) AS APPR_CREATE_DATE */
				                , CASE C.ACTIVITY
				                    WHEN '1' THEN CONVERT(VARCHAR, CONVERT(DATE, SUBSTRING(B.CREATE_DATE,1,8),112), 23)
				                  ELSE
				                    ''
				                  END AS APPR_CREATE_DATE
				                /* , DECODE(C.ACTIVITY , '1', B.STATUS) AS APPR_STATUS */
				                , CASE C.ACTIVITY
				                    WHEN '1' THEN B.STATUS
				                  ELSE
				                    ''
				                  END AS APPR_STATUS
				            FROM  TN_CLM_CONTRACT_CNSD A
				                , TB_COM_START_PROCESS_WSVO B
				                , TB_COM_ROUTE_WSVO C
				           WHERE  A.CNSDREQ_ID = :vo.cnsdreq_id
				             AND  A.CNTRT_ID = :vo.cntrt_id
				             AND  B.REF_KEY IN (SELECT CNSDREQ_ID 
				                                  FROM TN_CLM_CONTRACT_CNSD 
				                                 WHERE CNTRT_ID = A.CNTRT_ID 
				                                 UNION ALL 
				                                 SELECT :vo.cntrt_id ) 
				             AND  B.MIS_ID = C.MIS_ID
				             AND  B.MODULE_ID = C.MODULE_ID
				             AND  B.APPRVL_CLSFCN IN ( SELECT CD 
				                                         FROM TB_COM_CD 
				                                        WHERE SYS_CD = 'LAS' 
				                                          AND GRP_CD = 'C030' )
				             AND  B.STATUS NOT IN ('0','E')
				             AND  B.APPRVL_CLSFCN IN ('C03002','C03003')
				             AND  C.ACTIVITY IN ('0', '1') ) X
			--	 START  WITH  RD = 1
			--	CONNECT BY PRIOR RD = RD - 1  
				GROUP BY MIS_ID ,TITLE
 				ORDER BY MIS_ID ASC
            ]]>
          </statement>
        </query>
        
        <!-- 인쇄용 결재 라인 -->
        <query id="clm.manage.print.apprLineList" isCamelCase="false" comment="인쇄용 결재라인 ">
          <statement>
            <![CDATA[
				SELECT  A1.MIS_ID
				       ,A1.SEQUENCE
				       ,A2.TITLE
				       ,A2.TIME_ZONE
				       ,A1.ACTIVITY
				       ,CASE
					      	WHEN :vo.session_user_locale = 'fr' THEN
					       		/* DECODE (A1.ACTIVITY, 0, 'Projet', 1, 'Approuver', 2, 'Accord', 3, 'Approbation différée', 9, 'Notifier') */
					       		CASE A1.ACTIVITY
					      		  WHEN 0 THEN  'Projet'
					      		  WHEN 1 THEN  'Approuver'
					      		  WHEN 2 THEN 'Accord'
					      		  WHEN 3 THEN 'Approbation différée'
					      		  WHEN 9 THEN 'Notifier'				      		  
					      		ELSE
					      		  ''
					      		END
					      	WHEN :vo.session_user_locale = 'de' THEN
					       		/* DECODE (A1.ACTIVITY, 0, 'Entwurf', 1, 'Genehmigen', 2, 'Vereinbarung', 3, 'Zurückgestellte Genehmigung', 9, 'Benachrichtigen') */
					       		CASE A1.ACTIVITY
					      		  WHEN 0 THEN  'Entwurf'
					      		  WHEN 1 THEN  'Genehmigen'
					      		  WHEN 2 THEN 'Vereinbarung'
					      		  WHEN 3 THEN 'Zurückgestellte Genehmigung'
					      		  WHEN 9 THEN 'Benachrichtigen'				      		  
					      		ELSE
					      		  ''
					      		END
					       	ELSE
				       		/* DECODE (A1.ACTIVITY, 0, 'Draft', 1, 'Approve', 2, 'Agreement', 3, 'Deferred Approval', 9, 'Notify') */
				       		CASE A1.ACTIVITY
				      		  WHEN 0 THEN  'Draft'
				      		  WHEN 1 THEN  'Approve'
				      		  WHEN 2 THEN 'Agreement'
				      		  WHEN 3 THEN 'Deferred Approval'
				      		  WHEN 9 THEN 'Notify'				      		  
				      		ELSE
				      		  ''
				      		END
				       	END AS ACTIVITY_NM
				       ,A1.USER_NAME
				       ,A1.DUTY
				       ,A1.DEPT_NAME
				       ,A1.OPINION
				       ,A2.CREATE_DATE
				       ,SUBSTRING(APPROVED, 1, 4) + '-' + SUBSTRING(APPROVED, 5, 2) + '-' + SUBSTRING(APPROVED, 7, 2) + '  ' + SUBSTRING(APPROVED, 9, 2) + ':' + SUBSTRING(APPROVED, 11, 2) + ':' + SUBSTRING(APPROVED, 13, 2) AS APPROVED
				       ,A2.STATUS
				       ,CASE WHEN :vo.session_user_locale = 'ko' THEN
				       		/* DECODE(A2.STATUS, '1' ,'결재중', '2', '완결', '3', '반려', '4', '상신취소', '5', '전결', '6', '후완결',' ') */
				       		CASE A2.STATUS
				      		  WHEN '1' THEN  '결재중'
				      		  WHEN '2' THEN  '완결'
				      		  WHEN '3' THEN '반려'
				      		  WHEN '4' THEN '상신취소'
				      		  WHEN '5' THEN '전결'				      		  
				      		  WHEN '6' THEN '후완결'
				      		ELSE
				      		  ''
				      		END
				      	WHEN :vo.session_user_locale = 'fr' THEN
				       		/* DECODE(A2.STATUS, '1' ,'Approbation en cours de traitement', '2', 'Complété', '3', 'Refuser', '4', 'Annuler', '5', 'Prise de décision', '6', 'Approuvé à l‘issue de la finalisation',' ') */
				       		CASE A2.STATUS
				      		  WHEN '1' THEN  'Approbation en cours de traitement'
				      		  WHEN '2' THEN  'Complété'
				      		  WHEN '3' THEN 'Refuser'
				      		  WHEN '4' THEN 'Annuler'
				      		  WHEN '5' THEN 'Prise de décision'				      		  
				      		  WHEN '6' THEN 'Approuvé à l‘issue de la finalisation'
				      		ELSE
				      		  ''
				      		END
				      	WHEN :vo.session_user_locale = 'de' THEN
				       		/* DECODE(A2.STATUS, '1' ,'Genehmigung in Bearbeitung', '2', 'Abgeschlossen', '3', 'Ablehnen', '4', 'Abbrechen', '5', 'Entscheidungsfindung', '6', 'Genehmigt nach Abschluss',' ') */
				       		CASE A2.STATUS
				      		  WHEN '1' THEN  'Genehmigung in Bearbeitung'
				      		  WHEN '2' THEN  'Abgeschlossen'
				      		  WHEN '3' THEN 'Ablehnen'
				      		  WHEN '4' THEN 'Abbrechen'
				      		  WHEN '5' THEN 'Entscheidungsfindung'				      		  
				      		  WHEN '6' THEN 'Genehmigt nach Abschluss'
				      		ELSE
				      		  ''
				      		END
				       	ELSE
				       		/* DECODE(A2.STATUS, '1' ,'Approval in Progress', '2', 'Completed', '3', 'Reject', '4', 'Cancel', '5', 'Decide Arbitrarily', '6', 'Approved after Completion',' ') */ 
				       		CASE A2.STATUS
				      		  WHEN '1' THEN  'Approval in Progress'
				      		  WHEN '2' THEN  'Completed'
				      		  WHEN '3' THEN 'Reject'
				      		  WHEN '4' THEN 'Cancel'
				      		  WHEN '5' THEN 'Decide Arbitrarily'				      		  
				      		  WHEN '6' THEN 'Approved after Completion'
				      		ELSE
				      		  ''
				      		END
				       	END AS STATUS_NM
				       ,((SELECT  COUNT(MIS_ID) FROM TB_COM_ROUTE_WSVO WHERE MIS_ID = A1.MIS_ID AND ACTIVITY != '9') * 2) +
                        (SELECT  COUNT(MIS_ID) FROM TB_COM_ROUTE_WSVO WHERE MIS_ID = A1.MIS_ID AND ACTIVITY = '9') AS CNT
				  FROM  TB_COM_ROUTE_WSVO A1
				       ,TB_COM_START_PROCESS_WSVO A2
				 WHERE  A1.MODULE_ID = A2.MODULE_ID
				   AND  A1.MIS_ID = A2.MIS_ID
				   AND  A1.MIS_ID = :vo.mis_id
				 ORDER  BY A2.CREATE_DATE, A1.SEQUENCE
            ]]>
          </statement>
        </query>
        
        <query id="clm.manage.checkVacation" isCamelCase="false" comment="리뷰어 휴가 여부 체크 ">
		  	<statement>
		    <![CDATA[
				SELECT A.REG_ID, TYPE1, CONVERT(VARCHAR, START_DT, 23) START_DT, CONVERT(VARCHAR , END_DT, 23) END_DT
				FROM TN_LAS_CAL A
				WHERE GETDATE() BETWEEN A.START_DT AND A.END_DT 
				AND A.REG_ID = (SELECT RESPMAN_ID FROM TN_CLM_CONT_CNSDREQ_RESPMAN WHERE CNSDREQ_ID=:vo.cnsdreq_id AND MAIN_CNSD_YN='Y')
				AND A.DEL_YN = 'N'
	      	]]>
		  	</statement>
		</query>


		<!-- 2014-03-27 Kevin Added.계약의 GERP 상세 정보를 조회한다.	 Ad-hoc version-->
		<query id="clm.manage.gerpInformationdetail" isCamelCase="false" comment="To get gerp detail per contract. Adhoc query version">
		  	<statement>
		    <![CDATA[
				SELECT	B.CUSTOMER_NM1, 
								B.GERP_CD,
								B.MANDATORY, 
								B.VENDOR_TYPE, 
								(CASE B.VENDOR_TYPE WHEN 'C' THEN 'Customer' ELSE 'Vendor' END) AS VENDOR_TYPE_DESC,
								A.CONTRACT_DIV_CODE, 
								C.SP_CODE_DESC AS GERP_DIVISION, 
								A.CONTRACT_TYPE, 
								D.SP_CODE_DESC AS CONTRACT_TYPE_DESC, 
								A.COST_TYPE,
								E.SP_CODE_DESC AS COST_TYPE_DESC
						FROM	dbo.TN_CLM_CONTRACT_MASTER AS A(NOLOCK)
						INNER JOIN dbo.TN_CLM_CUSTOMER AS B(NOLOCK) ON A.CNTRT_OPPNT_CD  = B.CUSTOMER_CD
						LEFT JOIN dbo.TB_GERP_CODE_MAPPING AS C(NOLOCK) ON A.COMP_CD = C.SP_CODE1	AND A.CONTRACT_DIV_CODE = C.SP_CODE2	AND C.MAPPING_TYPE = 'F'
						LEFT JOIN dbo.TB_GERP_CODE_MAPPING AS D(NOLOCK) ON A.COMP_CD = D.SP_CODE1	AND A.CONTRACT_TYPE = D.SP_CODE2		AND D.MAPPING_TYPE = 'E'
						LEFT JOIN dbo.TB_GERP_CODE_MAPPING AS E(NOLOCK) ON A.COST_TYPE = E.SP_CODE1 AND E.MAPPING_TYPE = 'D'
						WHERE A.CNTRT_ID = :cntrtID
	      	]]>
		  	</statement>
		</query>
		
		<!-- 2014-03-27 Kevin Added.계약의 GERP 상세 정보를 조회한다.	 SP version-->
		<query id="clm.manage.gerpInformationdetail2" isCamelCase="false" comment="To get gerp detail per contract. Stored Procedure version">
		  	<statement>
		    <![CDATA[
				EXEC dbo.SP_CONTRACT_SELECT_GERPINFORMATION_PER_CONTRACT :vo.CntrtID
	      	]]>
		  	</statement>
		</query>
		
		<!-- 2014-04-08 Kevin ddded.타입별로 GERP 코드 리스트를 조회한다.-->
		<query id="clm.manage.getgerpcodelist" isCamelCase="false" comment="This is to retrive gerp code list by type">
		  	<statement>
		    <![CDATA[
				EXEC dbo.SP_GERP_SELECT_CODELIST_BY_TYPE_COMPCD :vo.GERPCodeType, :vo.CompCd
	      	]]>
		  	</statement>
		</query>
		
		<!-- 2014-06-12 Kevin changed. CNTRT_NO update does not need anymore.-->
		<query id="clm.manage.updateCntrtNo" isCamelCase="false" comment="cntrt_no 값 update">
		  	<statement>
		    <![CDATA[
		    	UPDATE TN_CLM_CONTRACT_MASTER
		           SET CNTRT_NO = (	
									SELECT 
										CASE 
											WHEN CNT1 = 0 	THEN AUTO_CNTRD_NM + '0001'
												ELSE AUTO_CNTRD_NM + dbo.Function_lpad(CONVERT(VARCHAR, (SUBSTRING(MAX1,LEN(MAX1)-3,4))+1), 4, '0')
											END AS AUTO_CNTRD_NM
										FROM     
										(   
											SELECT
												(SELECT COUNT(CNTRT_ID) 
													FROM TN_CLM_CONTRACT_MASTER A  
													WHERE CHARINDEX(TA.AUTO_CNTRD_NM,CNTRT_NO) > 0) AS CNT1,
												(SELECT MAX(CNTRT_NO) 
													FROM TN_CLM_CONTRACT_MASTER A  
													WHERE CHARINDEX(TA.AUTO_CNTRD_NM,CNTRT_NO) > 0) AS MAX1,
															AUTO_CNTRD_NM
											FROM (
													SELECT 	:vo.session_comp_cd + Rtrim(replace(CONVERT(CHAR(10), GETDATE(), 11),'/',''))+'_' AS AUTO_CNTRD_NM
												 ) TA
										) X
	          			             )
				WHERE CNTRT_ID = :vo.cntrt_id
	      	]]>
		  	</statement>
		</query>
		
		<!-- 2014-08-12 Kevin added. Basic Information 공통 페이지에서 사용할 데이터를 조회한다. -->
		<query id="clm.manage.getBasicInformationData" isCamelCase="false" comment="get data to be used into basic information common page">
		  	<statement>
		    	<![CDATA[
		    		EXEC	dbo.SP_CNSD_SELECT_BASICINFO	:vo.cnsdreq_id
		    	]]>
		    </statement>
		</query>
		
		<!-- 2014-12-08 Sungwoo added. for Reviewer List search. 어사인된 리뷰어 조회하기 위해 쿼리 추가. -->
		<query id="clm.manage.listContractrReviewer" isCamelCase="false" comment="계약관리_계약_권한요청 - 관련자">
			<statement>
			<![CDATA[
				SELECT U.USER_ID
					,U.USER_NM_ENG
					,U.JIKGUP_NM_ENG
					,U.DEPT_NM_ENG
					,RM.MAIN_CNSD_YN
				FROM TN_CLM_CONTRACT_MASTER M
				INNER JOIN TN_CLM_CONTRACT_CNSD C ON C.CNTRT_ID = M.CNTRT_ID
				INNER JOIN TN_CLM_CONT_CNSDREQ R ON R.CNSDREQ_ID = C.CNSDREQ_ID
				INNER JOIN TN_CLM_CONT_CNSDREQ_RESPMAN RM ON RM.CNSDREQ_ID = C.CNSDREQ_ID
				INNER JOIN TB_COM_USER U ON U.USER_ID = RM.RESPMAN_ID 
				WHERE M.CNTRT_ID = :vo.cntrt_id
				GROUP BY U.USER_ID
					,U.USER_NM_ENG
					,U.JIKGUP_NM_ENG
					,U.DEPT_NM_ENG
					,RM.MAIN_CNSD_YN
				ORDER BY RM.MAIN_CNSD_YN DESC
			]]>
			</statement>
		</query>
	</queries>
</queryservice>