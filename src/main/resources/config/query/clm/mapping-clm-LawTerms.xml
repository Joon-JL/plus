<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE queryservice PUBLIC "-//ANYFRAME//DTD QUERYSERVICE//EN"
"http://www.anyframejava.org/dtd/anyframe-core-query-mapping-3.1.dtd">

<queryservice>
    <queries>

<query id="clm.share.listLawTerms" isCamelCase="false">
  <statement>
    <![CDATA[
     	SELECT *
		    FROM	(
					SELECT rownum RN, t.*, COUNT(1) over() TOTAL_CNT
				    FROM	(
					      SELECT SEQNO
					        ,TERMS_NM
					        ,TERMS_ABBR_NM
					        ,TERMS_ENG_NM
					        ,TERMS_ENG_ABBR_NM
					        ,TERMS_EXPL
					        ,RDCNT
					        ,TO_CHAR(REG_DT, 'YYYYMMDD') AS REG_DT
					        ,REG_ID
					        ,REG_NM
					        ,MOD_DT
					        ,MOD_ID
					        ,MOD_NM
					        ,DEL_YN
					        ,DEL_DT
					        ,DEL_ID
					        ,DEL_NM
					         FROM TN_CLM_TERMS
					         WHERE 1=1 
					         AND DEL_YN   = 'N'
		       	#if (!$vo.srch_keyword.equals(""))
		       	   	#if($vo.srch_keyword.equals("terms"))
		       	    	AND		UPPER(TERMS_NM) LIKE '%' + UPPER(:vo.srch_keyword_content) + '%'
		       	    #else
						AND		UPPER(TERMS_ABBR_NM) LIKE '%' + UPPER(:vo.srch_keyword_content) + '%'
					#end
				#end
				ORDER BY  SEQNO DESC
       				     ) t
					 ) 
		WHERE RN between :vo.start_index and :vo.end_index
         
    ]]>
  </statement>
</query>


<query id="clm.share.insertLawTerms" isCamelCase="false">
  <statement>
    <![CDATA[
    INSERT INTO TN_CLM_TERMS (
           		 SEQNO
               , TERMS_NM
               , TERMS_ABBR_NM
               , TERMS_ENG_NM
               , TERMS_ENG_ABBR_NM
               , TERMS_EXPL
               , RDCNT
               , REG_DT
               , REG_ID
               , REG_NM
        ) VALUES (
           :vo.seqno
          ,:vo.terms_nm
          ,:vo.terms_abbr_nm
          ,:vo.terms_eng_nm
          ,:vo.terms_eng_abbr_nm
          ,:vo.terms_expl          
          ,0
          ,SYSDATE
          ,:vo.reg_id
          ,:vo.reg_nm
        )
    ]]>
  </statement>
</query>


<query id="clm.share.modifyLawTerms" isCamelCase="false">
  <statement>
    <![CDATA[
         UPDATE TN_CLM_TERMS
          SET SEQNO = :vo.seqno
              , TERMS_NM = :vo.terms_nm
              , TERMS_ABBR_NM = :vo.terms_abbr_nm
              , TERMS_EXPL = :vo.terms_expl 
              , MOD_DT  = SYSDATE  
              , MOD_ID = :vo.mod_id
              , MOD_NM = :vo.mod_nm
          WHERE SEQNO =:vo.seqno
            	AND	DEL_YN   = 'N'
    ]]>
  </statement>
</query>


<query id="clm.share.detailLawTerms" isCamelCase="false">
  <statement>
    <![CDATA[
				  SELECT 	 SEQNO
					        ,TERMS_NM
					        ,TERMS_ABBR_NM
					        ,TERMS_ENG_NM
					        ,TERMS_ENG_ABBR_NM
					        ,TERMS_EXPL
					        ,RDCNT
					        ,TO_CHAR(REG_DT, 'YYYY-MM-DD') AS REG_DT
					        ,REG_ID
					        ,REG_NM
					        ,MOD_DT
					        ,MOD_ID
					        ,MOD_NM
					        ,DEL_YN
					        ,DEL_DT
					        ,DEL_ID
					        ,DEL_NM
				 FROM	TN_CLM_TERMS
			     WHERE 	SEQNO = :vo.seqno
			    
    ]]>
  </statement>
</query>   

<query id="clm.share.deleteLawTerms" isCamelCase="false">
  <statement>
    <![CDATA[
		      UPDATE TN_CLM_TERMS
		       SET       DEL_YN  = 'Y'
				        ,DEL_DT  = SYSDATE
				        ,DEL_ID  = :vo.del_id
				        ,DEL_NM  = :vo.del_nm
				WHERE	SEQNO    = :vo.seqno
				AND		DEL_YN   = 'N'	         


        
           
    ]]>
  </statement>
</query>
	
	<!-- LawTerm RDCNT Increase -->
		<query id="clm.lawterms.increseRdcnt" isCamelCase="false">
            <statement>
            <![CDATA[
                UPDATE  TN_CLM_TERMS
                   SET  RDCNT = RDCNT + 1
                 WHERE	1=1
				   AND	SEQNO    = :vo.seqno
				   AND	DEL_YN   = 'N'
            ]]>
            </statement>
        </query>    
<!-- LawTerm MAX Sequence -->
		<query id="clm.lawterms.makeSeqLibrary" isCamelCase="false">
			<statement>
			<![CDATA[
				SELECT	ISNULL(MAX(SEQNO)+1,1) NEXT_SEQNO
				  FROM	TN_CLM_TERMS
				 
		
			]]>
			</statement>
		</query>
		
		
		<!-- 표준 조항 권한 체크 정보  -->
		<query id="clm.lawterms.authLawTerms" isCamelCase="false">
		  	<statement>
			    <![CDATA[
					SELECT	SEQNO, TERMS_NM, TERMS_ABBR_NM,TERMS_ENG_NM,TERMS_EXPL, RDCNT
						  , TO_CHAR(REG_DT, 'YYYYMMDD') AS REG_DT, REG_ID, REG_NM
					FROM 	TN_CLM_TERMS
					WHERE	SEQNO = :vo.seqno
			    ]]>
		  	</statement>
		</query>
		
	 	</queries>
</queryservice>