<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE queryservice PUBLIC "-//ANYFRAME//DTD QUERYSERVICE//EN"
"http://www.anyframejava.org/dtd/anyframe-core-query-mapping-3.1.dtd">

<queryservice>
    <queries>
    
    	<!-- 의뢰내역 - 검토의뢰 - 상세 -->
        <query id="las.assign.detailAssign" isCamelCase="false">
            <statement>
            <![CDATA[
	            SELECT *
				  FROM TN_CLM_CONTRACT_MASTER
				 WHERE CNTRT_ID = :vo.cntrt_id
            ]]>
            </statement>
        </query>
        
    	<!-- 의뢰내역 - 검토의뢰 배정 등록 - 팝업 -->
        <query id="las.assign.listAssignPop" isCamelCase="false">
            <statement>
            <![CDATA[
	            SELECT *
	              FROM(   SELECT rownum RN, t.*, COUNT(1) over() TOTAL_CNT
			                FROM ( SELECT  A.CNTRT_ID
										  ,A.CNTRT_NM
										  ,D.REQMAN_NM
										  ,C.CNSDMAN_NM
										  ,D.REQDAY
									FROM  TN_CLM_CONTRACT_MASTER A
										 ,TN_CIS_CUSTOMER B
										 ,TN_CLM_CONTRACT_CNSD C
										 ,TN_CLM_CONT_CNSDREQ D
									WHERE A.CNTRT_ID = :vo.cntrt_id
									#if (!$vo.srch_cntrt_nm.equals(""))
										AND A.CNTRT_NM LIKE '%' + :vo.srch_cntrt_nm + '%'
									#end
									#if (!$vo.srch_company_nm.equals(""))
										AND B.NAME1 LIKE '%' + :vo.srch_company_nm + '%'
									#end
									AND A.CNTRT_ID = C.CNTRT_ID(+)
									AND C.CNSDREQ_ID = D.CNSDREQ_ID 
									ORDER BY A.CNTRT_ID
	                             ) t
	            		ORDER BY RN 
	            		)
	            WHERE RN between :vo.start_index and :vo.end_index
            ]]>
            </statement>
        </query>
    </queries>
</queryservice>