<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE queryservice PUBLIC "-//ANYFRAME//DTD QUERYSERVICE//EN"
"http://www.anyframejava.org/dtd/anyframe-core-query-mapping-3.1.dtd">

<queryservice>
	<queries>
		<query id="secfw.board.listBoardMng" isCamelCase="false">
			<statement>
			<![CDATA[
                SELECT E.*
                  FROM ( SELECT ROWNUM NUM,
                                COUNT(1) over() TOTAL_CNT,
                                D.*
                           FROM ( SELECT  A.SYS_CD
                                         ,A.BOARD_ID
                                         ,B.BOARD_NM
                                         ,A.BOARD_TYPE
                                         ,C.CD_NM BOARD_TYPE_NM
                                         ,A.REPLY_YN
                                         ,A.APPEND_YN
                                         ,A.FILE_YN
                                         ,A.USE_YN
                                         ,A.REG_ID
                                         ,A.REG_NM
                                         ,A.REG_JIKGUP_NM
                                         ,A.REG_DEPT_NM
                                         ,TO_CHAR(A.REG_DT, 'yyyy-MM-dd') REG_DT
                                    FROM  TB_COM_BOARD_MASTER A
                                         ,TB_COM_BOARD_TITLE  B
                                         ,(SELECT  CD
                                                  ,CD_NM
                                             FROM  TB_COM_CD
                                            WHERE  SYS_CD = :vo.sys_cd
                                              AND  GRP_CD = 'BOARD_TYPE') C
                                   WHERE  A.SYS_CD = B.SYS_CD
                                     AND  A.BOARD_ID = B.BOARD_ID
                                     AND  A.BOARD_TYPE = C.CD
                                     AND  A.SYS_CD = :vo.sys_cd
                                     AND  B.LANGUAGE_TYPE = :vo.defaultLocale
                                     AND  A.DEL_YN = 'N'
                                     #if($vo.srch_board_nm && !$vo.srch_board_nm.equals(""))
                                     AND  B.BOARD_NM LIKE '%' || :vo.srch_board_nm || '%' 
                                     #end
                                     #if($vo.srch_use_yn && !$vo.srch_use_yn.equals(""))
                                     AND  A.USE_YN = :vo.srch_use_yn 
                                     #end
                                   ORDER BY A.REG_DT DESC ) D ) E
                 WHERE E.NUM  BETWEEN  :vo.start_index  AND  :vo.end_index
			]]>
			</statement>
		</query>
		
		<query id="secfw.board.insertBoardMng" isCamelCase="false">
			<statement>
			<![CDATA[
                INSERT  INTO  TB_COM_BOARD_MASTER (
                        SYS_CD
                       ,BOARD_ID
                       ,COMMENTS
                       ,BOARD_TYPE
                       ,DEFAULT_ROW_CNT
                       ,ROW_CNT_YN
                       ,ROW_CNT
                       ,NEW_HOLD_DAY
                       ,DEFAULT_HOLD_DAY
                       ,HOLD_DAY_YN
                       ,IMG_YN
                       ,FILE_YN
                       ,MAX_FILE_CNT
                       ,MAX_FILE_SIZE
                       ,DIV_YN
                       ,DIV_CD
                       ,RECOMMEND_YN
                       ,APPEND_RECOMMEND_YN
                       ,REPLY_YN
                       ,APPEND_YN
                       ,OPEN_YN
                       ,SECURITY_YN
                       ,ANONYMITY_YN
                       ,USE_YN
                       ,SEND_MAIL_YN
                       ,SEND_MAIL_ADDR
                       ,TEMP_SAVE_YN
                       ,URGENCY_YN
                       ,URGENCY_DAY
                       ,READ_USER_YN
                       ,DEL_YN
                       ,REG_ID
                       ,REG_NM
                       ,REG_JIKGUP_NM
                       ,REG_DEPT_NM
                       ,REG_DT
                       ,MOD_ID
                       ,MOD_NM
                       ,MOD_JIKGUP_NM
                       ,MOD_DEPT_NM
                       ,MOD_DT )
                VALUES (
                        :vo.sys_cd
                       ,:vo.board_id
                       ,:vo.comments
                       ,:vo.board_type
                       ,:vo.default_row_cnt
                       ,:vo.row_cnt_yn
                       ,:vo.row_cnt
                       ,:vo.new_hold_day
                       ,:vo.default_hold_day
                       ,:vo.hold_day_yn
                       ,:vo.img_yn
                       ,:vo.file_yn
                       ,:vo.max_file_cnt
                       ,:vo.max_file_size
                       ,:vo.div_yn
                       ,:vo.div_cd
                       ,:vo.recommend_yn
                       ,:vo.append_recommend_yn
                       ,:vo.reply_yn
                       ,:vo.append_yn
                       ,:vo.open_yn
                       ,:vo.security_yn
                       ,:vo.anonymity_yn
                       ,:vo.use_yn
                       ,:vo.send_mail_yn
                       ,:vo.send_mail_addr
                       ,:vo.temp_save_yn
                       ,:vo.urgency_yn
                       ,:vo.urgency_day
                       ,:vo.read_user_yn
                       ,:vo.del_yn
                       ,:vo.reg_id
                       ,:vo.reg_nm
                       ,:vo.reg_jikgup_nm
                       ,:vo.reg_dept_nm
                       ,SYSDATE
                       ,:vo.mod_id
                       ,:vo.mod_nm
                       ,:vo.mod_jikgup_nm
                       ,:vo.mod_dept_nm
                       ,SYSDATE )
			]]>
			</statement>
		</query>
		
		<query id="secfw.board.insertBoardTitle">
			<statement>
			<![CDATA[
                INSERT  INTO  TB_COM_BOARD_TITLE (
                        SYS_CD
                       ,BOARD_ID
                       ,BOARD_TITLE_SEQ
                       ,BOARD_NM
                       ,LANGUAGE_TYPE
                       ,REG_ID
                       ,REG_NM
                       ,REG_JIKGUP_NM
                       ,REG_DEPT_NM
                       ,REG_DT
                       ,MOD_ID
                       ,MOD_NM
                       ,MOD_JIKGUP_NM
                       ,MOD_DEPT_NM
                       ,MOD_DT )
                VALUES  (
                        :vo.sys_cd
                       ,:vo.board_id
                       ,(SELECT    NVL(MAX(BOARD_TITLE_SEQ)+11, 1) 
                           FROM TB_COM_BOARD_TITLE 
                          WHERE SYS_CD = :vo.sys_cd 
                            AND BOARD_ID = :vo.board_id)
                       ,:vo.board_nm
                       ,:vo.language_type
                       ,:vo.reg_id
                       ,:vo.reg_nm
                       ,:vo.reg_jikgup_nm
                       ,:vo.reg_dept_nm
                       ,SYSDATE
                       ,:vo.mod_id
                       ,:vo.mod_nm
                       ,:vo.mod_jikgup_nm
                       ,:vo.mod_dept_nm
                       ,SYSDATE )
			]]>
			</statement>
		</query>
		
		<query id="secfw.board.detailBoardMng" isCamelCase="false">
			<statement>
			<![CDATA[
                SELECT *
                  FROM TB_COM_BOARD_MASTER
                 WHERE SYS_CD = :vo.sys_cd
                   AND BOARD_ID = :vo.board_id
			]]>
			</statement>
		</query>
		
        <query id="secfw.board.listBoardTitle" isCamelCase="false">
            <statement>
            <![CDATA[
                SELECT BOARD_NM,
                       LANGUAGE_TYPE
                  FROM TB_COM_BOARD_TITLE
                 WHERE SYS_CD = :vo.sys_cd
                   AND BOARD_ID = :vo.board_id
            ]]>
            </statement>
        </query>
        
        <query id="secfw.board.modifyBoardTitle">
            <statement>
            <![CDATA[
                UPDATE  TB_COM_BOARD_TITLE
                   SET  BOARD_NM = :vo.board_nm
                       ,MOD_ID = :vo.mod_id 
                       ,MOD_NM = :vo.mod_nm 
                       ,MOD_JIKGUP_NM = :vo.mod_jikgup_nm 
                       ,MOD_DEPT_NM = :vo.mod_dept_nm
                       ,MOD_DT = SYSDATE
                WHERE   SYS_CD = :vo.sys_cd
                  AND   BOARD_ID = :vo.board_id
                  AND   LANGUAGE_TYPE = :vo.language_type
            ]]>
            </statement>
        </query>
        
        <query id="secfw.board.modifyBoardMng">
            <statement>
            <![CDATA[
                UPDATE  TB_COM_BOARD_MASTER
                   SET  COMMENTS            = :vo.comments 
                       ,BOARD_TYPE          = :vo.board_type 
                       ,DEFAULT_ROW_CNT     = :vo.default_row_cnt 
                       ,ROW_CNT_YN          = :vo.row_cnt_yn 
                       ,ROW_CNT             = :vo.row_cnt 
                       ,NEW_HOLD_DAY        = :vo.new_hold_day 
                       ,DEFAULT_HOLD_DAY    = :vo.default_hold_day 
                       ,HOLD_DAY_YN         = :vo.hold_day_yn 
                       ,IMG_YN              = :vo.img_yn 
                       ,FILE_YN             = :vo.file_yn 
                       ,MAX_FILE_CNT        = :vo.max_file_cnt 
                       ,MAX_FILE_SIZE       = :vo.max_file_size 
                       ,DIV_YN              = :vo.div_yn 
                       ,DIV_CD              = :vo.div_cd 
                       ,RECOMMEND_YN        = :vo.recommend_yn 
                       ,APPEND_RECOMMEND_YN = :vo.append_recommend_yn
                       ,REPLY_YN            = :vo.reply_yn 
                       ,APPEND_YN           = :vo.append_yn 
                       ,OPEN_YN             = :vo.open_yn 
                       ,SECURITY_YN         = :vo.security_yn 
                       ,ANONYMITY_YN        = :vo.anonymity_yn 
                       ,USE_YN              = :vo.use_yn 
                       ,SEND_MAIL_YN        = :vo.send_mail_yn 
                       ,SEND_MAIL_ADDR      = :vo.send_mail_addr 
                       ,TEMP_SAVE_YN        = :vo.temp_save_yn 
                       ,URGENCY_YN          = :vo.urgency_yn
                       ,URGENCY_DAY         = :vo.urgency_day  
                       ,READ_USER_YN        = :vo.read_user_yn 
                       ,MOD_ID              = :vo.mod_id 
                       ,MOD_NM              = :vo.mod_nm 
                       ,MOD_JIKGUP_NM       = :vo.mod_jikgup_nm 
                       ,MOD_DEPT_NM         = :vo.mod_dept_nm 
                       ,MOD_DT              = SYSDATE
                 WHERE  SYS_CD              = :vo.sys_cd
                   AND  BOARD_ID            = :vo.board_id
            ]]>
            </statement>
        </query>
        
        <query id="secfw.board.deleteBoardMng">
            <statement>
            <![CDATA[
                UPDATE  TB_COM_BOARD_MASTER
                   SET  DEL_YN          = :vo.del_yn 
                       ,MOD_ID          = :vo.mod_id 
                       ,MOD_NM          = :vo.mod_nm 
                       ,MOD_JIKGUP_NM   = :vo.mod_jikgup_nm 
                       ,MOD_DEPT_NM     = :vo.mod_dept_nm 
                       ,MOD_DT          = SYSDATE
                 WHERE  SYS_CD          = :vo.sys_cd
                   AND  BOARD_ID        = :vo.board_id
            ]]>
            </statement>
        </query>
        
        <query id="secfw.board.listBoardAuth" isCamelCase="false">
			<statement>
			<![CDATA[
				SELECT SYS_CD,
				       BOARD_ID,
				       ROLE_CD,
				       AUTH_CD
				  FROM TB_COM_BOARD_AUTH
				 WHERE SYS_CD = :vo.sys_cd
				   AND BOARD_ID = :vo.board_id
			]]>
			</statement>
		</query>
        
    </queries>
</queryservice>
